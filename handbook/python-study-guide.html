<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Complete Python Study Guide</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Newsreader:ital,wght@0,400;0,600;1,400&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--bg:#111214;--bg2:#18191d;--surface:#1e2025;--surface2:#252830;--border:#2e3039;--border2:#3a3d48;--text:#b8bcc8;--text-dim:#6c7086;--heading:#e8eaf0;--white:#f4f5f7;--amber:#f5a623;--amber-dim:rgba(245,166,35,0.12);--green:#50d890;--green-dim:rgba(80,216,144,0.10);--blue:#5b9cf5;--blue-dim:rgba(91,156,245,0.10);--pink:#e878a0;--pink-dim:rgba(232,120,160,0.10);--cyan:#56d4c8;--cyan-dim:rgba(86,212,200,0.10);--red:#f06868;--red-dim:rgba(240,104,104,0.12);--purple:#a78bfa;--purple-dim:rgba(167,139,250,0.10);--code-bg:#14151a;--radius:10px;--radius-lg:14px}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'Outfit',sans-serif;background:var(--bg);color:var(--text);line-height:1.7;min-height:100vh;overflow-x:hidden}

/* Progress bar */
#progress{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--amber),var(--green),var(--blue));z-index:9999;transition:width .1s;width:0}

/* Header */
.header{padding:56px 32px 36px;text-align:center;position:relative;border-bottom:1px solid var(--border)}
.header::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 50% 70% at 50% 0%,rgba(245,166,35,0.06),transparent),radial-gradient(ellipse 30% 50% at 75% 10%,rgba(80,216,144,0.04),transparent);pointer-events:none}
.header h1{font-family:'Newsreader',serif;font-size:clamp(2.2rem,4.5vw,3.6rem);color:var(--heading);letter-spacing:-0.03em;position:relative}
.header h1 em{font-style:italic;color:var(--amber);font-weight:400}
.header p{font-size:0.95rem;color:var(--text-dim);margin-top:6px;position:relative}
.header .guide-badge{display:inline-block;background:var(--green-dim);color:var(--green);font-size:0.75rem;font-weight:700;padding:4px 12px;border-radius:999px;margin-top:10px;letter-spacing:0.05em}

/* Search */
.search-wrap{max-width:480px;margin:20px auto 0;position:relative}
.search-wrap input{width:100%;padding:10px 16px 10px 40px;background:var(--surface);border:1px solid var(--border);border-radius:999px;color:var(--heading);font-family:'Outfit',sans-serif;font-size:0.88rem;outline:none;transition:border-color .2s}
.search-wrap input:focus{border-color:var(--amber)}
.search-wrap input::placeholder{color:var(--text-dim)}
.search-wrap svg{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--text-dim);width:16px;height:16px}

/* Nav */
.nav{display:flex;justify-content:center;flex-wrap:wrap;gap:6px;padding:16px 24px;position:sticky;top:0;z-index:100;background:rgba(17,18,20,0.88);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border-bottom:1px solid var(--border)}
.nav a{font-size:0.72rem;font-weight:600;text-transform:uppercase;letter-spacing:0.07em;padding:5px 12px;border-radius:999px;text-decoration:none;color:var(--text-dim);border:1px solid transparent;transition:all .2s;white-space:nowrap}
.nav a:hover,.nav a.active{color:var(--amber);border-color:rgba(245,166,35,0.3);background:var(--amber-dim)}

/* Content */
.content{max-width:900px;margin:0 auto;padding:32px 28px 100px}

/* Section dividers */
.section-divider{display:flex;align-items:center;gap:14px;padding:40px 0 16px;margin-top:20px}
.section-divider h2{font-family:'Newsreader',serif;font-size:1.6rem;color:var(--heading);white-space:nowrap;font-weight:600;letter-spacing:-0.02em}
.section-divider .line{flex:1;height:1px;background:linear-gradient(90deg,var(--border),transparent)}
.section-divider .badge{font-size:0.62rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;padding:3px 10px;border-radius:6px;white-space:nowrap}

/* Headers */
h3{font-family:'Outfit',sans-serif;font-size:1.15rem;font-weight:700;color:var(--heading);margin:28px 0 10px;letter-spacing:-0.01em}
h4{font-family:'Outfit',sans-serif;font-size:1rem;font-weight:600;color:var(--heading);margin:20px 0 8px}
h5,h6{font-family:'Outfit',sans-serif;font-size:0.9rem;font-weight:600;color:var(--text);margin:16px 0 6px}

/* Code */
pre{background:var(--code-bg);border:1px solid var(--border);border-radius:var(--radius);padding:14px 16px;overflow-x:auto;margin:10px 0;font-size:0.76rem;line-height:1.75}
code{font-family:'IBM Plex Mono',monospace;font-size:inherit}
pre code{color:var(--text)}
code.inline{background:var(--surface2);color:var(--cyan);padding:2px 6px;border-radius:4px;font-size:0.82rem}

/* Syntax colors */
.kw{color:var(--purple)}.fn{color:var(--green)}.st{color:var(--amber)}.cm{color:var(--text-dim);font-style:italic}.nb{color:var(--cyan)}.op{color:var(--pink)}.num{color:var(--blue)}.dc{color:var(--pink)}

/* Paragraphs */
p{margin:8px 0;line-height:1.7}
p + p{margin-top:12px}

/* Links */
a{color:var(--blue);text-decoration:none}
a:hover{text-decoration:underline;color:var(--amber)}

/* Lists */
ul,ol{margin:8px 0 8px 24px}
li{margin:4px 0;line-height:1.6}
li::marker{color:var(--text-dim)}

/* Tables */
table{width:100%;border-collapse:collapse;margin:12px 0;font-size:0.85rem}
thead tr{background:var(--surface2)}
th{font-weight:600;color:var(--heading);text-align:left;padding:10px 14px;border:1px solid var(--border)}
td{padding:8px 14px;border:1px solid var(--border);color:var(--text)}
tbody tr:nth-child(even){background:var(--surface)}
tbody tr:hover{background:var(--surface2)}

/* Blockquotes */
blockquote{border-left:3px solid var(--amber);background:var(--surface);padding:12px 18px;margin:12px 0;border-radius:0 var(--radius) var(--radius) 0;color:var(--text);font-size:0.9rem}

/* Details/summary */
details{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);margin:12px 0;overflow:hidden}
summary{padding:12px 18px;cursor:pointer;color:var(--heading);font-weight:600;font-size:0.9rem;transition:background .2s}
summary:hover{background:var(--surface2)}
details[open] summary{border-bottom:1px solid var(--border)}
details > *:not(summary){padding:0 18px}
details > pre{margin:10px 18px;width:calc(100% - 36px)}
details > p{padding:8px 18px}

/* Horizontal rule */
hr{border:none;height:1px;background:var(--border);margin:24px 0}

/* Strong */
strong{color:var(--heading);font-weight:600}

/* Back to top */
#back-top{position:fixed;bottom:28px;right:28px;width:44px;height:44px;border-radius:50%;background:var(--surface);border:1px solid var(--border);color:var(--amber);font-size:1.2rem;cursor:pointer;display:none;align-items:center;justify-content:center;transition:all .2s;z-index:50;box-shadow:0 4px 16px rgba(0,0,0,0.3)}
#back-top:hover{background:var(--amber-dim);border-color:var(--amber);transform:translateY(-2px)}

/* Animations */
.section-divider,h3,h4,p,pre,table,blockquote,ul,ol,details,hr{animation:cardIn .45s ease both}
@keyframes cardIn{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}

/* Search highlight */
mark{background:var(--amber-dim);color:var(--amber);padding:1px 3px;border-radius:3px}

/* Print */
@media print{
  body{background:#fff;color:#222}
  .header::before{display:none}
  .nav,#back-top,#progress,.search-wrap{display:none!important}
  pre{background:#f5f5f5;border-color:#ddd;color:#222}
  .section-divider h2{color:#111}
  h3,h4,strong{color:#111}
  a{color:#0066cc}
  .content{max-width:100%;padding:0}
  blockquote{border-left-color:#999;background:#f9f9f9}
  th{background:#eee;color:#111}
  td{color:#222}
  .kw,.fn,.st,.cm,.nb,.op,.num,.dc{color:#333}
}

/* Mobile */
@media(max-width:768px){
  .header{padding:32px 16px 24px}
  .nav{gap:4px;padding:12px 10px}
  .content{padding:20px 14px 80px}
  pre{font-size:0.7rem;padding:10px 12px}
  .section-divider h2{font-size:1.3rem}
  h3{font-size:1rem}
  table{font-size:0.78rem}
}
</style>
</head>
<body>
<div id="progress"></div>

<div class="header">
  <h1>The Complete Python <em>Study Guide</em></h1>
  <p>From Basics to Advanced &mdash; Interview Ready &mdash; For Developers, Data Scientists &amp; Data Engineers</p>
  <div class="guide-badge">19 CHAPTERS &bull; BEGINNER TO ADVANCED</div>
  <div class="search-wrap">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
    <input type="text" id="search" placeholder="Search topics, functions, concepts..." autocomplete="off">
  </div>
</div>

<nav class="nav" id="nav">
<a href="#chapter-1-setting-up-your-sandbox">Setting Up Your Sandbox</a>
<a href="#chapter-2-python-basics">Python Basics</a>
<a href="#chapter-3-data-structures">Data Structures</a>
<a href="#chapter-4-functions-functional-programming">Functions & Functional Programming</a>
<a href="#chapter-5-object-oriented-programming">Object-Oriented Programming</a>
<a href="#chapter-6-error-handling-exceptions">Error Handling & Exceptions</a>
<a href="#chapter-7-file-io-serialization">File I/O & Serialization</a>
<a href="#chapter-8-modules-packages-imports">Modules, Packages & Imports</a>
<a href="#chapter-9-python-environment-pip-dependency-management">Python Environment, pip & Dependency Management</a>
<a href="#chapter-10-debugging-profiling">Debugging & Profiling</a>
<a href="#chapter-11-intermediate-python">Intermediate Python</a>
<a href="#chapter-12-advanced-python">Advanced Python</a>
<a href="#chapter-13-concurrency-parallelism">Concurrency & Parallelism</a>
<a href="#chapter-14-design-patterns">Design Patterns</a>
<a href="#chapter-15-data-science-with-python">Data Science with Python</a>
<a href="#chapter-16-data-engineering-with-python">Data Engineering with Python</a>
<a href="#chapter-17-testing-code-quality">Testing & Code Quality</a>
<a href="#chapter-18-data-structures-algorithms">Data Structures & Algorithms</a>
<a href="#chapter-19-interview-questions-answers">Interview Questions & Answers</a>
<a href="#appendix-a-quick-reference">Quick Reference</a>
<a href="#appendix-b-resources-references">Resources & References</a>
</nav>

<div class="content" id="content">
<h1 id="the-complete-python-study-guide">The Complete Python Study Guide</h1>
<h3 id="from-basics-to-advanced-interview-ready-for-developers-data-scientists-data-engineers">From Basics to Advanced | Interview Ready | For Developers, Data Scientists & Data Engineers</h3>
<blockquote>Built from the <a href="https://github.com/paramraghavan/beginners-py-learn">beginners-py-learn</a> repository.<br>Every code example can be run in the sandbox (see Chapter 1).</blockquote>
<hr>
<div class="section-divider" id="table-of-contents"><h2>Table of Contents</h2><div class="line"></div><span class="badge" style="background:var(--amber-dim);color:var(--amber)"></span></div>
<ul><li><a href="#chapter-1-setting-up-your-sandbox">Chapter 1: Setting Up Your Sandbox</a></li>
<li><a href="#chapter-2-python-basics">Chapter 2: Python Basics</a></li>
<li><a href="#chapter-3-data-structures">Chapter 3: Data Structures</a></li>
<li><a href="#chapter-4-functions--functional-programming">Chapter 4: Functions & Functional Programming</a></li>
<li><a href="#chapter-5-object-oriented-programming">Chapter 5: Object-Oriented Programming</a></li>
<li><a href="#chapter-6-error-handling--exceptions">Chapter 6: Error Handling & Exceptions</a></li>
<li><a href="#chapter-7-file-io--serialization">Chapter 7: File I/O & Serialization</a></li>
<li><a href="#chapter-8-modules-packages--imports">Chapter 8: Modules, Packages & Imports</a></li>
<li><a href="#chapter-9-python-environment-pip--dependency-management">Chapter 9: Python Environment, pip & Dependency Management</a></li>
<li><a href="#chapter-10-debugging--profiling">Chapter 10: Debugging & Profiling</a></li>
<li><a href="#chapter-11-intermediate-python">Chapter 11: Intermediate Python</a></li>
<li><a href="#chapter-12-advanced-python">Chapter 12: Advanced Python</a></li>
<li><a href="#chapter-13-concurrency--parallelism">Chapter 13: Concurrency & Parallelism</a></li>
<li><a href="#chapter-14-design-patterns">Chapter 14: Design Patterns</a></li>
<li><a href="#chapter-15-data-science-with-python">Chapter 15: Data Science with Python</a></li>
<li><a href="#chapter-16-data-engineering-with-python">Chapter 16: Data Engineering with Python</a></li>
<li><a href="#chapter-17-testing--code-quality">Chapter 17: Testing & Code Quality</a></li>
<li><a href="#chapter-18-data-structures--algorithms">Chapter 18: Data Structures & Algorithms</a></li>
<li><a href="#chapter-19-interview-questions--answers">Chapter 19: Interview Questions & Answers</a></li>
<li><a href="#appendix-a-quick-reference--cheatsheet">Appendix A: Quick Reference / Cheatsheet</a></li>
<li><a href="#appendix-b-resources--references">Appendix B: Resources & References</a></li></ul>
<hr>
<div class="section-divider" id="chapter-1-setting-up-your-sandbox"><h2>Chapter 1: Setting Up Your Sandbox</h2><div class="line"></div><span class="badge" style="background:var(--amber-dim);color:var(--amber)">Chapter 1</span></div>
<p>A sandbox is your safe playground to experiment with Python code. You can test examples, break things, and learn without any risk.</p>
<h3 id="11-what-you-need">1.1 What You Need</h3>
<p>Before anything, you need Python installed on your machine. Let's check if you already have it:</p>
<pre><code><span class="cm"># Open Terminal (Mac/Linux) or Command Prompt (Windows)</span>
python --version
<span class="cm"># or</span>
python3 --version
</code></pre>
<p>If you see something like <code class="inline">Python 3.10.x</code> or higher, you're good. If not, download Python from <a href="https://python.org">python.org</a>.</p>
<p><strong>Windows users</strong>: During installation, <strong>check the box "Add Python to PATH"</strong>. This is the #1 mistake beginners make. Without this, your terminal won't find Python.</p>
<h3 id="12-jupyter-notebook-setup-recommended-sandbox">1.2 Jupyter Notebook Setup (Recommended Sandbox)</h3>
<p>Jupyter Notebook lets you write and run Python code in your browser, one block at a time. It's perfect for learning because you can see results immediately.</p>
<p><strong>Step 1: Create a virtual environment</strong> (this isolates your project's packages from the system):</p>
<pre><code><span class="cm"># Navigate to where you want your project</span>
<span class="nb">cd</span> ~/my-python-learning

<span class="cm"># Create a virtual environment named .venv</span>
python -m venv .venv
</code></pre>
<p><strong>Step 2: Activate the virtual environment:</strong></p>
<pre><code><span class="cm"># Mac/Linux:</span>
<span class="nb">source</span> .venv/bin/activate

<span class="cm"># Windows:</span>
.venv<span class="st">\S</span>cripts<span class="st">\a</span>ctivate

<span class="cm"># You should see (.venv) at the beginning of your terminal prompt</span>
<span class="cm"># That means you&#x27;re inside the virtual environment</span>
</code></pre>
<p><strong>Step 3: Install Jupyter:</strong></p>
<pre><code>python -m pip install --upgrade pip
python -m pip install notebook
</code></pre>
<p><strong>Step 4: Launch Jupyter:</strong></p>
<pre><code>jupyter notebook
</code></pre>
<p>Your browser will open automatically. You'll see a file browser. Click <strong>New > Python 3</strong> to create a new notebook.</p>
<p><strong>Step 5: Try it out:</strong></p>
<p>In the first cell, type:</p>
<pre><code><span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Hello, World!</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p>Press <strong>Shift + Enter</strong> to run the cell. You should see <code class="inline">Hello, World!</code> printed below.</p>
<p><strong>Step 6: Try a few more cells:</strong></p>
<pre><code><span class="cm"># Cell 2: Math</span>
<span class="num">2</span> <span class="op">+</span> <span class="num">2</span>
</code></pre>
<p>(Output: <code class="inline">4</code>)</p>
<pre><code><span class="cm"># Cell 3: Variables</span>
name <span class="op">=</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span>
age <span class="op">=</span> <span class="num">30</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">My name is </span><span class="st">{</span>name<span class="st">}</span><span class="st"> and I am </span><span class="st">{</span>age<span class="st">}</span><span class="st"> years old.</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p>(Output: <code class="inline">My name is Alice and I am 30 years old.</code>)</p>
<h3 id="13-jupyter-tips">1.3 Jupyter Tips</h3>
<table><thead><tr><th>What you want to do</th><th>How</th></tr></thead><tbody><tr><td>Run a cell</td><td><strong>Shift + Enter</strong></td></tr>
<tr><td>Run cell, stay in same cell</td><td><strong>Ctrl + Enter</strong></td></tr>
<tr><td>Add a cell above</td><td>Press <strong>A</strong> (when not editing)</td></tr>
<tr><td>Add a cell below</td><td>Press <strong>B</strong> (when not editing)</td></tr>
<tr><td>Delete a cell</td><td>Press <strong>DD</strong> (double D, when not editing)</td></tr>
<tr><td>Undo delete</td><td><strong>Z</strong></td></tr>
<tr><td>Switch to Markdown</td><td>Press <strong>M</strong></td></tr>
<tr><td>Switch to Code</td><td>Press <strong>Y</strong></td></tr>
<tr><td>Time an expression</td><td><code class="inline">%timeit [x**2 for x in range(1000)]</code></td></tr>
<tr><td>Time a whole cell</td><td>Put <code class="inline">%%time</code> as the first line</td></tr>
<tr><td>List all variables</td><td><code class="inline">%who</code> or <code class="inline">%whos</code> for details</td></tr>
<tr><td>Run a shell command</td><td><code class="inline">!pip install pandas</code></td></tr>
<tr><td>Load a Python file into a cell</td><td><code class="inline">%load filename.py</code></td></tr></tbody></table>
<h3 id="14-alternative-anaconda-batteries-included">1.4 Alternative: Anaconda (Batteries Included)</h3>
<p>If you want everything pre-installed (Jupyter, pandas, numpy, matplotlib, etc.):</p>
<ol><li>Download Anaconda from <a href="https://www.anaconda.com/">anaconda.com</a></li>
<li>Install with defaults</li>
<li>Open <strong>Anaconda Navigator</strong> or run <code class="inline">jupyter notebook</code> from Anaconda Prompt</li></ol>
<h3 id="15-ide-setup-for-larger-projects">1.5 IDE Setup (For Larger Projects)</h3>
<p>Once you move beyond experiments, you'll want an IDE:</p>
<table><thead><tr><th>IDE</th><th>Best For</th><th>Cost</th><th>Setup</th></tr></thead><tbody><tr><td><strong>VS Code</strong></td><td>General Python, lightweight</td><td>Free</td><td>Install Python extension, Ctrl+Shift+P > "Python: Select Interpreter"</td></tr>
<tr><td><strong>PyCharm CE</strong></td><td>Large projects, great debugger</td><td>Free</td><td>Community Edition has built-in venv support</td></tr>
<tr><td><strong>Spyder</strong></td><td>Data science (MATLAB-like)</td><td>Free</td><td>Comes with Anaconda, has variable explorer</td></tr></tbody></table>
<h3 id="16-troubleshooting-common-setup-issues">1.6 Troubleshooting Common Setup Issues</h3>
<p><strong>"jupyter: command not found":</strong></p>
<pre><code><span class="cm"># Use python -m instead:</span>
python -m notebook

<span class="cm"># Or for Python 3 specifically:</span>
python3 -m notebook
</code></pre>
<p><strong>"python: command not found" on Mac:</strong></p>
<pre><code><span class="cm"># macOS often uses python3 instead of python</span>
python3 --version
python3 -m venv .venv
</code></pre>
<p><strong>Multiple Python versions causing confusion:</strong></p>
<pre><code><span class="cm"># See exactly which Python you&#x27;re using:</span>
which python       <span class="cm"># Mac/Linux</span>
where python       <span class="cm"># Windows</span>

<span class="cm"># See the full path:</span>
python -c <span class="st">&quot;import sys; print(sys.executable)&quot;</span>
</code></pre>
<h3 id="exercise-11-verify-your-setup">Exercise 1.1: Verify Your Setup</h3>
<p>Create a Jupyter notebook and run these cells to verify everything works:</p>
<pre><code><span class="cm"># Cell 1</span>
<span class="kw">import</span> sys
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Python version: </span><span class="st">{</span>sys<span class="op">.</span>version<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Python location: </span><span class="st">{</span>sys<span class="op">.</span>executable<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Cell 2</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Hello from Jupyter!</span><span class="st">&quot;</span><span class="op">)</span>
<span class="num">2</span> <span class="op">+</span> <span class="num">2</span>  <span class="cm"># Should show 4</span>

<span class="cm"># Cell 3</span>
<span class="cm"># Test that you can install packages</span>
!pip install requests
<span class="kw">import</span> requests
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Requests version: </span><span class="st">{</span>requests<span class="op">.</span>__version__<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<hr>
<div class="section-divider" id="chapter-2-python-basics"><h2>Chapter 2: Python Basics</h2><div class="line"></div><span class="badge" style="background:var(--amber-dim);color:var(--amber)">Chapter 2</span></div>
<h3 id="21-variables-and-data-types">2.1 Variables and Data Types</h3>
<p>In Python, you don't declare variable types. Python figures it out automatically:</p>
<pre><code><span class="cm"># Numbers</span>
age <span class="op">=</span> <span class="num">25</span>              <span class="cm"># This is an integer (int) - whole numbers</span>
price <span class="op">=</span> <span class="num">19.99</span>         <span class="cm"># This is a float - decimal numbers</span>
complex_num <span class="op">=</span> <span class="num">3</span> <span class="op">+</span> <span class="num">4</span>j  <span class="cm"># This is a complex number (used in math/engineering)</span>

<span class="cm"># Strings - text enclosed in quotes (single or double, both work)</span>
name <span class="op">=</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span>
greeting <span class="op">=</span> <span class="st">&#x27;</span><span class="st">Hello</span><span class="st">&#x27;</span>
multiline <span class="op">=</span> <span class="st">&quot;&quot;&quot;</span><span class="st">This is a</span>
<span class="st">multi-line string.</span>
<span class="st">It preserves line breaks.</span><span class="st">&quot;&quot;&quot;</span>

<span class="cm"># Boolean - True or False (note the capital T and F)</span>
is_active <span class="op">=</span> <span class="kw">True</span>
is_empty <span class="op">=</span> <span class="kw">False</span>

<span class="cm"># None - represents &quot;no value&quot; or &quot;nothing&quot;</span>
result <span class="op">=</span> <span class="kw">None</span>

<span class="cm"># Check what type a variable is:</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">type</span><span class="op">(</span>age<span class="op">)</span><span class="op">)</span>       <span class="cm"># &lt;class &#x27;int&#x27;&gt;</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">type</span><span class="op">(</span>price<span class="op">)</span><span class="op">)</span>     <span class="cm"># &lt;class &#x27;float&#x27;&gt;</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">type</span><span class="op">(</span>name<span class="op">)</span><span class="op">)</span>      <span class="cm"># &lt;class &#x27;str&#x27;&gt;</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">type</span><span class="op">(</span>is_active<span class="op">)</span><span class="op">)</span> <span class="cm"># &lt;class &#x27;bool&#x27;&gt;</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">type</span><span class="op">(</span>result<span class="op">)</span><span class="op">)</span>    <span class="cm"># &lt;class &#x27;NoneType&#x27;&gt;</span>
</code></pre>
<p><strong>Type conversion</strong> - changing one type to another:</p>
<pre><code><span class="cm"># String to number</span>
x <span class="op">=</span> <span class="nb">int</span><span class="op">(</span><span class="st">&quot;</span><span class="st">42</span><span class="st">&quot;</span><span class="op">)</span>       <span class="cm"># x is now the integer 42</span>
y <span class="op">=</span> <span class="nb">float</span><span class="op">(</span><span class="st">&quot;</span><span class="st">3.14</span><span class="st">&quot;</span><span class="op">)</span>   <span class="cm"># y is now the float 3.14</span>

<span class="cm"># Number to string</span>
z <span class="op">=</span> <span class="nb">str</span><span class="op">(</span><span class="num">100</span><span class="op">)</span>         <span class="cm"># z is now the string &quot;100&quot;</span>

<span class="cm"># This is important because you can&#x27;t mix types carelessly:</span>
age <span class="op">=</span> <span class="num">25</span>
<span class="cm"># print(&quot;I am &quot; + age + &quot; years old&quot;)  # ERROR! Can&#x27;t add int to str</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">I am </span><span class="st">&quot;</span> <span class="op">+</span> <span class="nb">str</span><span class="op">(</span>age<span class="op">)</span> <span class="op">+</span> <span class="st">&quot;</span><span class="st"> years old</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># OK: convert int to str first</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">I am </span><span class="st">{</span>age<span class="st">}</span><span class="st"> years old</span><span class="st">&quot;</span><span class="op">)</span>             <span class="cm"># Better: f-strings handle it</span>
</code></pre>
<p><strong>Quick reference - Python data types:</strong></p>
<table><thead><tr><th>Type</th><th>Mutable?</th><th>Ordered?</th><th>Duplicates?</th><th>Example</th><th>When to use</th></tr></thead><tbody><tr><td><code class="inline">int</code></td><td>N/A</td><td>N/A</td><td>N/A</td><td><code class="inline">42</code></td><td>Counting, indexing</td></tr>
<tr><td><code class="inline">float</code></td><td>N/A</td><td>N/A</td><td>N/A</td><td><code class="inline">3.14</code></td><td>Measurements, money</td></tr>
<tr><td><code class="inline">str</code></td><td>No</td><td>Yes</td><td>Yes</td><td><code class="inline">&quot;hello&quot;</code></td><td>Text</td></tr>
<tr><td><code class="inline">list</code></td><td>Yes</td><td>Yes</td><td>Yes</td><td><code class="inline">[1, 2, 3]</code></td><td>Ordered collection that changes</td></tr>
<tr><td><code class="inline">tuple</code></td><td>No</td><td>Yes</td><td>Yes</td><td><code class="inline">(1, 2, 3)</code></td><td>Fixed data (coordinates, records)</td></tr>
<tr><td><code class="inline">set</code></td><td>Yes</td><td>No</td><td>No</td><td><code class="inline">{1, 2, 3}</code></td><td>Unique items, membership testing</td></tr>
<tr><td><code class="inline">dict</code></td><td>Yes</td><td>Yes*</td><td>Keys: No</td><td><code class="inline">{&quot;a&quot;: 1}</code></td><td>Key-value mappings</td></tr>
<tr><td><code class="inline">bool</code></td><td>No</td><td>N/A</td><td>N/A</td><td><code class="inline">True</code></td><td>Conditions</td></tr></tbody></table>
<p>*Dicts are insertion-ordered since Python 3.7</p>
<h3 id="22-operators">2.2 Operators</h3>
<p><strong>Arithmetic operators</strong> - the basics of math:</p>
<pre><code><span class="nb">print</span><span class="op">(</span><span class="num">10</span> <span class="op">+</span> <span class="num">3</span><span class="op">)</span>    <span class="cm"># 13     Addition</span>
<span class="nb">print</span><span class="op">(</span><span class="num">10</span> <span class="op">-</span> <span class="num">3</span><span class="op">)</span>    <span class="cm"># 7      Subtraction</span>
<span class="nb">print</span><span class="op">(</span><span class="num">10</span> <span class="op">*</span> <span class="num">3</span><span class="op">)</span>    <span class="cm"># 30     Multiplication</span>
<span class="nb">print</span><span class="op">(</span><span class="num">10</span> <span class="op">/</span> <span class="num">3</span><span class="op">)</span>    <span class="cm"># 3.333  Float division (always returns float)</span>
<span class="nb">print</span><span class="op">(</span><span class="num">10</span> <span class="op">/</span><span class="op">/</span> <span class="num">3</span><span class="op">)</span>   <span class="cm"># 3      Floor division (drops the decimal)</span>
<span class="nb">print</span><span class="op">(</span><span class="num">10</span> <span class="op">%</span> <span class="num">3</span><span class="op">)</span>    <span class="cm"># 1      Modulo (remainder after division)</span>
<span class="nb">print</span><span class="op">(</span><span class="num">10</span> <span class="op">*</span><span class="op">*</span> <span class="num">3</span><span class="op">)</span>   <span class="cm"># 1000   Power (10 to the 3rd)</span>

<span class="cm"># Floor division is useful for things like:</span>
total_minutes <span class="op">=</span> <span class="num">135</span>
hours <span class="op">=</span> total_minutes <span class="op">/</span><span class="op">/</span> <span class="num">60</span>    <span class="cm"># 2 hours</span>
minutes <span class="op">=</span> total_minutes <span class="op">%</span> <span class="num">60</span>   <span class="cm"># 15 minutes</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>hours<span class="st">}</span><span class="st">h </span><span class="st">{</span>minutes<span class="st">}</span><span class="st">m</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># 2h 15m</span>
</code></pre>
<p><strong>Comparison operators</strong> - return True or False:</p>
<pre><code><span class="nb">print</span><span class="op">(</span><span class="num">5</span> <span class="op">==</span> <span class="num">5</span><span class="op">)</span>    <span class="cm"># True   Equal to</span>
<span class="nb">print</span><span class="op">(</span><span class="num">5</span> <span class="op">!=</span> <span class="num">3</span><span class="op">)</span>    <span class="cm"># True   Not equal to</span>
<span class="nb">print</span><span class="op">(</span><span class="num">5</span> <span class="op">&gt;</span> <span class="num">3</span><span class="op">)</span>     <span class="cm"># True   Greater than</span>
<span class="nb">print</span><span class="op">(</span><span class="num">5</span> <span class="op">&gt;</span><span class="op">=</span> <span class="num">5</span><span class="op">)</span>    <span class="cm"># True   Greater than or equal</span>
<span class="nb">print</span><span class="op">(</span><span class="num">5</span> <span class="op">&lt;</span> <span class="num">3</span><span class="op">)</span>     <span class="cm"># False  Less than</span>
<span class="nb">print</span><span class="op">(</span><span class="num">5</span> <span class="op">&lt;</span><span class="op">=</span> <span class="num">5</span><span class="op">)</span>    <span class="cm"># True   Less than or equal</span>
</code></pre>
<p><strong>Logical operators</strong> - combine conditions:</p>
<pre><code>age <span class="op">=</span> <span class="num">25</span>
income <span class="op">=</span> <span class="num">50000</span>

<span class="cm"># &#x27;and&#x27; - BOTH must be true</span>
<span class="kw">if</span> age <span class="op">&gt;</span><span class="op">=</span> <span class="num">18</span> <span class="kw">and</span> income <span class="op">&gt;</span><span class="op">=</span> <span class="num">30000</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Eligible for loan</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># This prints</span>

<span class="cm"># &#x27;or&#x27; - AT LEAST ONE must be true</span>
has_degree <span class="op">=</span> <span class="kw">False</span>
has_experience <span class="op">=</span> <span class="kw">True</span>
<span class="kw">if</span> has_degree <span class="kw">or</span> has_experience<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Can apply for job</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># This prints</span>

<span class="cm"># &#x27;not&#x27; - flips True to False and vice versa</span>
is_banned <span class="op">=</span> <span class="kw">False</span>
<span class="kw">if</span> <span class="kw">not</span> is_banned<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Welcome!</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># This prints</span>
</code></pre>
<p><strong>Identity operators</strong> - <code class="inline">is</code> vs <code class="inline">==</code>:</p>
<pre><code><span class="cm"># == checks if VALUES are the same</span>
<span class="cm"># is checks if they&#x27;re the SAME OBJECT in memory</span>

a <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
b <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
c <span class="op">=</span> a

<span class="nb">print</span><span class="op">(</span>a <span class="op">==</span> b<span class="op">)</span>    <span class="cm"># True  - same values</span>
<span class="nb">print</span><span class="op">(</span>a <span class="kw">is</span> b<span class="op">)</span>    <span class="cm"># False - different objects (two separate lists)</span>
<span class="nb">print</span><span class="op">(</span>a <span class="kw">is</span> c<span class="op">)</span>    <span class="cm"># True  - c points to the same list as a</span>

<span class="cm"># RULE: Only use &#x27;is&#x27; for None, True, False</span>
<span class="kw">if</span> result <span class="kw">is</span> <span class="kw">None</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">No result yet</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>Membership operators</strong> - check if something is "in" a collection:</p>
<pre><code>fruits <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">cherry</span><span class="st">&quot;</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span> <span class="kw">in</span> fruits<span class="op">)</span>      <span class="cm"># True</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">grape</span><span class="st">&quot;</span> <span class="kw">not</span> <span class="kw">in</span> fruits<span class="op">)</span>   <span class="cm"># True</span>

message <span class="op">=</span> <span class="st">&quot;</span><span class="st">Hello, World!</span><span class="st">&quot;</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">World</span><span class="st">&quot;</span> <span class="kw">in</span> message<span class="op">)</span>      <span class="cm"># True</span>
</code></pre>
<p><strong>Walrus operator</strong> <code class="inline">:=</code> (Python 3.8+) - assign and use in one expression:</p>
<pre><code><span class="cm"># Without walrus:</span>
data <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">12</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">8</span><span class="op">]</span>
n <span class="op">=</span> <span class="nb">len</span><span class="op">(</span>data<span class="op">)</span>
<span class="kw">if</span> n <span class="op">&gt;</span> <span class="num">3</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">List has </span><span class="st">{</span>n<span class="st">}</span><span class="st"> elements</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># With walrus - more concise:</span>
<span class="kw">if</span> <span class="op">(</span>n <span class="op">:=</span> <span class="nb">len</span><span class="op">(</span>data<span class="op">)</span><span class="op">)</span> <span class="op">&gt;</span> <span class="num">3</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">List has </span><span class="st">{</span>n<span class="st">}</span><span class="st"> elements</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Useful in while loops:</span>
<span class="kw">while</span> <span class="op">(</span>line <span class="op">:=</span> <span class="nb">input</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Enter text (q to quit): </span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span> <span class="op">!=</span> <span class="st">&quot;</span><span class="st">q</span><span class="st">&quot;</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">You typed: </span><span class="st">{</span>line<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="23-strings-in-depth">2.3 Strings In Depth</h3>
<p>Strings are one of the most-used types. Let's cover them thoroughly.</p>
<p><strong>Indexing and slicing:</strong></p>
<pre><code>s <span class="op">=</span> <span class="st">&quot;</span><span class="st">Hello, World!</span><span class="st">&quot;</span>
<span class="cm">#    H e l l o ,   W o r  l  d  !</span>
<span class="cm">#    0 1 2 3 4 5 6 7 8 9 10 11 12    &lt;- positive index</span>
<span class="cm">#  -13      ...           -2 -1      &lt;- negative index</span>

<span class="cm"># Single character</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>       <span class="cm"># &#x27;H&#x27; - first character</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>      <span class="cm"># &#x27;!&#x27; - last character</span>

<span class="cm"># Slicing: s[start:stop]  (start included, stop excluded)</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="num">5</span><span class="op">]</span><span class="op">)</span>     <span class="cm"># &#x27;Hello&#x27;</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">[</span><span class="num">7</span><span class="op">:</span><span class="num">12</span><span class="op">]</span><span class="op">)</span>    <span class="cm"># &#x27;World&#x27;</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">[</span><span class="op">:</span><span class="num">5</span><span class="op">]</span><span class="op">)</span>      <span class="cm"># &#x27;Hello&#x27; (from beginning)</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">[</span><span class="num">7</span><span class="op">:</span><span class="op">]</span><span class="op">)</span>      <span class="cm"># &#x27;World!&#x27; (to end)</span>

<span class="cm"># Step: s[start:stop:step]</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">[</span><span class="op">:</span><span class="op">:</span><span class="num">2</span><span class="op">]</span><span class="op">)</span>     <span class="cm"># &#x27;Hlo ol!&#x27; - every 2nd character</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">[</span><span class="op">:</span><span class="op">:</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>    <span class="cm"># &#x27;!dlroW ,olleH&#x27; - reversed</span>
</code></pre>
<p><strong>Common string methods:</strong></p>
<pre><code>s <span class="op">=</span> <span class="st">&quot;</span><span class="st">  Hello, World!  </span><span class="st">&quot;</span>

<span class="cm"># Cleaning</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">)</span>          <span class="cm"># &quot;Hello, World!&quot; - remove whitespace from both ends</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">.</span>lstrip<span class="op">(</span><span class="op">)</span><span class="op">)</span>         <span class="cm"># &quot;Hello, World!  &quot; - left strip only</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">.</span>rstrip<span class="op">(</span><span class="op">)</span><span class="op">)</span>         <span class="cm"># &quot;  Hello, World!&quot; - right strip only</span>

<span class="cm"># Case</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">.</span>upper<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &quot;HELLO, WORLD!&quot;</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">.</span>lower<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &quot;hello, world!&quot;</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">hello world</span><span class="st">&quot;</span><span class="op">.</span>title<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &quot;Hello World&quot;</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">hello world</span><span class="st">&quot;</span><span class="op">.</span>capitalize<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &quot;Hello world&quot;</span>

<span class="cm"># Searching</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">.</span>find<span class="op">(</span><span class="st">&quot;</span><span class="st">World</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># 7 (index where found)</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">.</span>find<span class="op">(</span><span class="st">&quot;</span><span class="st">Python</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># -1 (not found)</span>
<span class="nb">print</span><span class="op">(</span>s<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">.</span>count<span class="op">(</span><span class="st">&quot;</span><span class="st">l</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>       <span class="cm"># 3</span>

<span class="cm"># Checking</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">hello123</span><span class="st">&quot;</span><span class="op">.</span>isalnum<span class="op">(</span><span class="op">)</span><span class="op">)</span>       <span class="cm"># True - letters and numbers only</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">.</span>isalpha<span class="op">(</span><span class="op">)</span><span class="op">)</span>          <span class="cm"># True - letters only</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">123</span><span class="st">&quot;</span><span class="op">.</span>isdigit<span class="op">(</span><span class="op">)</span><span class="op">)</span>            <span class="cm"># True - digits only</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">.</span>startswith<span class="op">(</span><span class="st">&quot;</span><span class="st">hel</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># True</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">.</span>endswith<span class="op">(</span><span class="st">&quot;</span><span class="st">llo</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># True</span>

<span class="cm"># Splitting and joining</span>
csv_line <span class="op">=</span> <span class="st">&quot;</span><span class="st">Alice,30,NYC</span><span class="st">&quot;</span>
parts <span class="op">=</span> csv_line<span class="op">.</span>split<span class="op">(</span><span class="st">&quot;</span><span class="st">,</span><span class="st">&quot;</span><span class="op">)</span>       <span class="cm"># [&#x27;Alice&#x27;, &#x27;30&#x27;, &#x27;NYC&#x27;]</span>
<span class="nb">print</span><span class="op">(</span>parts<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>                   <span class="cm"># &#x27;Alice&#x27;</span>

words <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Python</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">is</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">great</span><span class="st">&quot;</span><span class="op">]</span>
sentence <span class="op">=</span> <span class="st">&quot;</span><span class="st"> </span><span class="st">&quot;</span><span class="op">.</span>join<span class="op">(</span>words<span class="op">)</span>        <span class="cm"># &quot;Python is great&quot;</span>
path <span class="op">=</span> <span class="st">&quot;</span><span class="st">/</span><span class="st">&quot;</span><span class="op">.</span>join<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">home</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">user</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">docs</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>  <span class="cm"># &quot;home/user/docs&quot;</span>

<span class="cm"># Replacing</span>
text <span class="op">=</span> <span class="st">&quot;</span><span class="st">Hello, World!</span><span class="st">&quot;</span>
new_text <span class="op">=</span> text<span class="op">.</span>replace<span class="op">(</span><span class="st">&quot;</span><span class="st">World</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Python</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># &quot;Hello, Python!&quot;</span>
</code></pre>
<p><strong>f-strings</strong> (Python 3.6+) - the best way to format strings:</p>
<pre><code>name <span class="op">=</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span>
age <span class="op">=</span> <span class="num">30</span>
salary <span class="op">=</span> <span class="num">75000.50</span>

<span class="cm"># Basic interpolation</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Name: </span><span class="st">{</span>name<span class="st">}</span><span class="st">, Age: </span><span class="st">{</span>age<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Expressions inside braces</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Next year: </span><span class="st">{</span>age <span class="op">+</span> <span class="num">1</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Name in caps: </span><span class="st">{</span>name<span class="op">.</span>upper<span class="op">(</span><span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Number formatting</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Salary: $</span><span class="st">{</span>salary<span class="st">:</span><span class="st">,.2f</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>       <span class="cm"># Salary: $75,000.50</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Big number: </span><span class="st">{</span><span class="num">1000000</span><span class="st">:</span><span class="st">,</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>      <span class="cm"># Big number: 1,000,000</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Percentage: </span><span class="st">{</span><span class="num">0.856</span><span class="st">:</span><span class="st">.1%</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>      <span class="cm"># Percentage: 85.6%</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Binary: </span><span class="st">{</span><span class="num">42</span><span class="st">:</span><span class="st">b</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>              <span class="cm"># Binary: 101010</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Hex: </span><span class="st">{</span><span class="num">255</span><span class="st">:</span><span class="st">x</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>               <span class="cm"># Hex: ff</span>

<span class="cm"># Alignment and padding</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="st">&#x27;</span><span class="st">left</span><span class="st">&#x27;</span><span class="st">:</span><span class="st">&lt;20</span><span class="st">}</span><span class="st">|</span><span class="st">&quot;</span><span class="op">)</span>     <span class="cm"># &#x27;left                |&#x27;</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="st">&#x27;</span><span class="st">right</span><span class="st">&#x27;</span><span class="st">:</span><span class="st">&gt;20</span><span class="st">}</span><span class="st">|</span><span class="st">&quot;</span><span class="op">)</span>    <span class="cm"># &#x27;               right|&#x27;</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="st">&#x27;</span><span class="st">center</span><span class="st">&#x27;</span><span class="st">:</span><span class="st">^20</span><span class="st">}</span><span class="st">|</span><span class="st">&quot;</span><span class="op">)</span>   <span class="cm"># &#x27;       center       |&#x27;</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="st">&#x27;</span><span class="st">padded</span><span class="st">&#x27;</span><span class="st">:</span><span class="st">*^20</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>   <span class="cm"># &#x27;*******padded*******&#x27;</span>

<span class="cm"># Multi-line f-strings</span>
message <span class="op">=</span> <span class="op">(</span>
    <span class="st">f</span><span class="st">&quot;</span><span class="st">User Report</span><span class="st">\n</span><span class="st">&quot;</span>
    <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="st">&#x27;</span><span class="st">=</span><span class="st">&#x27;</span><span class="op">*</span><span class="num">30</span><span class="st">}</span><span class="st">\n</span><span class="st">&quot;</span>
    <span class="st">f</span><span class="st">&quot;</span><span class="st">Name:   </span><span class="st">{</span>name<span class="st">}</span><span class="st">\n</span><span class="st">&quot;</span>
    <span class="st">f</span><span class="st">&quot;</span><span class="st">Age:    </span><span class="st">{</span>age<span class="st">}</span><span class="st">\n</span><span class="st">&quot;</span>
    <span class="st">f</span><span class="st">&quot;</span><span class="st">Salary: $</span><span class="st">{</span>salary<span class="st">:</span><span class="st">,.2f</span><span class="st">}</span><span class="st">\n</span><span class="st">&quot;</span>
<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>message<span class="op">)</span>
</code></pre>
<p><strong>IMPORTANT: String concatenation performance:</strong></p>
<pre><code><span class="cm"># BAD - O(n^2) because strings are immutable, each += creates a new string</span>
result <span class="op">=</span> <span class="st">&quot;</span><span class="st">&quot;</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10000</span><span class="op">)</span><span class="op">:</span>
    result <span class="op">+</span><span class="op">=</span> <span class="nb">str</span><span class="op">(</span>i<span class="op">)</span>  <span class="cm"># SLOW for large loops</span>

<span class="cm"># GOOD - O(n) using join</span>
parts <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10000</span><span class="op">)</span><span class="op">:</span>
    parts<span class="op">.</span>append<span class="op">(</span><span class="nb">str</span><span class="op">(</span>i<span class="op">)</span><span class="op">)</span>
result <span class="op">=</span> <span class="st">&quot;</span><span class="st">&quot;</span><span class="op">.</span>join<span class="op">(</span>parts<span class="op">)</span>  <span class="cm"># FAST</span>

<span class="cm"># BEST - use list comprehension + join</span>
result <span class="op">=</span> <span class="st">&quot;</span><span class="st">&quot;</span><span class="op">.</span>join<span class="op">(</span><span class="nb">str</span><span class="op">(</span>i<span class="op">)</span> <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10000</span><span class="op">)</span><span class="op">)</span>
</code></pre>
<h3 id="24-control-flow-ifelifelse">2.4 Control Flow: if/elif/else</h3>
<pre><code><span class="cm"># Basic if/elif/else</span>
score <span class="op">=</span> <span class="num">85</span>

<span class="kw">if</span> score <span class="op">&gt;</span><span class="op">=</span> <span class="num">90</span><span class="op">:</span>
    grade <span class="op">=</span> <span class="st">&quot;</span><span class="st">A</span><span class="st">&quot;</span>
<span class="kw">elif</span> score <span class="op">&gt;</span><span class="op">=</span> <span class="num">80</span><span class="op">:</span>
    grade <span class="op">=</span> <span class="st">&quot;</span><span class="st">B</span><span class="st">&quot;</span>
<span class="kw">elif</span> score <span class="op">&gt;</span><span class="op">=</span> <span class="num">70</span><span class="op">:</span>
    grade <span class="op">=</span> <span class="st">&quot;</span><span class="st">C</span><span class="st">&quot;</span>
<span class="kw">elif</span> score <span class="op">&gt;</span><span class="op">=</span> <span class="num">60</span><span class="op">:</span>
    grade <span class="op">=</span> <span class="st">&quot;</span><span class="st">D</span><span class="st">&quot;</span>
<span class="kw">else</span><span class="op">:</span>
    grade <span class="op">=</span> <span class="st">&quot;</span><span class="st">F</span><span class="st">&quot;</span>

<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Score: </span><span class="st">{</span>score<span class="st">}</span><span class="st">, Grade: </span><span class="st">{</span>grade<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Score: 85, Grade: B</span>
</code></pre>
<p><strong>Ternary expression</strong> - one-line if/else:</p>
<pre><code>age <span class="op">=</span> <span class="num">20</span>
status <span class="op">=</span> <span class="st">&quot;</span><span class="st">adult</span><span class="st">&quot;</span> <span class="kw">if</span> age <span class="op">&gt;</span><span class="op">=</span> <span class="num">18</span> <span class="kw">else</span> <span class="st">&quot;</span><span class="st">minor</span><span class="st">&quot;</span>
<span class="nb">print</span><span class="op">(</span>status<span class="op">)</span>  <span class="cm"># &quot;adult&quot;</span>

<span class="cm"># Useful in f-strings</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">You are </span><span class="st">{</span><span class="st">&#x27;</span><span class="st">old enough</span><span class="st">&#x27;</span> <span class="kw">if</span> age <span class="op">&gt;</span><span class="op">=</span> <span class="num">21</span> <span class="kw">else</span> <span class="st">&#x27;</span><span class="st">too young</span><span class="st">&#x27;</span><span class="st">}</span><span class="st"> to drink</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>Match statement</strong> (Python 3.10+) - like switch/case:</p>
<pre><code>command <span class="op">=</span> <span class="st">&quot;</span><span class="st">start</span><span class="st">&quot;</span>

<span class="kw">match</span> command<span class="op">:</span>
    <span class="kw">case</span> <span class="st">&quot;</span><span class="st">start</span><span class="st">&quot;</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Starting the engine...</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">case</span> <span class="st">&quot;</span><span class="st">stop</span><span class="st">&quot;</span> <span class="op">|</span> <span class="st">&quot;</span><span class="st">quit</span><span class="st">&quot;</span> <span class="op">|</span> <span class="st">&quot;</span><span class="st">exit</span><span class="st">&quot;</span><span class="op">:</span>   <span class="cm"># Multiple values</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Shutting down...</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">case</span> <span class="nb">str</span><span class="op">(</span>s<span class="op">)</span> <span class="kw">if</span> s<span class="op">.</span>startswith<span class="op">(</span><span class="st">&quot;</span><span class="st">go </span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>  <span class="cm"># Guard clause</span>
        destination <span class="op">=</span> s<span class="op">[</span><span class="num">3</span><span class="op">:</span><span class="op">]</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Going to </span><span class="st">{</span>destination<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">case</span> <span class="kw">_</span><span class="op">:</span>                              <span class="cm"># Default (like else)</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Unknown command: </span><span class="st">{</span>command<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>Truthy and Falsy values</strong> - what counts as True/False:</p>
<pre><code><span class="cm"># These are all FALSY (treated as False):</span>
<span class="cm"># None, False, 0, 0.0, &quot;&quot;, [], {}, set(), ()</span>

<span class="cm"># Everything else is TRUTHY (treated as True)</span>

<span class="cm"># This is useful for checking if something is empty:</span>
my_list <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
<span class="kw">if</span> my_list<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">List has items</span><span class="st">&quot;</span><span class="op">)</span>
<span class="kw">else</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">List is empty</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># This prints</span>

my_name <span class="op">=</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span>
<span class="kw">if</span> my_name<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Hello, </span><span class="st">{</span>my_name<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># This prints</span>

<span class="cm"># Common pattern: use &#x27;or&#x27; for defaults</span>
username <span class="op">=</span> <span class="st">&quot;</span><span class="st">&quot;</span>  <span class="cm"># empty string is falsy</span>
display_name <span class="op">=</span> username <span class="kw">or</span> <span class="st">&quot;</span><span class="st">Anonymous</span><span class="st">&quot;</span>
<span class="nb">print</span><span class="op">(</span>display_name<span class="op">)</span>  <span class="cm"># &quot;Anonymous&quot;</span>
</code></pre>
<h3 id="25-loops">2.5 Loops</h3>
<p><strong>for loops:</strong></p>
<pre><code><span class="cm"># Loop through a range of numbers</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">5</span><span class="op">)</span><span class="op">:</span>        <span class="cm"># 0, 1, 2, 3, 4</span>
    <span class="nb">print</span><span class="op">(</span>i<span class="op">)</span>

<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="num">10</span><span class="op">)</span><span class="op">:</span>    <span class="cm"># 2, 3, 4, 5, 6, 7, 8, 9</span>
    <span class="nb">print</span><span class="op">(</span>i<span class="op">)</span>

<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">20</span><span class="op">,</span> <span class="num">3</span><span class="op">)</span><span class="op">:</span> <span class="cm"># 0, 3, 6, 9, 12, 15, 18</span>
    <span class="nb">print</span><span class="op">(</span>i<span class="op">)</span>

<span class="cm"># Loop through a list</span>
fruits <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">cherry</span><span class="st">&quot;</span><span class="op">]</span>
<span class="kw">for</span> fruit <span class="kw">in</span> fruits<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">I like </span><span class="st">{</span>fruit<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Loop with index using enumerate</span>
<span class="kw">for</span> index<span class="op">,</span> fruit <span class="kw">in</span> <span class="nb">enumerate</span><span class="op">(</span>fruits<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>index<span class="st">}</span><span class="st">: </span><span class="st">{</span>fruit<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="cm"># Output:</span>
<span class="cm"># 0: apple</span>
<span class="cm"># 1: banana</span>
<span class="cm"># 2: cherry</span>

<span class="cm"># Start enumerate at 1</span>
<span class="kw">for</span> num<span class="op">,</span> fruit <span class="kw">in</span> <span class="nb">enumerate</span><span class="op">(</span>fruits<span class="op">,</span> start<span class="op">=</span><span class="num">1</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>num<span class="st">}</span><span class="st">. </span><span class="st">{</span>fruit<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="cm"># Output:</span>
<span class="cm"># 1. apple</span>
<span class="cm"># 2. banana</span>
<span class="cm"># 3. cherry</span>

<span class="cm"># Loop through two lists simultaneously with zip</span>
names <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">]</span>
scores <span class="op">=</span> <span class="op">[</span><span class="num">95</span><span class="op">,</span> <span class="num">87</span><span class="op">,</span> <span class="num">92</span><span class="op">]</span>
<span class="kw">for</span> name<span class="op">,</span> score <span class="kw">in</span> <span class="nb">zip</span><span class="op">(</span>names<span class="op">,</span> scores<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>name<span class="st">}</span><span class="st">: </span><span class="st">{</span>score<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Loop through dictionary</span>
person <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">30</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">}</span>
<span class="kw">for</span> key<span class="op">,</span> value <span class="kw">in</span> person<span class="op">.</span>items<span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>key<span class="st">}</span><span class="st">: </span><span class="st">{</span>value<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>while loops:</strong></p>
<pre><code><span class="cm"># Basic while loop</span>
count <span class="op">=</span> <span class="num">0</span>
<span class="kw">while</span> count <span class="op">&lt;</span> <span class="num">5</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Count is </span><span class="st">{</span>count<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    count <span class="op">+</span><span class="op">=</span> <span class="num">1</span>

<span class="cm"># While with user input</span>
<span class="kw">while</span> <span class="kw">True</span><span class="op">:</span>
    answer <span class="op">=</span> <span class="nb">input</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Type </span><span class="st">&#x27;</span><span class="st">quit</span><span class="st">&#x27;</span><span class="st"> to exit: </span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">if</span> answer<span class="op">.</span>lower<span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="st">&#x27;</span><span class="st">quit</span><span class="st">&#x27;</span><span class="op">:</span>
        <span class="kw">break</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">You said: </span><span class="st">{</span>answer<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>break, continue, and for/else:</strong></p>
<pre><code><span class="cm"># break - exit the loop immediately</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> i <span class="op">==</span> <span class="num">5</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Found 5, stopping!</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">break</span>
    <span class="nb">print</span><span class="op">(</span>i<span class="op">)</span>
<span class="cm"># Output: 0, 1, 2, 3, 4, Found 5, stopping!</span>

<span class="cm"># continue - skip the rest of this iteration</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> i <span class="op">%</span> <span class="num">2</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span>
        <span class="kw">continue</span>  <span class="cm"># Skip even numbers</span>
    <span class="nb">print</span><span class="op">(</span>i<span class="op">)</span>
<span class="cm"># Output: 1, 3, 5, 7, 9</span>

<span class="cm"># for/else - the else block runs if the loop completed WITHOUT break</span>
<span class="kw">def</span> <span class="fn">find_prime</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Check if n is prime.&quot;&quot;&quot;</span>
    <span class="kw">if</span> n <span class="op">&lt;</span> <span class="num">2</span><span class="op">:</span>
        <span class="kw">return</span> <span class="kw">False</span>
    <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="nb">int</span><span class="op">(</span>n<span class="op">*</span><span class="op">*</span><span class="num">0.5</span><span class="op">)</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> n <span class="op">%</span> i <span class="op">==</span> <span class="num">0</span><span class="op">:</span>
            <span class="kw">return</span> <span class="kw">False</span>  <span class="cm"># Not prime, divisible by i</span>
    <span class="kw">return</span> <span class="kw">True</span>  <span class="cm"># No divisor found, it&#x27;s prime</span>

<span class="kw">for</span> n <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="num">20</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> find_prime<span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>n<span class="st">}</span><span class="st"> is prime</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="26-list-comprehensions">2.6 List Comprehensions</h3>
<p>List comprehensions are a concise way to create lists. They're very Pythonic and you'll see them everywhere.</p>
<pre><code><span class="cm"># Instead of this:</span>
squares <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
<span class="kw">for</span> x <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">:</span>
    squares<span class="op">.</span>append<span class="op">(</span>x <span class="op">*</span><span class="op">*</span> <span class="num">2</span><span class="op">)</span>

<span class="cm"># Write this:</span>
squares <span class="op">=</span> <span class="op">[</span>x<span class="op">*</span><span class="op">*</span><span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">]</span>
<span class="cm"># [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span>

<span class="cm"># With a condition (filter):</span>
<span class="cm"># Only even numbers squared</span>
even_squares <span class="op">=</span> <span class="op">[</span>x<span class="op">*</span><span class="op">*</span><span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span> <span class="kw">if</span> x <span class="op">%</span> <span class="num">2</span> <span class="op">==</span> <span class="num">0</span><span class="op">]</span>
<span class="cm"># [0, 4, 16, 36, 64]</span>

<span class="cm"># With if/else (transform):</span>
labels <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">even</span><span class="st">&quot;</span> <span class="kw">if</span> x <span class="op">%</span> <span class="num">2</span> <span class="op">==</span> <span class="num">0</span> <span class="kw">else</span> <span class="st">&quot;</span><span class="st">odd</span><span class="st">&quot;</span> <span class="kw">for</span> x <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">5</span><span class="op">)</span><span class="op">]</span>
<span class="cm"># [&#x27;even&#x27;, &#x27;odd&#x27;, &#x27;even&#x27;, &#x27;odd&#x27;, &#x27;even&#x27;]</span>

<span class="cm"># Nested: flatten a 2D list</span>
matrix <span class="op">=</span> <span class="op">[</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">7</span><span class="op">,</span> <span class="num">8</span><span class="op">,</span> <span class="num">9</span><span class="op">]</span><span class="op">]</span>
flat <span class="op">=</span> <span class="op">[</span>num <span class="kw">for</span> row <span class="kw">in</span> matrix <span class="kw">for</span> num <span class="kw">in</span> row<span class="op">]</span>
<span class="cm"># [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
<span class="cm"># Read as: &quot;for each row, for each num in that row, give me num&quot;</span>

<span class="cm"># Dict comprehension</span>
words <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">world</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">python</span><span class="st">&quot;</span><span class="op">]</span>
word_lengths <span class="op">=</span> <span class="op">{</span>word<span class="op">:</span> <span class="nb">len</span><span class="op">(</span>word<span class="op">)</span> <span class="kw">for</span> word <span class="kw">in</span> words<span class="op">}</span>
<span class="cm"># {&#x27;hello&#x27;: 5, &#x27;world&#x27;: 5, &#x27;python&#x27;: 6}</span>

<span class="cm"># Set comprehension (unique values)</span>
numbers <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">]</span>
unique_doubles <span class="op">=</span> <span class="op">{</span>x <span class="op">*</span> <span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> numbers<span class="op">}</span>
<span class="cm"># {2, 4, 6, 8}</span>

<span class="cm"># Generator expression - like list comp but LAZY (memory efficient)</span>
<span class="cm"># Use () instead of []</span>
total <span class="op">=</span> <span class="nb">sum</span><span class="op">(</span>x<span class="op">*</span><span class="op">*</span><span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">1000000</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># Doesn&#x27;t create a list in memory</span>
</code></pre>
<h3 id="exercise-21-find-the-mode">Exercise 2.1: Find the Mode</h3>
<p>Given a string of space-separated numbers, find the most frequent value:</p>
<pre><code>data <span class="op">=</span> <span class="st">&#x27;</span><span class="st">13 13 13 13 14 16 18 21</span><span class="st">&#x27;</span>
<span class="cm"># Your code here...</span>
<span class="cm"># Expected output: Mode: 13</span>

<span class="cm"># Hint: split the string, count with a dictionary or collections.Counter</span>
</code></pre>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">from</span> collections <span class="kw">import</span> Counter

data <span class="op">=</span> <span class="st">&#x27;</span><span class="st">13 13 13 13 14 16 18 21</span><span class="st">&#x27;</span>
numbers <span class="op">=</span> data<span class="op">.</span>split<span class="op">(</span><span class="op">)</span>  <span class="cm"># Split into list of strings</span>
counts <span class="op">=</span> Counter<span class="op">(</span>numbers<span class="op">)</span>
mode <span class="op">=</span> counts<span class="op">.</span>most_common<span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Mode: </span><span class="st">{</span>mode<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Mode: 13</span>
</code></pre>
</details>
<h3 id="exercise-22-fizzbuzz">Exercise 2.2: FizzBuzz</h3>
<p>Print numbers 1-30. For multiples of 3 print "Fizz", multiples of 5 print "Buzz", multiples of both print "FizzBuzz".</p>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">31</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> i <span class="op">%</span> <span class="num">15</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">FizzBuzz</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">elif</span> i <span class="op">%</span> <span class="num">3</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Fizz</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">elif</span> i <span class="op">%</span> <span class="num">5</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Buzz</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">else</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span>i<span class="op">)</span>
</code></pre>
</details>
<h3 id="exercise-23-string-processing">Exercise 2.3: String Processing</h3>
<p>Given a sentence, count the number of words, find the longest word, and reverse the word order.</p>
<details>
<summary>Solution</summary>

<pre><code>sentence <span class="op">=</span> <span class="st">&quot;</span><span class="st">the quick brown fox jumps over the lazy dog</span><span class="st">&quot;</span>
words <span class="op">=</span> sentence<span class="op">.</span>split<span class="op">(</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Word count: </span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>words<span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Longest word: </span><span class="st">{</span><span class="nb">max</span><span class="op">(</span>words<span class="op">,</span> key<span class="op">=</span><span class="nb">len</span><span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Reversed: </span><span class="st">{</span><span class="st">&#x27;</span><span class="st"> </span><span class="st">&#x27;</span><span class="op">.</span>join<span class="op">(</span><span class="nb">reversed</span><span class="op">(</span>words<span class="op">)</span><span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-3-data-structures"><h2>Chapter 3: Data Structures</h2><div class="line"></div><span class="badge" style="background:var(--green-dim);color:var(--green)">Chapter 3</span></div>
<h3 id="31-lists">3.1 Lists</h3>
<p>Lists are the most commonly used data structure. They're ordered, changeable, and allow duplicates.</p>
<pre><code><span class="cm"># Creating lists</span>
empty <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
numbers <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span>
mixed <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">True</span><span class="op">,</span> <span class="num">3.14</span><span class="op">,</span> <span class="kw">None</span><span class="op">]</span>  <span class="cm"># Can mix types</span>
nested <span class="op">=</span> <span class="op">[</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span><span class="op">]</span>       <span class="cm"># List of lists</span>

<span class="cm"># Accessing elements</span>
fruits <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">cherry</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">elderberry</span><span class="st">&quot;</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span>fruits<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>      <span class="cm"># &quot;apple&quot; (first item)</span>
<span class="nb">print</span><span class="op">(</span>fruits<span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>     <span class="cm"># &quot;elderberry&quot; (last item)</span>
<span class="nb">print</span><span class="op">(</span>fruits<span class="op">[</span><span class="num">1</span><span class="op">:</span><span class="num">3</span><span class="op">]</span><span class="op">)</span>    <span class="cm"># [&quot;banana&quot;, &quot;cherry&quot;] (slice: index 1 to 2)</span>
<span class="nb">print</span><span class="op">(</span>fruits<span class="op">[</span><span class="op">:</span><span class="num">3</span><span class="op">]</span><span class="op">)</span>     <span class="cm"># [&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;] (first 3)</span>
<span class="nb">print</span><span class="op">(</span>fruits<span class="op">[</span><span class="num">2</span><span class="op">:</span><span class="op">]</span><span class="op">)</span>     <span class="cm"># [&quot;cherry&quot;, &quot;date&quot;, &quot;elderberry&quot;] (from index 2 onwards)</span>
<span class="nb">print</span><span class="op">(</span>fruits<span class="op">[</span><span class="op">:</span><span class="op">:</span><span class="num">2</span><span class="op">]</span><span class="op">)</span>    <span class="cm"># [&quot;apple&quot;, &quot;cherry&quot;, &quot;elderberry&quot;] (every 2nd)</span>
<span class="nb">print</span><span class="op">(</span>fruits<span class="op">[</span><span class="op">:</span><span class="op">:</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>   <span class="cm"># reversed list</span>
</code></pre>
<p><strong>Modifying lists:</strong></p>
<pre><code>fruits <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">cherry</span><span class="st">&quot;</span><span class="op">]</span>

<span class="cm"># Add items</span>
fruits<span class="op">.</span>append<span class="op">(</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">)</span>         <span class="cm"># Add to end: [&quot;apple&quot;,&quot;banana&quot;,&quot;cherry&quot;,&quot;date&quot;]</span>
fruits<span class="op">.</span>insert<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">blueberry</span><span class="st">&quot;</span><span class="op">)</span> <span class="cm"># Insert at index 1: [&quot;apple&quot;,&quot;blueberry&quot;,&quot;banana&quot;,&quot;cherry&quot;,&quot;date&quot;]</span>
fruits<span class="op">.</span>extend<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">fig</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">grape</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>  <span class="cm"># Add multiple to end</span>

<span class="cm"># Remove items</span>
fruits<span class="op">.</span>remove<span class="op">(</span><span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">)</span>       <span class="cm"># Remove first occurrence of &quot;banana&quot;</span>
last <span class="op">=</span> fruits<span class="op">.</span>pop<span class="op">(</span><span class="op">)</span>           <span class="cm"># Remove and return last item</span>
second <span class="op">=</span> fruits<span class="op">.</span>pop<span class="op">(</span><span class="num">1</span><span class="op">)</span>        <span class="cm"># Remove and return item at index 1</span>
<span class="kw">del</span> fruits<span class="op">[</span><span class="num">0</span><span class="op">]</span>                 <span class="cm"># Delete item at index 0</span>

<span class="cm"># Modify items</span>
fruits<span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;</span><span class="st">avocado</span><span class="st">&quot;</span>         <span class="cm"># Replace first item</span>

<span class="cm"># Other operations</span>
numbers <span class="op">=</span> <span class="op">[</span><span class="num">3</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">9</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span>
numbers<span class="op">.</span>sort<span class="op">(</span><span class="op">)</span>                 <span class="cm"># Sort in place: [1, 1, 2, 3, 4, 5, 6, 9]</span>
numbers<span class="op">.</span>sort<span class="op">(</span>reverse<span class="op">=</span><span class="kw">True</span><span class="op">)</span>     <span class="cm"># Sort descending: [9, 6, 5, 4, 3, 2, 1, 1]</span>
numbers<span class="op">.</span>reverse<span class="op">(</span><span class="op">)</span>              <span class="cm"># Reverse in place</span>
<span class="nb">print</span><span class="op">(</span>numbers<span class="op">.</span>count<span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">)</span>        <span class="cm"># 2 (how many times 1 appears)</span>
<span class="nb">print</span><span class="op">(</span>numbers<span class="op">.</span>index<span class="op">(</span><span class="num">5</span><span class="op">)</span><span class="op">)</span>        <span class="cm"># Index of first 5</span>

<span class="cm"># IMPORTANT: sort() vs sorted()</span>
original <span class="op">=</span> <span class="op">[</span><span class="num">3</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span>
new_sorted <span class="op">=</span> <span class="nb">sorted</span><span class="op">(</span>original<span class="op">)</span>  <span class="cm"># Returns NEW sorted list, original unchanged</span>
original<span class="op">.</span>sort<span class="op">(</span><span class="op">)</span>                <span class="cm"># Sorts IN PLACE, returns None</span>
</code></pre>
<p><strong>Sorting with custom keys:</strong></p>
<pre><code><span class="cm"># Sort strings by length</span>
words <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">python</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">hi</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">jupyter</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">code</span><span class="st">&quot;</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">sorted</span><span class="op">(</span>words<span class="op">,</span> key<span class="op">=</span><span class="nb">len</span><span class="op">)</span><span class="op">)</span>
<span class="cm"># [&#x27;hi&#x27;, &#x27;code&#x27;, &#x27;python&#x27;, &#x27;jupyter&#x27;]</span>

<span class="cm"># Sort list of tuples by second element</span>
students <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">85</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">92</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">78</span><span class="op">)</span><span class="op">]</span>
students<span class="op">.</span>sort<span class="op">(</span>key<span class="op">=</span><span class="kw">lambda</span> s<span class="op">:</span> s<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> reverse<span class="op">=</span><span class="kw">True</span><span class="op">)</span>
<span class="cm"># [(&#x27;Bob&#x27;, 92), (&#x27;Alice&#x27;, 85), (&#x27;Charlie&#x27;, 78)]</span>

<span class="cm"># Sort dicts by a value</span>
people <span class="op">=</span> <span class="op">[</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">30</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">25</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">35</span><span class="op">}</span><span class="op">,</span>
<span class="op">]</span>
by_age <span class="op">=</span> <span class="nb">sorted</span><span class="op">(</span>people<span class="op">,</span> key<span class="op">=</span><span class="kw">lambda</span> p<span class="op">:</span> p<span class="op">[</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
</code></pre>
<p><strong>Useful built-in functions with lists:</strong></p>
<pre><code>nums <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">,</span> <span class="num">7</span><span class="op">,</span> <span class="num">8</span><span class="op">,</span> <span class="num">9</span><span class="op">,</span> <span class="num">10</span><span class="op">]</span>

<span class="nb">print</span><span class="op">(</span><span class="nb">len</span><span class="op">(</span>nums<span class="op">)</span><span class="op">)</span>       <span class="cm"># 10 - number of items</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">sum</span><span class="op">(</span>nums<span class="op">)</span><span class="op">)</span>       <span class="cm"># 55 - sum of all items</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">min</span><span class="op">(</span>nums<span class="op">)</span><span class="op">)</span>       <span class="cm"># 1  - smallest</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">max</span><span class="op">(</span>nums<span class="op">)</span><span class="op">)</span>       <span class="cm"># 10 - largest</span>

<span class="cm"># any() and all() - super useful with conditions</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">any</span><span class="op">(</span>x <span class="op">&gt;</span> <span class="num">8</span> <span class="kw">for</span> x <span class="kw">in</span> nums<span class="op">)</span><span class="op">)</span>   <span class="cm"># True - at least one is &gt; 8</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">all</span><span class="op">(</span>x <span class="op">&gt;</span> <span class="num">0</span> <span class="kw">for</span> x <span class="kw">in</span> nums<span class="op">)</span><span class="op">)</span>   <span class="cm"># True - ALL are &gt; 0</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">all</span><span class="op">(</span>x <span class="op">&gt;</span> <span class="num">5</span> <span class="kw">for</span> x <span class="kw">in</span> nums<span class="op">)</span><span class="op">)</span>   <span class="cm"># False - not all are &gt; 5</span>
</code></pre>
<h3 id="32-tuples">3.2 Tuples</h3>
<p>Tuples are like lists but <strong>immutable</strong> (can't be changed after creation). Use them for data that shouldn't change.</p>
<pre><code><span class="cm"># Creating tuples</span>
point <span class="op">=</span> <span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span>
rgb <span class="op">=</span> <span class="op">(</span><span class="num">255</span><span class="op">,</span> <span class="num">128</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span>
single <span class="op">=</span> <span class="op">(</span><span class="num">42</span><span class="op">,</span><span class="op">)</span>     <span class="cm"># Note: comma is needed for single-element tuple!</span>
empty <span class="op">=</span> <span class="op">(</span><span class="op">)</span>

<span class="cm"># NOT a tuple:</span>
not_a_tuple <span class="op">=</span> <span class="op">(</span><span class="num">42</span><span class="op">)</span>  <span class="cm"># This is just the integer 42 with parentheses</span>

<span class="cm"># Accessing (same as lists)</span>
<span class="nb">print</span><span class="op">(</span>point<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>    <span class="cm"># 3</span>
<span class="nb">print</span><span class="op">(</span>point<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>    <span class="cm"># 4</span>

<span class="cm"># You CANNOT modify tuples:</span>
<span class="cm"># point[0] = 5     # TypeError: &#x27;tuple&#x27; object does not support item assignment</span>
</code></pre>
<p><strong>Tuple unpacking</strong> - very useful!</p>
<pre><code><span class="cm"># Basic unpacking</span>
point <span class="op">=</span> <span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span>
x<span class="op">,</span> y <span class="op">=</span> point
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">x=</span><span class="st">{</span>x<span class="st">}</span><span class="st">, y=</span><span class="st">{</span>y<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># x=3, y=4</span>

<span class="cm"># Swap variables (Pythonic way)</span>
a<span class="op">,</span> b <span class="op">=</span> <span class="num">1</span><span class="op">,</span> <span class="num">2</span>
a<span class="op">,</span> b <span class="op">=</span> b<span class="op">,</span> a       <span class="cm"># Now a=2, b=1</span>

<span class="cm"># Unpack in a loop</span>
students <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">85</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">92</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">78</span><span class="op">)</span><span class="op">]</span>
<span class="kw">for</span> name<span class="op">,</span> score <span class="kw">in</span> students<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>name<span class="st">}</span><span class="st">: </span><span class="st">{</span>score<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Star unpacking</span>
first<span class="op">,</span> <span class="op">*</span>rest <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span>first<span class="op">)</span>   <span class="cm"># 1</span>
<span class="nb">print</span><span class="op">(</span>rest<span class="op">)</span>    <span class="cm"># [2, 3, 4, 5]</span>

<span class="op">*</span>beginning<span class="op">,</span> last <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span>beginning<span class="op">)</span>  <span class="cm"># [1, 2, 3, 4]</span>
<span class="nb">print</span><span class="op">(</span>last<span class="op">)</span>       <span class="cm"># 5</span>
</code></pre>
<p><strong>Named tuples</strong> - tuples with field names:</p>
<pre><code><span class="kw">from</span> collections <span class="kw">import</span> namedtuple

<span class="cm"># Define a named tuple type</span>
Point <span class="op">=</span> namedtuple<span class="op">(</span><span class="st">&#x27;</span><span class="st">Point</span><span class="st">&#x27;</span><span class="op">,</span> <span class="op">[</span><span class="st">&#x27;</span><span class="st">x</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">y</span><span class="st">&#x27;</span><span class="op">]</span><span class="op">)</span>
Color <span class="op">=</span> namedtuple<span class="op">(</span><span class="st">&#x27;</span><span class="st">Color</span><span class="st">&#x27;</span><span class="op">,</span> <span class="op">[</span><span class="st">&#x27;</span><span class="st">red</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">green</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">blue</span><span class="st">&#x27;</span><span class="op">]</span><span class="op">)</span>

p <span class="op">=</span> Point<span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">.</span>x<span class="op">)</span>     <span class="cm"># 3 (access by name, much more readable)</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>    <span class="cm"># 3 (also works by index)</span>

c <span class="op">=</span> Color<span class="op">(</span><span class="num">255</span><span class="op">,</span> <span class="num">128</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Red: </span><span class="st">{</span>c<span class="op">.</span>red<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Why tuples?</span>
<span class="cm"># 1. Immutable = safe to use as dict keys or set elements</span>
locations <span class="op">=</span> <span class="op">{</span><span class="op">(</span><span class="num">40.7</span><span class="op">,</span> <span class="op">-</span><span class="num">74.0</span><span class="op">)</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">New York</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="num">34.0</span><span class="op">,</span> <span class="op">-</span><span class="num">118.2</span><span class="op">)</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Los Angeles</span><span class="st">&quot;</span><span class="op">}</span>

<span class="cm"># 2. Slightly faster and less memory than lists</span>
<span class="cm"># 3. Signals intent: &quot;this data is fixed&quot;</span>
</code></pre>
<h3 id="33-sets">3.3 Sets</h3>
<p>Sets are <strong>unordered</strong> collections of <strong>unique</strong> elements. They're great for removing duplicates and membership testing (very fast O(1) lookup).</p>
<pre><code><span class="cm"># Creating sets</span>
fruits <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">cherry</span><span class="st">&quot;</span><span class="op">}</span>
numbers <span class="op">=</span> <span class="op">{</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">3</span><span class="op">}</span>   <span class="cm"># Duplicates removed: {1, 2, 3}</span>
empty_set <span class="op">=</span> <span class="nb">set</span><span class="op">(</span><span class="op">)</span>                <span class="cm"># NOT {} - that creates an empty dict!</span>

<span class="cm"># Add and remove</span>
fruits<span class="op">.</span>add<span class="op">(</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">)</span>
fruits<span class="op">.</span>discard<span class="op">(</span><span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">)</span>   <span class="cm"># Remove (no error if missing)</span>
<span class="cm"># fruits.remove(&quot;banana&quot;)  # Remove (KeyError if missing!)</span>

<span class="cm"># Membership testing (very fast!)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span> <span class="kw">in</span> fruits<span class="op">)</span>    <span class="cm"># True</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">grape</span><span class="st">&quot;</span> <span class="kw">in</span> fruits<span class="op">)</span>    <span class="cm"># False</span>
</code></pre>
<p><strong>Set operations</strong> - mathematical set operations:</p>
<pre><code>a <span class="op">=</span> <span class="op">{</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">}</span>
b <span class="op">=</span> <span class="op">{</span><span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">,</span> <span class="num">7</span><span class="op">,</span> <span class="num">8</span><span class="op">}</span>

<span class="cm"># Union - items in EITHER set</span>
<span class="nb">print</span><span class="op">(</span>a <span class="op">|</span> b<span class="op">)</span>        <span class="cm"># {1, 2, 3, 4, 5, 6, 7, 8}</span>
<span class="nb">print</span><span class="op">(</span>a<span class="op">.</span>union<span class="op">(</span>b<span class="op">)</span><span class="op">)</span>   <span class="cm"># Same thing</span>

<span class="cm"># Intersection - items in BOTH sets</span>
<span class="nb">print</span><span class="op">(</span>a <span class="op">&amp;</span> b<span class="op">)</span>             <span class="cm"># {4, 5}</span>
<span class="nb">print</span><span class="op">(</span>a<span class="op">.</span>intersection<span class="op">(</span>b<span class="op">)</span><span class="op">)</span> <span class="cm"># Same thing</span>

<span class="cm"># Difference - items in a but NOT in b</span>
<span class="nb">print</span><span class="op">(</span>a <span class="op">-</span> b<span class="op">)</span>              <span class="cm"># {1, 2, 3}</span>
<span class="nb">print</span><span class="op">(</span>a<span class="op">.</span>difference<span class="op">(</span>b<span class="op">)</span><span class="op">)</span>    <span class="cm"># Same thing</span>

<span class="cm"># Symmetric difference - items in EITHER but NOT BOTH</span>
<span class="nb">print</span><span class="op">(</span>a <span class="op">^</span> b<span class="op">)</span>                       <span class="cm"># {1, 2, 3, 6, 7, 8}</span>
<span class="nb">print</span><span class="op">(</span>a<span class="op">.</span>symmetric_difference<span class="op">(</span>b<span class="op">)</span><span class="op">)</span>   <span class="cm"># Same thing</span>

<span class="cm"># Subset / superset</span>
small <span class="op">=</span> <span class="op">{</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">}</span>
<span class="nb">print</span><span class="op">(</span>small <span class="op">&lt;</span><span class="op">=</span> a<span class="op">)</span>    <span class="cm"># True - small is a subset of a</span>
<span class="nb">print</span><span class="op">(</span>a <span class="op">&gt;</span><span class="op">=</span> small<span class="op">)</span>    <span class="cm"># True - a is a superset of small</span>
</code></pre>
<p><strong>Common use: removing duplicates while preserving order:</strong></p>
<pre><code><span class="cm"># Method 1: Using dict.fromkeys() (Python 3.7+ preserves insertion order)</span>
items <span class="op">=</span> <span class="op">[</span><span class="num">3</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">9</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">6</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
unique <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">dict</span><span class="op">.</span>fromkeys<span class="op">(</span>items<span class="op">)</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>unique<span class="op">)</span>  <span class="cm"># [3, 1, 4, 5, 9, 2, 6]</span>

<span class="cm"># Method 2: Manual with set</span>
seen <span class="op">=</span> <span class="nb">set</span><span class="op">(</span><span class="op">)</span>
unique <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
<span class="kw">for</span> item <span class="kw">in</span> items<span class="op">:</span>
    <span class="kw">if</span> item <span class="kw">not</span> <span class="kw">in</span> seen<span class="op">:</span>
        seen<span class="op">.</span>add<span class="op">(</span>item<span class="op">)</span>
        unique<span class="op">.</span>append<span class="op">(</span>item<span class="op">)</span>

<span class="cm"># Method 3: One-liner (clever but less readable)</span>
seen <span class="op">=</span> <span class="nb">set</span><span class="op">(</span><span class="op">)</span>
unique <span class="op">=</span> <span class="op">[</span>x <span class="kw">for</span> x <span class="kw">in</span> items <span class="kw">if</span> x <span class="kw">not</span> <span class="kw">in</span> seen <span class="kw">and</span> <span class="kw">not</span> seen<span class="op">.</span>add<span class="op">(</span>x<span class="op">)</span><span class="op">]</span>
</code></pre>
<h3 id="34-dictionaries">3.4 Dictionaries</h3>
<p>Dictionaries store <strong>key-value pairs</strong>. They're one of Python's most powerful and frequently used data structures.</p>
<pre><code><span class="cm"># Creating dictionaries</span>
person <span class="op">=</span> <span class="op">{</span>
    <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">30</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">hobbies</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">reading</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">coding</span><span class="st">&quot;</span><span class="op">]</span>
<span class="op">}</span>

<span class="cm"># Accessing values</span>
<span class="nb">print</span><span class="op">(</span>person<span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>               <span class="cm"># &quot;Alice&quot;</span>
<span class="cm"># print(person[&quot;phone&quot;])            # KeyError! Key doesn&#x27;t exist</span>

<span class="cm"># Safe access with .get()</span>
<span class="nb">print</span><span class="op">(</span>person<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">phone</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>          <span class="cm"># None (no error)</span>
<span class="nb">print</span><span class="op">(</span>person<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">phone</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">N/A</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># &quot;N/A&quot; (custom default)</span>

<span class="cm"># Adding / updating</span>
person<span class="op">[</span><span class="st">&quot;</span><span class="st">email</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;</span><span class="st">alice@example.com</span><span class="st">&quot;</span>   <span class="cm"># Add new key</span>
person<span class="op">[</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="num">31</span>                      <span class="cm"># Update existing key</span>

<span class="cm"># Removing</span>
<span class="kw">del</span> person<span class="op">[</span><span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">]</span>                 <span class="cm"># Delete (KeyError if missing)</span>
age <span class="op">=</span> person<span class="op">.</span>pop<span class="op">(</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">)</span>           <span class="cm"># Remove and return value</span>
last <span class="op">=</span> person<span class="op">.</span>popitem<span class="op">(</span><span class="op">)</span>           <span class="cm"># Remove and return last key-value pair</span>

<span class="cm"># Check if key exists</span>
<span class="kw">if</span> <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span> <span class="kw">in</span> person<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Name is </span><span class="st">{</span>person<span class="op">[</span><span class="st">&#x27;</span><span class="st">name</span><span class="st">&#x27;</span><span class="op">]</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>Iterating over dictionaries:</strong></p>
<pre><code>person <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">30</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">}</span>

<span class="cm"># Loop through keys</span>
<span class="kw">for</span> key <span class="kw">in</span> person<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>key<span class="op">)</span>  <span class="cm"># name, age, city</span>

<span class="cm"># Loop through values</span>
<span class="kw">for</span> value <span class="kw">in</span> person<span class="op">.</span>values<span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>value<span class="op">)</span>  <span class="cm"># Alice, 30, NYC</span>

<span class="cm"># Loop through key-value pairs (most common)</span>
<span class="kw">for</span> key<span class="op">,</span> value <span class="kw">in</span> person<span class="op">.</span>items<span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>key<span class="st">}</span><span class="st">: </span><span class="st">{</span>value<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>Useful dictionary patterns:</strong></p>
<pre><code><span class="cm"># Word frequency counter</span>
text <span class="op">=</span> <span class="st">&quot;</span><span class="st">the cat sat on the mat the cat</span><span class="st">&quot;</span>
word_count <span class="op">=</span> <span class="op">{</span><span class="op">}</span>
<span class="kw">for</span> word <span class="kw">in</span> text<span class="op">.</span>split<span class="op">(</span><span class="op">)</span><span class="op">:</span>
    word_count<span class="op">[</span>word<span class="op">]</span> <span class="op">=</span> word_count<span class="op">.</span>get<span class="op">(</span>word<span class="op">,</span> <span class="num">0</span><span class="op">)</span> <span class="op">+</span> <span class="num">1</span>
<span class="nb">print</span><span class="op">(</span>word_count<span class="op">)</span>
<span class="cm"># {&#x27;the&#x27;: 3, &#x27;cat&#x27;: 2, &#x27;sat&#x27;: 1, &#x27;on&#x27;: 1, &#x27;mat&#x27;: 1}</span>

<span class="cm"># Merge dictionaries</span>
defaults <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">color</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">red</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">size</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">medium</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">shape</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">circle</span><span class="st">&quot;</span><span class="op">}</span>
custom <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">color</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">blue</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">weight</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">5</span><span class="op">}</span>

<span class="cm"># Method 1: update() (modifies in place)</span>
config <span class="op">=</span> defaults<span class="op">.</span>copy<span class="op">(</span><span class="op">)</span>   <span class="cm"># Don&#x27;t modify original!</span>
config<span class="op">.</span>update<span class="op">(</span>custom<span class="op">)</span>

<span class="cm"># Method 2: Merge operator (Python 3.9+)</span>
config <span class="op">=</span> defaults <span class="op">|</span> custom
<span class="cm"># {&#x27;color&#x27;: &#x27;blue&#x27;, &#x27;size&#x27;: &#x27;medium&#x27;, &#x27;shape&#x27;: &#x27;circle&#x27;, &#x27;weight&#x27;: 5}</span>

<span class="cm"># Method 3: Unpacking (Python 3.5+)</span>
config <span class="op">=</span> <span class="op">{</span><span class="op">*</span><span class="op">*</span>defaults<span class="op">,</span> <span class="op">*</span><span class="op">*</span>custom<span class="op">}</span>
</code></pre>
<p><strong>defaultdict</strong> - auto-creates default values for missing keys:</p>
<pre><code><span class="kw">from</span> collections <span class="kw">import</span> defaultdict

<span class="cm"># Without defaultdict - tedious</span>
groups <span class="op">=</span> <span class="op">{</span><span class="op">}</span>
students <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Math</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Science</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Math</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Science</span><span class="st">&quot;</span><span class="op">)</span><span class="op">]</span>
<span class="kw">for</span> name<span class="op">,</span> subject <span class="kw">in</span> students<span class="op">:</span>
    <span class="kw">if</span> subject <span class="kw">not</span> <span class="kw">in</span> groups<span class="op">:</span>
        groups<span class="op">[</span>subject<span class="op">]</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
    groups<span class="op">[</span>subject<span class="op">]</span><span class="op">.</span>append<span class="op">(</span>name<span class="op">)</span>

<span class="cm"># With defaultdict - clean</span>
groups <span class="op">=</span> defaultdict<span class="op">(</span><span class="nb">list</span><span class="op">)</span>  <span class="cm"># Missing keys auto-create empty lists</span>
<span class="kw">for</span> name<span class="op">,</span> subject <span class="kw">in</span> students<span class="op">:</span>
    groups<span class="op">[</span>subject<span class="op">]</span><span class="op">.</span>append<span class="op">(</span>name<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">dict</span><span class="op">(</span>groups<span class="op">)</span><span class="op">)</span>
<span class="cm"># {&#x27;Math&#x27;: [&#x27;Alice&#x27;, &#x27;Charlie&#x27;], &#x27;Science&#x27;: [&#x27;Bob&#x27;, &#x27;Diana&#x27;]}</span>

<span class="cm"># Other default types:</span>
counter <span class="op">=</span> defaultdict<span class="op">(</span><span class="nb">int</span><span class="op">)</span>     <span class="cm"># Missing keys default to 0</span>
counter<span class="op">[</span><span class="st">&quot;</span><span class="st">apples</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
counter<span class="op">[</span><span class="st">&quot;</span><span class="st">apples</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
counter<span class="op">[</span><span class="st">&quot;</span><span class="st">bananas</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">dict</span><span class="op">(</span>counter<span class="op">)</span><span class="op">)</span>  <span class="cm"># {&#x27;apples&#x27;: 2, &#x27;bananas&#x27;: 1}</span>
</code></pre>
<p><strong>Counter</strong> - count occurrences:</p>
<pre><code><span class="kw">from</span> collections <span class="kw">import</span> Counter

<span class="cm"># Count anything iterable</span>
words <span class="op">=</span> <span class="st">&quot;</span><span class="st">the cat sat on the mat the cat</span><span class="st">&quot;</span><span class="op">.</span>split<span class="op">(</span><span class="op">)</span>
counts <span class="op">=</span> Counter<span class="op">(</span>words<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>counts<span class="op">)</span>
<span class="cm"># Counter({&#x27;the&#x27;: 3, &#x27;cat&#x27;: 2, &#x27;sat&#x27;: 1, &#x27;on&#x27;: 1, &#x27;mat&#x27;: 1})</span>

<span class="nb">print</span><span class="op">(</span>counts<span class="op">.</span>most_common<span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># [(&#x27;the&#x27;, 3), (&#x27;cat&#x27;, 2)]</span>
<span class="nb">print</span><span class="op">(</span>counts<span class="op">[</span><span class="st">&quot;</span><span class="st">the</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>           <span class="cm"># 3</span>
<span class="nb">print</span><span class="op">(</span>counts<span class="op">[</span><span class="st">&quot;</span><span class="st">dog</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>           <span class="cm"># 0 (missing keys return 0, not KeyError!)</span>

<span class="cm"># You can also count characters in a string</span>
<span class="nb">print</span><span class="op">(</span>Counter<span class="op">(</span><span class="st">&quot;</span><span class="st">abracadabra</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>
<span class="cm"># Counter({&#x27;a&#x27;: 5, &#x27;b&#x27;: 2, &#x27;r&#x27;: 2, &#x27;c&#x27;: 1, &#x27;d&#x27;: 1})</span>
</code></pre>
<p><strong>deque</strong> (double-ended queue) - efficient append/pop from both ends:</p>
<pre><code><span class="kw">from</span> collections <span class="kw">import</span> deque

<span class="cm"># Lists are slow for insert(0, x) and pop(0) - O(n)</span>
<span class="cm"># deque is fast for both ends - O(1)</span>

dq <span class="op">=</span> deque<span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span><span class="op">)</span>
dq<span class="op">.</span>appendleft<span class="op">(</span><span class="num">0</span><span class="op">)</span>     <span class="cm"># [0, 1, 2, 3]</span>
dq<span class="op">.</span>append<span class="op">(</span><span class="num">4</span><span class="op">)</span>         <span class="cm"># [0, 1, 2, 3, 4]</span>
dq<span class="op">.</span>popleft<span class="op">(</span><span class="op">)</span>          <span class="cm"># Returns 0, deque is [1, 2, 3, 4]</span>
dq<span class="op">.</span>pop<span class="op">(</span><span class="op">)</span>              <span class="cm"># Returns 4, deque is [1, 2, 3]</span>

<span class="cm"># Fixed-size deque - automatically drops oldest items</span>
recent_logs <span class="op">=</span> deque<span class="op">(</span>maxlen<span class="op">=</span><span class="num">5</span><span class="op">)</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">:</span>
    recent_logs<span class="op">.</span>append<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">log-</span><span class="st">{</span>i<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">list</span><span class="op">(</span>recent_logs<span class="op">)</span><span class="op">)</span>
<span class="cm"># [&#x27;log-5&#x27;, &#x27;log-6&#x27;, &#x27;log-7&#x27;, &#x27;log-8&#x27;, &#x27;log-9&#x27;]</span>
</code></pre>
<h3 id="exercise-31-group-students-by-city">Exercise 3.1: Group Students by City</h3>
<pre><code>students <span class="op">=</span> <span class="op">[</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">LA</span><span class="st">&quot;</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Chicago</span><span class="st">&quot;</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Eve</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">LA</span><span class="st">&quot;</span><span class="op">}</span><span class="op">,</span>
<span class="op">]</span>
<span class="cm"># Group them by city. Expected output:</span>
<span class="cm"># {&#x27;NYC&#x27;: [&#x27;Alice&#x27;, &#x27;Charlie&#x27;], &#x27;LA&#x27;: [&#x27;Bob&#x27;, &#x27;Eve&#x27;], &#x27;Chicago&#x27;: [&#x27;Diana&#x27;]}</span>
</code></pre>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">from</span> collections <span class="kw">import</span> defaultdict

groups <span class="op">=</span> defaultdict<span class="op">(</span><span class="nb">list</span><span class="op">)</span>
<span class="kw">for</span> student <span class="kw">in</span> students<span class="op">:</span>
    groups<span class="op">[</span>student<span class="op">[</span><span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">]</span><span class="op">]</span><span class="op">.</span>append<span class="op">(</span>student<span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">dict</span><span class="op">(</span>groups<span class="op">)</span><span class="op">)</span>
</code></pre>
</details>
<h3 id="exercise-32-sort-a-dictionary-by-values">Exercise 3.2: Sort a Dictionary by Values</h3>
<pre><code>scores <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">85</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">92</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">78</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">95</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Eve</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">88</span><span class="op">}</span>
<span class="cm"># Sort by score descending and print as: &quot;1. Diana: 95&quot;, &quot;2. Bob: 92&quot;, etc.</span>
</code></pre>
<details>
<summary>Solution</summary>

<pre><code>sorted_scores <span class="op">=</span> <span class="nb">sorted</span><span class="op">(</span>scores<span class="op">.</span>items<span class="op">(</span><span class="op">)</span><span class="op">,</span> key<span class="op">=</span><span class="kw">lambda</span> item<span class="op">:</span> item<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> reverse<span class="op">=</span><span class="kw">True</span><span class="op">)</span>
<span class="kw">for</span> rank<span class="op">,</span> <span class="op">(</span>name<span class="op">,</span> score<span class="op">)</span> <span class="kw">in</span> <span class="nb">enumerate</span><span class="op">(</span>sorted_scores<span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>rank<span class="st">}</span><span class="st">. </span><span class="st">{</span>name<span class="st">}</span><span class="st">: </span><span class="st">{</span>score<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-4-functions-functional-programming"><h2>Chapter 4: Functions & Functional Programming</h2><div class="line"></div><span class="badge" style="background:var(--green-dim);color:var(--green)">Chapter 4</span></div>
<h3 id="41-functions">4.1 Functions</h3>
<p>Functions let you organize code into reusable blocks.</p>
<pre><code><span class="cm"># Basic function</span>
<span class="kw">def</span> <span class="fn">greet</span><span class="op">(</span>name<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Greet a person by name.&quot;&quot;&quot;</span>  <span class="cm"># This is a docstring - documents the function</span>
    <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Hello, </span><span class="st">{</span>name<span class="st">}</span><span class="st">!</span><span class="st">&quot;</span>

<span class="nb">print</span><span class="op">(</span>greet<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &quot;Hello, Alice!&quot;</span>

<span class="cm"># Function with default arguments</span>
<span class="kw">def</span> <span class="fn">power</span><span class="op">(</span>base<span class="op">,</span> exponent<span class="op">=</span><span class="num">2</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Raise base to exponent. Defaults to squaring.&quot;&quot;&quot;</span>
    <span class="kw">return</span> base <span class="op">*</span><span class="op">*</span> exponent

<span class="nb">print</span><span class="op">(</span>power<span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">)</span>      <span class="cm"># 9   (uses default exponent=2)</span>
<span class="nb">print</span><span class="op">(</span>power<span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">3</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># 27  (exponent=3)</span>
<span class="nb">print</span><span class="op">(</span>power<span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="num">10</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># 1024</span>

<span class="cm"># Function with multiple return values</span>
<span class="kw">def</span> <span class="fn">min_max</span><span class="op">(</span>numbers<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> <span class="nb">min</span><span class="op">(</span>numbers<span class="op">)</span><span class="op">,</span> <span class="nb">max</span><span class="op">(</span>numbers<span class="op">)</span>

low<span class="op">,</span> high <span class="op">=</span> min_max<span class="op">(</span><span class="op">[</span><span class="num">3</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">9</span><span class="op">]</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Min: </span><span class="st">{</span>low<span class="st">}</span><span class="st">, Max: </span><span class="st">{</span>high<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Min: 1, Max: 9</span>

<span class="cm"># Type hints (optional but recommended for documentation)</span>
<span class="kw">def</span> <span class="fn">calculate_area</span><span class="op">(</span>length<span class="op">:</span> <span class="nb">float</span><span class="op">,</span> width<span class="op">:</span> <span class="nb">float</span><span class="op">)</span> <span class="op">-</span><span class="op">&gt;</span> <span class="nb">float</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Calculate rectangle area.&quot;&quot;&quot;</span>
    <span class="kw">return</span> length <span class="op">*</span> width
</code></pre>
<p><strong><code class="inline">*args</code> and <code class="inline">&lt;/strong&gt;kwargs</code>** - accept any number of arguments:</p>
<pre><code><span class="cm"># *args collects extra POSITIONAL arguments as a tuple</span>
<span class="kw">def</span> <span class="fn">add_all</span><span class="op">(</span><span class="op">*</span>args<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Received: </span><span class="st">{</span>args<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># args is a tuple</span>
    <span class="kw">return</span> <span class="nb">sum</span><span class="op">(</span>args<span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>add_all<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">)</span><span class="op">)</span>       <span class="cm"># Received: (1, 2, 3) -&gt; 6</span>
<span class="nb">print</span><span class="op">(</span>add_all<span class="op">(</span><span class="num">10</span><span class="op">,</span> <span class="num">20</span><span class="op">,</span> <span class="num">30</span><span class="op">,</span> <span class="num">40</span><span class="op">)</span><span class="op">)</span> <span class="cm"># Received: (10, 20, 30, 40) -&gt; 100</span>

<span class="cm"># **kwargs collects extra KEYWORD arguments as a dictionary</span>
<span class="kw">def</span> <span class="fn">create_profile</span><span class="op">(</span><span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Received: </span><span class="st">{</span>kwargs<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># kwargs is a dict</span>
    <span class="kw">for</span> key<span class="op">,</span> value <span class="kw">in</span> kwargs<span class="op">.</span>items<span class="op">(</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  </span><span class="st">{</span>key<span class="st">}</span><span class="st">: </span><span class="st">{</span>value<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

create_profile<span class="op">(</span>name<span class="op">=</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> age<span class="op">=</span><span class="num">30</span><span class="op">,</span> city<span class="op">=</span><span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">)</span>
<span class="cm"># Received: {&#x27;name&#x27;: &#x27;Alice&#x27;, &#x27;age&#x27;: 30, &#x27;city&#x27;: &#x27;NYC&#x27;}</span>
<span class="cm">#   name: Alice</span>
<span class="cm">#   age: 30</span>
<span class="cm">#   city: NYC</span>

<span class="cm"># Combining both</span>
<span class="kw">def</span> <span class="fn">flexible</span><span class="op">(</span>required<span class="op">,</span> <span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Required: </span><span class="st">{</span>required<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Extra positional: </span><span class="st">{</span>args<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Extra keyword: </span><span class="st">{</span>kwargs<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

flexible<span class="op">(</span><span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> x<span class="op">=</span><span class="num">10</span><span class="op">,</span> y<span class="op">=</span><span class="num">20</span><span class="op">)</span>
<span class="cm"># Required: hello</span>
<span class="cm"># Extra positional: (1, 2, 3)</span>
<span class="cm"># Extra keyword: {&#x27;x&#x27;: 10, &#x27;y&#x27;: 20}</span>
</code></pre>
<p><strong>Unpacking arguments</strong> - the reverse of *args/**kwargs:</p>
<pre><code><span class="kw">def</span> <span class="fn">add</span><span class="op">(</span>a<span class="op">,</span> b<span class="op">,</span> c<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> a <span class="op">+</span> b <span class="op">+</span> c

<span class="cm"># Unpack a list into positional arguments</span>
numbers <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span>add<span class="op">(</span><span class="op">*</span>numbers<span class="op">)</span><span class="op">)</span>  <span class="cm"># Same as add(1, 2, 3) -&gt; 6</span>

<span class="cm"># Unpack a dict into keyword arguments</span>
params <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">a</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">b</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">20</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">c</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">30</span><span class="op">}</span>
<span class="nb">print</span><span class="op">(</span>add<span class="op">(</span><span class="op">*</span><span class="op">*</span>params<span class="op">)</span><span class="op">)</span>  <span class="cm"># Same as add(a=10, b=20, c=30) -&gt; 60</span>
</code></pre>
<p><strong>Functions are first-class objects</strong> - you can pass them around like variables:</p>
<pre><code><span class="kw">def</span> <span class="fn">apply</span><span class="op">(</span>func<span class="op">,</span> value<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Apply a function to a value.&quot;&quot;&quot;</span>
    <span class="kw">return</span> func<span class="op">(</span>value<span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>apply<span class="op">(</span><span class="nb">str</span><span class="op">.</span>upper<span class="op">,</span> <span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &quot;HELLO&quot;</span>
<span class="nb">print</span><span class="op">(</span>apply<span class="op">(</span><span class="nb">len</span><span class="op">,</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>     <span class="cm"># 3</span>
<span class="nb">print</span><span class="op">(</span>apply<span class="op">(</span><span class="nb">abs</span><span class="op">,</span> <span class="op">-</span><span class="num">42</span><span class="op">)</span><span class="op">)</span>            <span class="cm"># 42</span>

<span class="cm"># Store functions in a list</span>
operations <span class="op">=</span> <span class="op">[</span><span class="nb">str</span><span class="op">.</span>upper<span class="op">,</span> <span class="nb">str</span><span class="op">.</span>lower<span class="op">,</span> <span class="nb">str</span><span class="op">.</span>title<span class="op">]</span>
text <span class="op">=</span> <span class="st">&quot;</span><span class="st">hello world</span><span class="st">&quot;</span>
<span class="kw">for</span> op <span class="kw">in</span> operations<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>op<span class="op">(</span>text<span class="op">)</span><span class="op">)</span>
<span class="cm"># HELLO WORLD</span>
<span class="cm"># hello world</span>
<span class="cm"># Hello World</span>
</code></pre>
<h3 id="42-lambda-functions">4.2 Lambda Functions</h3>
<p>Lambdas are small anonymous functions (one expression only):</p>
<pre><code><span class="cm"># Regular function</span>
<span class="kw">def</span> <span class="fn">square</span><span class="op">(</span>x<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> x <span class="op">*</span><span class="op">*</span> <span class="num">2</span>

<span class="cm"># Same thing as a lambda</span>
square <span class="op">=</span> <span class="kw">lambda</span> x<span class="op">:</span> x <span class="op">*</span><span class="op">*</span> <span class="num">2</span>

<span class="cm"># Multiple arguments</span>
add <span class="op">=</span> <span class="kw">lambda</span> x<span class="op">,</span> y<span class="op">:</span> x <span class="op">+</span> y
<span class="nb">print</span><span class="op">(</span>add<span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># 7</span>

<span class="cm"># Most commonly used with sort, map, filter:</span>

<span class="cm"># Sort by second element of tuple</span>
students <span class="op">=</span> <span class="op">[</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">85</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">92</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">78</span><span class="op">)</span><span class="op">]</span>
students<span class="op">.</span>sort<span class="op">(</span>key<span class="op">=</span><span class="kw">lambda</span> s<span class="op">:</span> s<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>
<span class="cm"># [(&#x27;Charlie&#x27;, 78), (&#x27;Alice&#x27;, 85), (&#x27;Bob&#x27;, 92)]</span>

<span class="cm"># Sort strings by last character</span>
words <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">cherry</span><span class="st">&quot;</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">sorted</span><span class="op">(</span>words<span class="op">,</span> key<span class="op">=</span><span class="kw">lambda</span> w<span class="op">:</span> w<span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="cm"># [&#x27;banana&#x27;, &#x27;apple&#x27;, &#x27;cherry&#x27;] (sorted by a, e, y)</span>
</code></pre>
<h3 id="43-map-filter-reduce">4.3 Map, Filter, Reduce</h3>
<p>These are functional programming tools for transforming data:</p>
<pre><code><span class="cm"># map() - apply a function to every element</span>
numbers <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span>

<span class="cm"># Square each number</span>
squared <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">map</span><span class="op">(</span><span class="kw">lambda</span> x<span class="op">:</span> x <span class="op">*</span><span class="op">*</span> <span class="num">2</span><span class="op">,</span> numbers<span class="op">)</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>squared<span class="op">)</span>  <span class="cm"># [1, 4, 9, 16, 25]</span>

<span class="cm"># Convert all strings to integers</span>
str_numbers <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">1</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">2</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">3</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">4</span><span class="st">&quot;</span><span class="op">]</span>
int_numbers <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">map</span><span class="op">(</span><span class="nb">int</span><span class="op">,</span> str_numbers<span class="op">)</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>int_numbers<span class="op">)</span>  <span class="cm"># [1, 2, 3, 4]</span>

<span class="cm"># Clean up a list of strings</span>
names <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">  alice  </span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st"> BOB  </span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">  Charlie  </span><span class="st">&quot;</span><span class="op">]</span>
cleaned <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">map</span><span class="op">(</span><span class="nb">str</span><span class="op">.</span>strip<span class="op">,</span> names<span class="op">)</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>cleaned<span class="op">)</span>  <span class="cm"># [&#x27;alice&#x27;, &#x27;BOB&#x27;, &#x27;Charlie&#x27;]</span>

<span class="cm"># filter() - keep elements that pass a test</span>
numbers <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">,</span> <span class="num">7</span><span class="op">,</span> <span class="num">8</span><span class="op">,</span> <span class="num">9</span><span class="op">,</span> <span class="num">10</span><span class="op">]</span>

<span class="cm"># Keep only even numbers</span>
evens <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">filter</span><span class="op">(</span><span class="kw">lambda</span> x<span class="op">:</span> x <span class="op">%</span> <span class="num">2</span> <span class="op">==</span> <span class="num">0</span><span class="op">,</span> numbers<span class="op">)</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>evens<span class="op">)</span>  <span class="cm"># [2, 4, 6, 8, 10]</span>

<span class="cm"># Keep non-empty strings</span>
strings <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">world</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">python</span><span class="st">&quot;</span><span class="op">]</span>
non_empty <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">filter</span><span class="op">(</span><span class="kw">None</span><span class="op">,</span> strings<span class="op">)</span><span class="op">)</span>  <span class="cm"># None removes falsy values</span>
<span class="nb">print</span><span class="op">(</span>non_empty<span class="op">)</span>  <span class="cm"># [&#x27;hello&#x27;, &#x27;world&#x27;, &#x27;python&#x27;]</span>

<span class="cm"># reduce() - accumulate a result</span>
<span class="kw">from</span> functools <span class="kw">import</span> reduce

<span class="cm"># Sum all numbers</span>
total <span class="op">=</span> reduce<span class="op">(</span><span class="kw">lambda</span> acc<span class="op">,</span> x<span class="op">:</span> acc <span class="op">+</span> x<span class="op">,</span> numbers<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>total<span class="op">)</span>  <span class="cm"># 55</span>

<span class="cm"># Product of all numbers</span>
product <span class="op">=</span> reduce<span class="op">(</span><span class="kw">lambda</span> acc<span class="op">,</span> x<span class="op">:</span> acc <span class="op">*</span> x<span class="op">,</span> numbers<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>product<span class="op">)</span>  <span class="cm"># 3628800</span>

<span class="cm"># NOTE: List comprehensions are usually preferred (more Pythonic):</span>
squared <span class="op">=</span> <span class="op">[</span>x<span class="op">*</span><span class="op">*</span><span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> numbers<span class="op">]</span>           <span class="cm"># Instead of map</span>
evens <span class="op">=</span> <span class="op">[</span>x <span class="kw">for</span> x <span class="kw">in</span> numbers <span class="kw">if</span> x <span class="op">%</span> <span class="num">2</span> <span class="op">==</span> <span class="num">0</span><span class="op">]</span>  <span class="cm"># Instead of filter</span>

<span class="cm"># But map/filter are nice when you already have a function:</span>
cleaned <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">map</span><span class="op">(</span><span class="nb">str</span><span class="op">.</span>strip<span class="op">,</span> names<span class="op">)</span><span class="op">)</span>  <span class="cm"># Cleaner than comprehension</span>
</code></pre>
<h3 id="44-closures">4.4 Closures</h3>
<p>A closure is a function that "remembers" variables from the scope where it was created:</p>
<pre><code><span class="cm"># Basic closure</span>
<span class="kw">def</span> <span class="fn">make_multiplier</span><span class="op">(</span>factor<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Returns a function that multiplies by factor.&quot;&quot;&quot;</span>
    <span class="kw">def</span> <span class="fn">multiply</span><span class="op">(</span>x<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> x <span class="op">*</span> factor  <span class="cm"># &#x27;factor&#x27; is remembered from the outer function</span>
    <span class="kw">return</span> multiply

double <span class="op">=</span> make_multiplier<span class="op">(</span><span class="num">2</span><span class="op">)</span>
triple <span class="op">=</span> make_multiplier<span class="op">(</span><span class="num">3</span><span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>double<span class="op">(</span><span class="num">5</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># 10</span>
<span class="nb">print</span><span class="op">(</span>triple<span class="op">(</span><span class="num">5</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># 15</span>
<span class="nb">print</span><span class="op">(</span>double<span class="op">(</span><span class="num">100</span><span class="op">)</span><span class="op">)</span> <span class="cm"># 200</span>

<span class="cm"># Practical example: configurable logger</span>
<span class="kw">def</span> <span class="fn">make_logger</span><span class="op">(</span>prefix<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Returns a logging function with a fixed prefix.&quot;&quot;&quot;</span>
    <span class="kw">def</span> <span class="fn">log</span><span class="op">(</span>message<span class="op">)</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">[</span><span class="st">{</span>prefix<span class="st">}</span><span class="st">] </span><span class="st">{</span>message<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> log

info <span class="op">=</span> make_logger<span class="op">(</span><span class="st">&quot;</span><span class="st">INFO</span><span class="st">&quot;</span><span class="op">)</span>
error <span class="op">=</span> make_logger<span class="op">(</span><span class="st">&quot;</span><span class="st">ERROR</span><span class="st">&quot;</span><span class="op">)</span>
debug <span class="op">=</span> make_logger<span class="op">(</span><span class="st">&quot;</span><span class="st">DEBUG</span><span class="st">&quot;</span><span class="op">)</span>

info<span class="op">(</span><span class="st">&quot;</span><span class="st">Server started</span><span class="st">&quot;</span><span class="op">)</span>     <span class="cm"># [INFO] Server started</span>
error<span class="op">(</span><span class="st">&quot;</span><span class="st">Connection lost</span><span class="st">&quot;</span><span class="op">)</span>   <span class="cm"># [ERROR] Connection lost</span>
debug<span class="op">(</span><span class="st">&quot;</span><span class="st">x = 42</span><span class="st">&quot;</span><span class="op">)</span>           <span class="cm"># [DEBUG] x = 42</span>

<span class="cm"># Another example: counter</span>
<span class="kw">def</span> <span class="fn">make_counter</span><span class="op">(</span>start<span class="op">=</span><span class="num">0</span><span class="op">)</span><span class="op">:</span>
    count <span class="op">=</span> <span class="op">[</span>start<span class="op">]</span>  <span class="cm"># Using list because we need to modify it</span>
    <span class="kw">def</span> <span class="fn">increment</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
        count<span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
        <span class="kw">return</span> count<span class="op">[</span><span class="num">0</span><span class="op">]</span>
    <span class="kw">return</span> increment

counter <span class="op">=</span> make_counter<span class="op">(</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>counter<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># 1</span>
<span class="nb">print</span><span class="op">(</span>counter<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># 2</span>
<span class="nb">print</span><span class="op">(</span>counter<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># 3</span>
</code></pre>
<h3 id="45-generators">4.5 Generators</h3>
<p>Generators produce values <strong>lazily</strong> (one at a time, on demand). They're memory-efficient for large datasets.</p>
<pre><code><span class="cm"># Regular function: creates entire list in memory</span>
<span class="kw">def</span> <span class="fn">get_squares_list</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    result <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
    <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
        result<span class="op">.</span>append<span class="op">(</span>i <span class="op">*</span><span class="op">*</span> <span class="num">2</span><span class="op">)</span>
    <span class="kw">return</span> result

<span class="cm"># Generator function: yields one value at a time</span>
<span class="kw">def</span> <span class="fn">get_squares_gen</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
        <span class="kw">yield</span> i <span class="op">*</span><span class="op">*</span> <span class="num">2</span>  <span class="cm"># &#x27;yield&#x27; instead of &#x27;return&#x27;</span>

<span class="cm"># Using them looks the same:</span>
<span class="kw">for</span> sq <span class="kw">in</span> get_squares_gen<span class="op">(</span><span class="num">5</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>sq<span class="op">)</span>  <span class="cm"># 0, 1, 4, 9, 16</span>

<span class="cm"># But the memory difference is huge:</span>
<span class="kw">import</span> sys
list_version <span class="op">=</span> get_squares_list<span class="op">(</span><span class="num">10000</span><span class="op">)</span>
gen_version <span class="op">=</span> get_squares_gen<span class="op">(</span><span class="num">10000</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">List: </span><span class="st">{</span>sys<span class="op">.</span>getsizeof<span class="op">(</span>list_version<span class="op">)</span><span class="st">:</span><span class="st">,</span><span class="st">}</span><span class="st"> bytes</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># ~85,000 bytes</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Generator: </span><span class="st">{</span>sys<span class="op">.</span>getsizeof<span class="op">(</span>gen_version<span class="op">)</span><span class="st">:</span><span class="st">,</span><span class="st">}</span><span class="st"> bytes</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># ~200 bytes</span>

<span class="cm"># Real-world example: Fibonacci sequence</span>
<span class="kw">def</span> <span class="fn">fibonacci</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Infinite Fibonacci generator.&quot;&quot;&quot;</span>
    a<span class="op">,</span> b <span class="op">=</span> <span class="num">0</span><span class="op">,</span> <span class="num">1</span>
    <span class="kw">while</span> <span class="kw">True</span><span class="op">:</span>  <span class="cm"># Infinite! But only produces values on demand</span>
        <span class="kw">yield</span> a
        a<span class="op">,</span> b <span class="op">=</span> b<span class="op">,</span> a <span class="op">+</span> b

<span class="cm"># Get first 10 Fibonacci numbers</span>
fib <span class="op">=</span> fibonacci<span class="op">(</span><span class="op">)</span>
<span class="kw">for</span> _ <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="nb">next</span><span class="op">(</span>fib<span class="op">)</span><span class="op">,</span> end<span class="op">=</span><span class="st">&quot;</span><span class="st"> </span><span class="st">&quot;</span><span class="op">)</span>
<span class="cm"># 0 1 1 2 3 5 8 13 21 34</span>

<span class="cm"># Batch processing - process large data in chunks</span>
<span class="kw">def</span> <span class="fn">batch_reader</span><span class="op">(</span>data<span class="op">,</span> batch_size<span class="op">=</span><span class="num">3</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Yield data in batches.&quot;&quot;&quot;</span>
    <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="nb">len</span><span class="op">(</span>data<span class="op">)</span><span class="op">,</span> batch_size<span class="op">)</span><span class="op">:</span>
        <span class="kw">yield</span> data<span class="op">[</span>i<span class="op">:</span>i <span class="op">+</span> batch_size<span class="op">]</span>

data <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">)</span>
<span class="kw">for</span> batch <span class="kw">in</span> batch_reader<span class="op">(</span>data<span class="op">,</span> <span class="num">3</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Processing batch: </span><span class="st">{</span>batch<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="cm"># Processing batch: [0, 1, 2]</span>
<span class="cm"># Processing batch: [3, 4, 5]</span>
<span class="cm"># Processing batch: [6, 7, 8]</span>
<span class="cm"># Processing batch: [9]</span>

<span class="cm"># Generator expression (like list comprehension but lazy)</span>
gen <span class="op">=</span> <span class="op">(</span>x<span class="op">*</span><span class="op">*</span><span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">1000000</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># No memory used yet</span>
total <span class="op">=</span> <span class="nb">sum</span><span class="op">(</span>gen<span class="op">)</span>  <span class="cm"># Values computed one at a time</span>
</code></pre>
<h3 id="exercise-41-make-a-greeting-factory">Exercise 4.1: Make a Greeting Factory</h3>
<p>Write a closure <code class="inline">make_greeter(greeting)</code> that returns a function which greets people:</p>
<pre><code>hello <span class="op">=</span> make_greeter<span class="op">(</span><span class="st">&quot;</span><span class="st">Hello</span><span class="st">&quot;</span><span class="op">)</span>
hi <span class="op">=</span> make_greeter<span class="op">(</span><span class="st">&quot;</span><span class="st">Hi there</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>hello<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># &quot;Hello, Alice!&quot;</span>
<span class="nb">print</span><span class="op">(</span>hi<span class="op">(</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>        <span class="cm"># &quot;Hi there, Bob!&quot;</span>
</code></pre>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">def</span> <span class="fn">make_greeter</span><span class="op">(</span>greeting<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">greet</span><span class="op">(</span>name<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>greeting<span class="st">}</span><span class="st">, </span><span class="st">{</span>name<span class="st">}</span><span class="st">!</span><span class="st">&quot;</span>
    <span class="kw">return</span> greet

hello <span class="op">=</span> make_greeter<span class="op">(</span><span class="st">&quot;</span><span class="st">Hello</span><span class="st">&quot;</span><span class="op">)</span>
hi <span class="op">=</span> make_greeter<span class="op">(</span><span class="st">&quot;</span><span class="st">Hi there</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>hello<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># &quot;Hello, Alice!&quot;</span>
<span class="nb">print</span><span class="op">(</span>hi<span class="op">(</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>        <span class="cm"># &quot;Hi there, Bob!&quot;</span>
</code></pre>
</details>
<h3 id="exercise-42-process-large-data-with-a-generator">Exercise 4.2: Process Large Data with a Generator</h3>
<p>Write a generator <code class="inline">read_large_file(filepath)</code> that yields one line at a time. Then use it to count lines and find the longest line without loading the entire file into memory.</p>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">def</span> <span class="fn">read_large_file</span><span class="op">(</span>filepath<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Yield lines one at a time - works for any file size.&quot;&quot;&quot;</span>
    <span class="kw">with</span> <span class="nb">open</span><span class="op">(</span>filepath<span class="op">,</span> <span class="st">&#x27;</span><span class="st">r</span><span class="st">&#x27;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
        <span class="kw">for</span> line <span class="kw">in</span> f<span class="op">:</span>
            <span class="kw">yield</span> line<span class="op">.</span>rstrip<span class="op">(</span><span class="st">&#x27;</span><span class="st">\n</span><span class="st">&#x27;</span><span class="op">)</span>

<span class="cm"># Usage:</span>
line_count <span class="op">=</span> <span class="num">0</span>
longest <span class="op">=</span> <span class="st">&quot;</span><span class="st">&quot;</span>
<span class="kw">for</span> line <span class="kw">in</span> read_large_file<span class="op">(</span><span class="st">&quot;</span><span class="st">some_file.txt</span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>
    line_count <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
    <span class="kw">if</span> <span class="nb">len</span><span class="op">(</span>line<span class="op">)</span> <span class="op">&gt;</span> <span class="nb">len</span><span class="op">(</span>longest<span class="op">)</span><span class="op">:</span>
        longest <span class="op">=</span> line

<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Total lines: </span><span class="st">{</span>line_count<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Longest line (</span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>longest<span class="op">)</span><span class="st">}</span><span class="st"> chars): </span><span class="st">{</span>longest<span class="op">[</span><span class="op">:</span><span class="num">50</span><span class="op">]</span><span class="st">}</span><span class="st">...</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-5-object-oriented-programming"><h2>Chapter 5: Object-Oriented Programming</h2><div class="line"></div><span class="badge" style="background:var(--blue-dim);color:var(--blue)">Chapter 5</span></div>
<h3 id="51-classes-and-objects">5.1 Classes and Objects</h3>
<p>A <strong>class</strong> is a blueprint. An <strong>object</strong> is an instance of that blueprint.</p>
<pre><code><span class="kw">class</span> <span class="fn">Dog</span><span class="op">:</span>
    <span class="cm"># Class variable (shared by ALL dogs)</span>
    species <span class="op">=</span> <span class="st">&quot;</span><span class="st">Canis familiaris</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> name<span class="op">,</span> age<span class="op">,</span> breed<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Constructor - called when you create a new Dog.&quot;&quot;&quot;</span>
        <span class="cm"># Instance variables (unique to EACH dog)</span>
        <span class="nb">self</span><span class="op">.</span>name <span class="op">=</span> name
        <span class="nb">self</span><span class="op">.</span>age <span class="op">=</span> age
        <span class="nb">self</span><span class="op">.</span>breed <span class="op">=</span> breed

    <span class="kw">def</span> <span class="fn">bark</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Instance method - needs self to access instance data.&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>name<span class="st">}</span><span class="st"> says Woof!</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">description</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>name<span class="st">}</span><span class="st"> is a </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>age<span class="st">}</span><span class="st">-year-old </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>breed<span class="st">}</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">birthday</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>age <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Happy birthday </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>name<span class="st">}</span><span class="st">! Now </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>age<span class="st">}</span><span class="st"> years old.</span><span class="st">&quot;</span>

<span class="cm"># Creating objects (instances)</span>
buddy <span class="op">=</span> Dog<span class="op">(</span><span class="st">&quot;</span><span class="st">Buddy</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Golden Retriever</span><span class="st">&quot;</span><span class="op">)</span>
max_dog <span class="op">=</span> Dog<span class="op">(</span><span class="st">&quot;</span><span class="st">Max</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">German Shepherd</span><span class="st">&quot;</span><span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>buddy<span class="op">.</span>bark<span class="op">(</span><span class="op">)</span><span class="op">)</span>           <span class="cm"># &quot;Buddy says Woof!&quot;</span>
<span class="nb">print</span><span class="op">(</span>max_dog<span class="op">.</span>description<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &quot;Max is a 3-year-old German Shepherd&quot;</span>
<span class="nb">print</span><span class="op">(</span>buddy<span class="op">.</span>birthday<span class="op">(</span><span class="op">)</span><span class="op">)</span>       <span class="cm"># &quot;Happy birthday Buddy! Now 6 years old.&quot;</span>

<span class="cm"># Class variable is shared</span>
<span class="nb">print</span><span class="op">(</span>buddy<span class="op">.</span>species<span class="op">)</span>     <span class="cm"># &quot;Canis familiaris&quot;</span>
<span class="nb">print</span><span class="op">(</span>max_dog<span class="op">.</span>species<span class="op">)</span>   <span class="cm"># &quot;Canis familiaris&quot;</span>
</code></pre>
<h3 id="52-the-__init__-method">5.2 The <code class="inline">__init__</code> Method</h3>
<p><code class="inline">__init__</code> is Python's constructor. It's called automatically when you create an object:</p>
<pre><code><span class="kw">class</span> <span class="fn">BankAccount</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> owner<span class="op">,</span> balance<span class="op">=</span><span class="num">0</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;</span>
<span class="st">        Initialize a bank account.</span>

<span class="st">        Args:</span>
<span class="st">            owner: Account owner&#x27;s name</span>
<span class="st">            balance: Starting balance (default 0)</span>
<span class="st">        &quot;&quot;&quot;</span>
        <span class="nb">self</span><span class="op">.</span>owner <span class="op">=</span> owner
        <span class="nb">self</span><span class="op">.</span>balance <span class="op">=</span> balance
        <span class="nb">self</span><span class="op">.</span>transactions <span class="op">=</span> <span class="op">[</span><span class="op">]</span>  <span class="cm"># Track all transactions</span>

    <span class="kw">def</span> <span class="fn">deposit</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> amount<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> amount <span class="op">&lt;</span><span class="op">=</span> <span class="num">0</span><span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Deposit amount must be positive</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="nb">self</span><span class="op">.</span>balance <span class="op">+</span><span class="op">=</span> amount
        <span class="nb">self</span><span class="op">.</span>transactions<span class="op">.</span>append<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">+$</span><span class="st">{</span>amount<span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>balance

    <span class="kw">def</span> <span class="fn">withdraw</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> amount<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> amount <span class="op">&lt;</span><span class="op">=</span> <span class="num">0</span><span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Withdrawal amount must be positive</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">if</span> amount <span class="op">&gt;</span> <span class="nb">self</span><span class="op">.</span>balance<span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Insufficient funds</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="nb">self</span><span class="op">.</span>balance <span class="op">-</span><span class="op">=</span> amount
        <span class="nb">self</span><span class="op">.</span>transactions<span class="op">.</span>append<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">-$</span><span class="st">{</span>amount<span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>balance

    <span class="kw">def</span> <span class="fn">get_statement</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">\n</span><span class="st">Account: </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>owner<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Balance: $</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>balance<span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Transactions: </span><span class="st">{</span><span class="st">&#x27;</span><span class="st">, </span><span class="st">&#x27;</span><span class="op">.</span>join<span class="op">(</span><span class="nb">self</span><span class="op">.</span>transactions<span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Usage</span>
account <span class="op">=</span> BankAccount<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">1000</span><span class="op">)</span>
account<span class="op">.</span>deposit<span class="op">(</span><span class="num">500</span><span class="op">)</span>
account<span class="op">.</span>withdraw<span class="op">(</span><span class="num">200</span><span class="op">)</span>
account<span class="op">.</span>get_statement<span class="op">(</span><span class="op">)</span>
<span class="cm"># Account: Alice</span>
<span class="cm"># Balance: $1300.00</span>
<span class="cm"># Transactions: +$500.00, -$200.00</span>
</code></pre>
<h3 id="53-inheritance">5.3 Inheritance</h3>
<p>A class can inherit attributes and methods from another class:</p>
<pre><code><span class="kw">class</span> <span class="fn">Animal</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> name<span class="op">,</span> sound<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>name <span class="op">=</span> name
        <span class="nb">self</span><span class="op">.</span>sound <span class="op">=</span> sound

    <span class="kw">def</span> <span class="fn">speak</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>name<span class="st">}</span><span class="st"> says </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>sound<span class="st">}</span><span class="st">!</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">__str__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>name<span class="st">}</span><span class="st"> the </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>__class__<span class="op">.</span>__name__<span class="st">}</span><span class="st">&quot;</span>

<span class="cm"># Dog inherits from Animal</span>
<span class="kw">class</span> <span class="fn">Dog</span><span class="op">(</span>Animal<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> name<span class="op">,</span> breed<span class="op">)</span><span class="op">:</span>
        <span class="nb">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="fn">__init__</span><span class="op">(</span>name<span class="op">,</span> <span class="st">&quot;</span><span class="st">Woof</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Call parent&#x27;s __init__</span>
        <span class="nb">self</span><span class="op">.</span>breed <span class="op">=</span> breed

    <span class="kw">def</span> <span class="fn">fetch</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> item<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>name<span class="st">}</span><span class="st"> fetches the </span><span class="st">{</span>item<span class="st">}</span><span class="st">!</span><span class="st">&quot;</span>

<span class="kw">class</span> <span class="fn">Cat</span><span class="op">(</span>Animal<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> name<span class="op">,</span> indoor<span class="op">=</span><span class="kw">True</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="fn">__init__</span><span class="op">(</span>name<span class="op">,</span> <span class="st">&quot;</span><span class="st">Meow</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="nb">self</span><span class="op">.</span>indoor <span class="op">=</span> indoor

    <span class="kw">def</span> <span class="fn">purr</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>name<span class="st">}</span><span class="st"> purrs...</span><span class="st">&quot;</span>

<span class="cm"># Usage</span>
dog <span class="op">=</span> Dog<span class="op">(</span><span class="st">&quot;</span><span class="st">Rex</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Labrador</span><span class="st">&quot;</span><span class="op">)</span>
cat <span class="op">=</span> Cat<span class="op">(</span><span class="st">&quot;</span><span class="st">Whiskers</span><span class="st">&quot;</span><span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>dog<span class="op">.</span>speak<span class="op">(</span><span class="op">)</span><span class="op">)</span>     <span class="cm"># &quot;Rex says Woof!&quot; (inherited from Animal)</span>
<span class="nb">print</span><span class="op">(</span>dog<span class="op">.</span>fetch<span class="op">(</span><span class="st">&quot;</span><span class="st">ball</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &quot;Rex fetches the ball!&quot; (Dog-only method)</span>
<span class="nb">print</span><span class="op">(</span>cat<span class="op">.</span>speak<span class="op">(</span><span class="op">)</span><span class="op">)</span>     <span class="cm"># &quot;Whiskers says Meow!&quot;</span>
<span class="nb">print</span><span class="op">(</span>cat<span class="op">.</span>purr<span class="op">(</span><span class="op">)</span><span class="op">)</span>      <span class="cm"># &quot;Whiskers purrs...&quot;</span>

<span class="cm"># Polymorphism - same method, different behavior</span>
animals <span class="op">=</span> <span class="op">[</span>Dog<span class="op">(</span><span class="st">&quot;</span><span class="st">Rex</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Lab</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span> Cat<span class="op">(</span><span class="st">&quot;</span><span class="st">Whiskers</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span> Dog<span class="op">(</span><span class="st">&quot;</span><span class="st">Max</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Poodle</span><span class="st">&quot;</span><span class="op">)</span><span class="op">]</span>
<span class="kw">for</span> animal <span class="kw">in</span> animals<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>animal<span class="op">.</span>speak<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># Each animal speaks differently</span>
</code></pre>
<h3 id="54-abstract-base-classes">5.4 Abstract Base Classes</h3>
<p>ABCs define a contract that subclasses must follow:</p>
<pre><code><span class="kw">from</span> abc <span class="kw">import</span> ABC<span class="op">,</span> abstractmethod

<span class="kw">class</span> <span class="fn">Shape</span><span class="op">(</span>ABC<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;All shapes MUST implement area() and perimeter().&quot;&quot;&quot;</span>

    <span class="dc">@abstractmethod</span>
    <span class="kw">def</span> <span class="fn">area</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span> <span class="op">-</span><span class="op">&gt;</span> <span class="nb">float</span><span class="op">:</span>
        <span class="kw">pass</span>

    <span class="dc">@abstractmethod</span>
    <span class="kw">def</span> <span class="fn">perimeter</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span> <span class="op">-</span><span class="op">&gt;</span> <span class="nb">float</span><span class="op">:</span>
        <span class="kw">pass</span>

    <span class="kw">def</span> <span class="fn">description</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Concrete method - available to all subclasses.&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>__class__<span class="op">.</span>__name__<span class="st">}</span><span class="st">: area=</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>area<span class="op">(</span><span class="op">)</span><span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st">&quot;</span>

<span class="cm"># You CANNOT create a Shape directly:</span>
<span class="cm"># shape = Shape()  # TypeError: Can&#x27;t instantiate abstract class</span>

<span class="kw">class</span> <span class="fn">Rectangle</span><span class="op">(</span>Shape<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> width<span class="op">,</span> height<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>width <span class="op">=</span> width
        <span class="nb">self</span><span class="op">.</span>height <span class="op">=</span> height

    <span class="kw">def</span> <span class="fn">area</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>width <span class="op">*</span> <span class="nb">self</span><span class="op">.</span>height

    <span class="kw">def</span> <span class="fn">perimeter</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="num">2</span> <span class="op">*</span> <span class="op">(</span><span class="nb">self</span><span class="op">.</span>width <span class="op">+</span> <span class="nb">self</span><span class="op">.</span>height<span class="op">)</span>

<span class="kw">class</span> <span class="fn">Circle</span><span class="op">(</span>Shape<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> radius<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>radius <span class="op">=</span> radius

    <span class="kw">def</span> <span class="fn">area</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">import</span> math
        <span class="kw">return</span> math<span class="op">.</span>pi <span class="op">*</span> <span class="nb">self</span><span class="op">.</span>radius <span class="op">*</span><span class="op">*</span> <span class="num">2</span>

    <span class="kw">def</span> <span class="fn">perimeter</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">import</span> math
        <span class="kw">return</span> <span class="num">2</span> <span class="op">*</span> math<span class="op">.</span>pi <span class="op">*</span> <span class="nb">self</span><span class="op">.</span>radius

<span class="cm"># Usage</span>
shapes <span class="op">=</span> <span class="op">[</span>Rectangle<span class="op">(</span><span class="num">5</span><span class="op">,</span> <span class="num">3</span><span class="op">)</span><span class="op">,</span> Circle<span class="op">(</span><span class="num">4</span><span class="op">)</span><span class="op">]</span>
<span class="kw">for</span> shape <span class="kw">in</span> shapes<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>shape<span class="op">.</span>description<span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="cm"># Rectangle: area=15.00</span>
<span class="cm"># Circle: area=50.27</span>
</code></pre>
<h3 id="55-access-control">5.5 Access Control</h3>
<p>Python uses naming conventions (not enforcement) for access control:</p>
<pre><code><span class="kw">class</span> <span class="fn">Account</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> owner<span class="op">,</span> balance<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>owner <span class="op">=</span> owner          <span class="cm"># Public - access from anywhere</span>
        <span class="nb">self</span><span class="op">.</span>_bank <span class="op">=</span> <span class="st">&quot;</span><span class="st">MyBank</span><span class="st">&quot;</span>       <span class="cm"># Protected - &quot;internal use&quot; convention</span>
        <span class="nb">self</span><span class="op">.</span>__balance <span class="op">=</span> balance    <span class="cm"># Private - name mangling makes it harder to access</span>

    <span class="kw">def</span> <span class="fn">get_balance</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Public method to access private data.&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>__balance

    <span class="kw">def</span> <span class="fn">_internal_method</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Protected method - meant for class and subclasses only.&quot;&quot;&quot;</span>
        <span class="kw">pass</span>

acc <span class="op">=</span> Account<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">1000</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>acc<span class="op">.</span>owner<span class="op">)</span>            <span class="cm"># OK - public</span>
<span class="nb">print</span><span class="op">(</span>acc<span class="op">.</span>_bank<span class="op">)</span>            <span class="cm"># Works but discouraged - protected</span>
<span class="cm"># print(acc.__balance)      # AttributeError! - private (name-mangled)</span>
<span class="nb">print</span><span class="op">(</span>acc<span class="op">.</span>_Account__balance<span class="op">)</span>  <span class="cm"># Works via name mangling - but DON&#x27;T do this</span>
<span class="nb">print</span><span class="op">(</span>acc<span class="op">.</span>get_balance<span class="op">(</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># Correct way: use the public method</span>
</code></pre>
<h3 id="56-properties">5.6 Properties</h3>
<p>Properties let you control access to attributes with getter/setter logic:</p>
<pre><code><span class="kw">class</span> <span class="fn">Temperature</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> celsius<span class="op">=</span><span class="num">0</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>celsius <span class="op">=</span> celsius  <span class="cm"># This calls the setter!</span>

    <span class="dc">@property</span>
    <span class="kw">def</span> <span class="fn">celsius</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Getter - called when you read .celsius&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>_celsius

    <span class="dc">@celsius</span><span class="op">.</span>setter
    <span class="kw">def</span> <span class="fn">celsius</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> value<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Setter - called when you assign to .celsius&quot;&quot;&quot;</span>
        <span class="kw">if</span> value <span class="op">&lt;</span> <span class="op">-</span><span class="num">273.15</span><span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Temperature below absolute zero!</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="nb">self</span><span class="op">.</span>_celsius <span class="op">=</span> value

    <span class="dc">@property</span>
    <span class="kw">def</span> <span class="fn">fahrenheit</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Read-only computed property.&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>_celsius <span class="op">*</span> <span class="num">9</span><span class="op">/</span><span class="num">5</span> <span class="op">+</span> <span class="num">32</span>

<span class="cm"># Usage - looks like normal attributes, but validation happens automatically</span>
temp <span class="op">=</span> Temperature<span class="op">(</span><span class="num">100</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>temp<span class="op">.</span>celsius<span class="op">)</span>      <span class="cm"># 100</span>
<span class="nb">print</span><span class="op">(</span>temp<span class="op">.</span>fahrenheit<span class="op">)</span>   <span class="cm"># 212.0</span>

temp<span class="op">.</span>celsius <span class="op">=</span> <span class="num">0</span>
<span class="nb">print</span><span class="op">(</span>temp<span class="op">.</span>fahrenheit<span class="op">)</span>   <span class="cm"># 32.0</span>

<span class="cm"># temp.celsius = -300    # ValueError: Temperature below absolute zero!</span>
<span class="cm"># temp.fahrenheit = 100  # AttributeError: can&#x27;t set (read-only property)</span>
</code></pre>
<h3 id="57-class-methods-vs-static-methods">5.7 Class Methods vs Static Methods</h3>
<pre><code><span class="kw">class</span> <span class="fn">DateUtil</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> year<span class="op">,</span> month<span class="op">,</span> day<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>year <span class="op">=</span> year
        <span class="nb">self</span><span class="op">.</span>month <span class="op">=</span> month
        <span class="nb">self</span><span class="op">.</span>day <span class="op">=</span> day

    <span class="kw">def</span> <span class="fn">__str__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>year<span class="st">}</span><span class="st">-</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>month<span class="st">:</span><span class="st">02d</span><span class="st">}</span><span class="st">-</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>day<span class="st">:</span><span class="st">02d</span><span class="st">}</span><span class="st">&quot;</span>

    <span class="dc">@classmethod</span>
    <span class="kw">def</span> <span class="fn">from_string</span><span class="op">(</span><span class="nb">cls</span><span class="op">,</span> date_str<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Alternative constructor - creates a DateUtil from a string.</span>

<span class="st">        @classmethod receives the CLASS as first argument (cls),</span>
<span class="st">        so it can create new instances.</span>
<span class="st">        &quot;&quot;&quot;</span>
        year<span class="op">,</span> month<span class="op">,</span> day <span class="op">=</span> <span class="nb">map</span><span class="op">(</span><span class="nb">int</span><span class="op">,</span> date_str<span class="op">.</span>split<span class="op">(</span><span class="st">&quot;</span><span class="st">-</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>
        <span class="kw">return</span> <span class="nb">cls</span><span class="op">(</span>year<span class="op">,</span> month<span class="op">,</span> day<span class="op">)</span>  <span class="cm"># Same as DateUtil(year, month, day)</span>

    <span class="dc">@classmethod</span>
    <span class="kw">def</span> <span class="fn">today</span><span class="op">(</span><span class="nb">cls</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Another alternative constructor.&quot;&quot;&quot;</span>
        <span class="kw">from</span> datetime <span class="kw">import</span> date
        d <span class="op">=</span> date<span class="op">.</span>today<span class="op">(</span><span class="op">)</span>
        <span class="kw">return</span> <span class="nb">cls</span><span class="op">(</span>d<span class="op">.</span>year<span class="op">,</span> d<span class="op">.</span>month<span class="op">,</span> d<span class="op">.</span>day<span class="op">)</span>

    <span class="dc">@staticmethod</span>
    <span class="kw">def</span> <span class="fn">is_valid_date</span><span class="op">(</span>date_str<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Utility function that doesn&#x27;t need class or instance.</span>

<span class="st">        @staticmethod doesn&#x27;t receive self or cls.</span>
<span class="st">        It&#x27;s just a function that lives inside the class namespace.</span>
<span class="st">        &quot;&quot;&quot;</span>
        <span class="kw">try</span><span class="op">:</span>
            parts <span class="op">=</span> date_str<span class="op">.</span>split<span class="op">(</span><span class="st">&quot;</span><span class="st">-</span><span class="st">&quot;</span><span class="op">)</span>
            <span class="kw">if</span> <span class="nb">len</span><span class="op">(</span>parts<span class="op">)</span> <span class="op">!=</span> <span class="num">3</span><span class="op">:</span>
                <span class="kw">return</span> <span class="kw">False</span>
            y<span class="op">,</span> m<span class="op">,</span> d <span class="op">=</span> <span class="nb">map</span><span class="op">(</span><span class="nb">int</span><span class="op">,</span> parts<span class="op">)</span>
            <span class="kw">return</span> <span class="num">1</span> <span class="op">&lt;</span><span class="op">=</span> m <span class="op">&lt;</span><span class="op">=</span> <span class="num">12</span> <span class="kw">and</span> <span class="num">1</span> <span class="op">&lt;</span><span class="op">=</span> d <span class="op">&lt;</span><span class="op">=</span> <span class="num">31</span>
        <span class="kw">except</span> <span class="nb">ValueError</span><span class="op">:</span>
            <span class="kw">return</span> <span class="kw">False</span>

<span class="cm"># Usage</span>
d1 <span class="op">=</span> DateUtil<span class="op">(</span><span class="num">2024</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">15</span><span class="op">)</span>            <span class="cm"># Normal constructor</span>
d2 <span class="op">=</span> DateUtil<span class="op">.</span>from_string<span class="op">(</span><span class="st">&quot;</span><span class="st">2024-06-20</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Alternative constructor</span>
d3 <span class="op">=</span> DateUtil<span class="op">.</span>today<span class="op">(</span><span class="op">)</span>                     <span class="cm"># Another alternative</span>

<span class="nb">print</span><span class="op">(</span>d1<span class="op">)</span>  <span class="cm"># 2024-03-15</span>
<span class="nb">print</span><span class="op">(</span>d2<span class="op">)</span>  <span class="cm"># 2024-06-20</span>

<span class="nb">print</span><span class="op">(</span>DateUtil<span class="op">.</span>is_valid_date<span class="op">(</span><span class="st">&quot;</span><span class="st">2024-13-01</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># False (month 13)</span>
<span class="nb">print</span><span class="op">(</span>DateUtil<span class="op">.</span>is_valid_date<span class="op">(</span><span class="st">&quot;</span><span class="st">2024-06-15</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># True</span>
</code></pre>
<h3 id="58-dunder-magic-methods">5.8 Dunder (Magic) Methods</h3>
<p>Dunder methods (double underscore) let your objects work with Python's built-in operators and functions:</p>
<pre><code><span class="kw">class</span> <span class="fn">Vector</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;A 2D vector that works with +, -, *, abs(), len(), ==, print(), etc.&quot;&quot;&quot;</span>

    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>x <span class="op">=</span> x
        <span class="nb">self</span><span class="op">.</span>y <span class="op">=</span> y

    <span class="cm"># String representations</span>
    <span class="kw">def</span> <span class="fn">__repr__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;For developers - unambiguous. Called by repr() and in debugger.&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Vector(</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>x<span class="st">}</span><span class="st">, </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>y<span class="st">}</span><span class="st">)</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">__str__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;For users - readable. Called by str() and print().&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">(</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>x<span class="st">}</span><span class="st">, </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>y<span class="st">}</span><span class="st">)</span><span class="st">&quot;</span>

    <span class="cm"># Arithmetic</span>
    <span class="kw">def</span> <span class="fn">__add__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Enables: v1 + v2&quot;&quot;&quot;</span>
        <span class="kw">return</span> Vector<span class="op">(</span><span class="nb">self</span><span class="op">.</span>x <span class="op">+</span> other<span class="op">.</span>x<span class="op">,</span> <span class="nb">self</span><span class="op">.</span>y <span class="op">+</span> other<span class="op">.</span>y<span class="op">)</span>

    <span class="kw">def</span> <span class="fn">__sub__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Enables: v1 - v2&quot;&quot;&quot;</span>
        <span class="kw">return</span> Vector<span class="op">(</span><span class="nb">self</span><span class="op">.</span>x <span class="op">-</span> other<span class="op">.</span>x<span class="op">,</span> <span class="nb">self</span><span class="op">.</span>y <span class="op">-</span> other<span class="op">.</span>y<span class="op">)</span>

    <span class="kw">def</span> <span class="fn">__mul__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> scalar<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Enables: v * 3&quot;&quot;&quot;</span>
        <span class="kw">return</span> Vector<span class="op">(</span><span class="nb">self</span><span class="op">.</span>x <span class="op">*</span> scalar<span class="op">,</span> <span class="nb">self</span><span class="op">.</span>y <span class="op">*</span> scalar<span class="op">)</span>

    <span class="cm"># Built-in functions</span>
    <span class="kw">def</span> <span class="fn">__abs__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Enables: abs(v) - returns vector magnitude.&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="op">(</span><span class="nb">self</span><span class="op">.</span>x<span class="op">*</span><span class="op">*</span><span class="num">2</span> <span class="op">+</span> <span class="nb">self</span><span class="op">.</span>y<span class="op">*</span><span class="op">*</span><span class="num">2</span><span class="op">)</span> <span class="op">*</span><span class="op">*</span> <span class="num">0.5</span>

    <span class="kw">def</span> <span class="fn">__len__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Enables: len(v) - returns number of dimensions.&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="num">2</span>

    <span class="cm"># Comparison</span>
    <span class="kw">def</span> <span class="fn">__eq__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Enables: v1 == v2&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>x <span class="op">==</span> other<span class="op">.</span>x <span class="kw">and</span> <span class="nb">self</span><span class="op">.</span>y <span class="op">==</span> other<span class="op">.</span>y

    <span class="cm"># Container behavior</span>
    <span class="kw">def</span> <span class="fn">__getitem__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> index<span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Enables: v[0], v[1]&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="op">(</span><span class="nb">self</span><span class="op">.</span>x<span class="op">,</span> <span class="nb">self</span><span class="op">.</span>y<span class="op">)</span><span class="op">[</span>index<span class="op">]</span>

    <span class="cm"># Boolean</span>
    <span class="kw">def</span> <span class="fn">__bool__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="st">&quot;&quot;&quot;Enables: if v:  (True if non-zero vector)&quot;&quot;&quot;</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>x <span class="op">!=</span> <span class="num">0</span> <span class="kw">or</span> <span class="nb">self</span><span class="op">.</span>y <span class="op">!=</span> <span class="num">0</span>

<span class="cm"># Try it out:</span>
v1 <span class="op">=</span> Vector<span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span>
v2 <span class="op">=</span> Vector<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>v1<span class="op">)</span>            <span class="cm"># (3, 4)           -&gt; __str__</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">repr</span><span class="op">(</span>v1<span class="op">)</span><span class="op">)</span>      <span class="cm"># Vector(3, 4)     -&gt; __repr__</span>
<span class="nb">print</span><span class="op">(</span>v1 <span class="op">+</span> v2<span class="op">)</span>       <span class="cm"># (4, 6)           -&gt; __add__</span>
<span class="nb">print</span><span class="op">(</span>v1 <span class="op">-</span> v2<span class="op">)</span>       <span class="cm"># (2, 2)           -&gt; __sub__</span>
<span class="nb">print</span><span class="op">(</span>v1 <span class="op">*</span> <span class="num">3</span><span class="op">)</span>        <span class="cm"># (9, 12)          -&gt; __mul__</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">abs</span><span class="op">(</span>v1<span class="op">)</span><span class="op">)</span>       <span class="cm"># 5.0              -&gt; __abs__</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">len</span><span class="op">(</span>v1<span class="op">)</span><span class="op">)</span>       <span class="cm"># 2                -&gt; __len__</span>
<span class="nb">print</span><span class="op">(</span>v1 <span class="op">==</span> Vector<span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># True       -&gt; __eq__</span>
<span class="nb">print</span><span class="op">(</span>v1<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>         <span class="cm"># 3                -&gt; __getitem__</span>

<span class="kw">if</span> v1<span class="op">:</span>               <span class="cm"># True (non-zero)  -&gt; __bool__</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Non-zero vector</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>Key dunder methods reference:</strong></p>
<table><thead><tr><th>Method</th><th>Triggered By</th><th>What it does</th></tr></thead><tbody><tr><td><code class="inline">__init__(self, ...)</code></td><td><code class="inline">obj = Class()</code></td><td>Constructor</td></tr>
<tr><td><code class="inline">__repr__(self)</code></td><td><code class="inline">repr(obj)</code>, debugger</td><td>Developer string</td></tr>
<tr><td><code class="inline">__str__(self)</code></td><td><code class="inline">str(obj)</code>, <code class="inline">print(obj)</code></td><td>User-friendly string</td></tr>
<tr><td><code class="inline">__len__(self)</code></td><td><code class="inline">len(obj)</code></td><td>Return length</td></tr>
<tr><td><code class="inline">__getitem__(self, key)</code></td><td><code class="inline">obj[key]</code>, <code class="inline">obj[1:3]</code></td><td>Index/slice access</td></tr>
<tr><td><code class="inline">__setitem__(self, key, val)</code></td><td><code class="inline">obj[key] = val</code></td><td>Set by index</td></tr>
<tr><td><code class="inline">__contains__(self, item)</code></td><td><code class="inline">item in obj</code></td><td>Membership test</td></tr>
<tr><td><code class="inline">__iter__(self)</code></td><td><code class="inline">for x in obj</code></td><td>Make iterable</td></tr>
<tr><td><code class="inline">__next__(self)</code></td><td><code class="inline">next(obj)</code></td><td>Next value in iteration</td></tr>
<tr><td><code class="inline">__add__(self, other)</code></td><td><code class="inline">obj + other</code></td><td>Addition</td></tr>
<tr><td><code class="inline">__sub__(self, other)</code></td><td><code class="inline">obj - other</code></td><td>Subtraction</td></tr>
<tr><td><code class="inline">__mul__(self, other)</code></td><td><code class="inline">obj * other</code></td><td>Multiplication</td></tr>
<tr><td><code class="inline">__eq__(self, other)</code></td><td><code class="inline">obj == other</code></td><td>Equality</td></tr>
<tr><td><code class="inline">__lt__(self, other)</code></td><td><code class="inline">obj &lt; other</code></td><td>Less than</td></tr>
<tr><td><code class="inline">__call__(self, ...)</code></td><td><code class="inline">obj()</code></td><td>Make callable</td></tr>
<tr><td><code class="inline">__enter__</code>/<code class="inline">__exit__</code></td><td><code class="inline">with obj:</code></td><td>Context manager</td></tr>
<tr><td><code class="inline">__bool__(self)</code></td><td><code class="inline">bool(obj)</code>, <code class="inline">if obj:</code></td><td>Truthiness</td></tr>
<tr><td><code class="inline">__hash__(self)</code></td><td><code class="inline">hash(obj)</code></td><td>For sets/dict keys</td></tr></tbody></table>
<h3 id="exercise-51-create-a-money-class">Exercise 5.1: Create a Money Class</h3>
<p>Create a <code class="inline">Money</code> class with <code class="inline">amount</code> and <code class="inline">currency</code>. Implement <code class="inline">__add__</code> (raise error if currencies differ), <code class="inline">__str__</code>, <code class="inline">__repr__</code>, <code class="inline">__eq__</code>, and <code class="inline">__lt__</code>.</p>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">class</span> <span class="fn">Money</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> amount<span class="op">,</span> currency<span class="op">=</span><span class="st">&quot;</span><span class="st">USD</span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>amount <span class="op">=</span> <span class="nb">round</span><span class="op">(</span>amount<span class="op">,</span> <span class="num">2</span><span class="op">)</span>
        <span class="nb">self</span><span class="op">.</span>currency <span class="op">=</span> currency

    <span class="kw">def</span> <span class="fn">__repr__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Money(</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>amount<span class="st">}</span><span class="st">, </span><span class="st">&#x27;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>currency<span class="st">}</span><span class="st">&#x27;</span><span class="st">)</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">__str__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>currency<span class="st">}</span><span class="st"> </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>amount<span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">__add__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> <span class="nb">self</span><span class="op">.</span>currency <span class="op">!=</span> other<span class="op">.</span>currency<span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Cannot add </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>currency<span class="st">}</span><span class="st"> and </span><span class="st">{</span>other<span class="op">.</span>currency<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> Money<span class="op">(</span><span class="nb">self</span><span class="op">.</span>amount <span class="op">+</span> other<span class="op">.</span>amount<span class="op">,</span> <span class="nb">self</span><span class="op">.</span>currency<span class="op">)</span>

    <span class="kw">def</span> <span class="fn">__eq__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>amount <span class="op">==</span> other<span class="op">.</span>amount <span class="kw">and</span> <span class="nb">self</span><span class="op">.</span>currency <span class="op">==</span> other<span class="op">.</span>currency

    <span class="kw">def</span> <span class="fn">__lt__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> <span class="nb">self</span><span class="op">.</span>currency <span class="op">!=</span> other<span class="op">.</span>currency<span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Cannot compare </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>currency<span class="st">}</span><span class="st"> and </span><span class="st">{</span>other<span class="op">.</span>currency<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>amount <span class="op">&lt;</span> other<span class="op">.</span>amount

m1 <span class="op">=</span> Money<span class="op">(</span><span class="num">10.50</span><span class="op">)</span>
m2 <span class="op">=</span> Money<span class="op">(</span><span class="num">20.75</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>m1 <span class="op">+</span> m2<span class="op">)</span>      <span class="cm"># USD 31.25</span>
<span class="nb">print</span><span class="op">(</span>m1 <span class="op">&lt;</span> m2<span class="op">)</span>      <span class="cm"># True</span>
<span class="nb">print</span><span class="op">(</span>m1 <span class="op">==</span> Money<span class="op">(</span><span class="num">10.50</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># True</span>
</code></pre>
</details>
<hr>
<p><em>Continued in Part 2 (Chapters 6-19)...</em></p>
<p>The remaining chapters continue in the same detailed, example-rich style. See the companion file for the complete guide.</p>
<div class="section-divider" id="chapter-6-error-handling-exceptions"><h2>Chapter 6: Error Handling & Exceptions</h2><div class="line"></div><span class="badge" style="background:var(--pink-dim);color:var(--pink)">Chapter 6</span></div>
<h3 id="61-why-error-handling-matters">6.1 Why Error Handling Matters</h3>
<p>Without error handling, your program crashes the moment something goes wrong. With it, you can gracefully handle problems and keep running.</p>
<pre><code><span class="cm"># Without error handling - program crashes</span>
user_input <span class="op">=</span> <span class="st">&quot;</span><span class="st">not a number</span><span class="st">&quot;</span>
number <span class="op">=</span> <span class="nb">int</span><span class="op">(</span>user_input<span class="op">)</span>  <span class="cm"># ValueError: invalid literal for int()</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">This never executes</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># With error handling - program continues</span>
<span class="kw">try</span><span class="op">:</span>
    number <span class="op">=</span> <span class="nb">int</span><span class="op">(</span>user_input<span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">You entered: </span><span class="st">{</span>number<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="kw">except</span> <span class="nb">ValueError</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">That</span><span class="st">&#x27;</span><span class="st">s not a valid number!</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Program continues running...</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="62-try-except-else-finally">6.2 try / except / else / finally</h3>
<p>Here's the full anatomy:</p>
<pre><code><span class="kw">def</span> <span class="fn">divide</span><span class="op">(</span>a<span class="op">,</span> b<span class="op">)</span><span class="op">:</span>
    <span class="kw">try</span><span class="op">:</span>
        <span class="cm"># Code that MIGHT raise an exception</span>
        result <span class="op">=</span> a <span class="op">/</span> b

    <span class="kw">except</span> <span class="nb">ZeroDivisionError</span><span class="op">:</span>
        <span class="cm"># Handle specific exception</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Error: Cannot divide by zero!</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="kw">None</span>

    <span class="kw">except</span> <span class="nb">TypeError</span> <span class="kw">as</span> e<span class="op">:</span>
        <span class="cm"># Catch the exception object to see the error message</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Error: Wrong types - </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="kw">None</span>

    <span class="kw">except</span> <span class="op">(</span><span class="nb">ValueError</span><span class="op">,</span> <span class="nb">ArithmeticError</span><span class="op">)</span> <span class="kw">as</span> e<span class="op">:</span>
        <span class="cm"># Catch multiple exception types</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Math error: </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="kw">None</span>

    <span class="kw">except</span> <span class="nb">Exception</span> <span class="kw">as</span> e<span class="op">:</span>
        <span class="cm"># Catch ANY exception (use as last resort)</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Unexpected error: </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="kw">None</span>

    <span class="kw">else</span><span class="op">:</span>
        <span class="cm"># Runs ONLY if NO exception occurred</span>
        <span class="cm"># This is the &quot;happy path&quot;</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Success! </span><span class="st">{</span>a<span class="st">}</span><span class="st"> / </span><span class="st">{</span>b<span class="st">}</span><span class="st"> = </span><span class="st">{</span>result<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> result

    <span class="kw">finally</span><span class="op">:</span>
        <span class="cm"># ALWAYS runs, whether there was an exception or not</span>
        <span class="cm"># Use for cleanup (closing files, database connections, etc.)</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Division operation complete.</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Test it:</span>
divide<span class="op">(</span><span class="num">10</span><span class="op">,</span> <span class="num">3</span><span class="op">)</span>     <span class="cm"># Success! 10 / 3 = 3.333... / Division operation complete.</span>
divide<span class="op">(</span><span class="num">10</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span>     <span class="cm"># Error: Cannot divide by zero! / Division operation complete.</span>
divide<span class="op">(</span><span class="st">&quot;</span><span class="st">10</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">3</span><span class="op">)</span>   <span class="cm"># Error: Wrong types... / Division operation complete.</span>
</code></pre>
<p><strong>When to use each block:</strong></p>
<ul><li><code class="inline">try</code>: Code that might fail</li>
<li><code class="inline">except</code>: Handle specific errors</li>
<li><code class="inline">else</code>: Code that should run only on success (keeps try block minimal)</li>
<li><code class="inline">finally</code>: Cleanup that must always happen (closing files, connections)</li></ul>
<h3 id="63-common-built-in-exceptions">6.3 Common Built-in Exceptions</h3>
<pre><code><span class="cm"># ValueError - wrong value for the type</span>
<span class="nb">int</span><span class="op">(</span><span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">)</span>              <span class="cm"># ValueError</span>

<span class="cm"># TypeError - wrong type</span>
<span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span> <span class="op">+</span> <span class="num">42</span>              <span class="cm"># TypeError</span>

<span class="cm"># KeyError - dict key not found</span>
d <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">a</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">1</span><span class="op">}</span>
d<span class="op">[</span><span class="st">&quot;</span><span class="st">b</span><span class="st">&quot;</span><span class="op">]</span>                    <span class="cm"># KeyError</span>

<span class="cm"># IndexError - list index out of range</span>
lst <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
lst<span class="op">[</span><span class="num">10</span><span class="op">]</span>                   <span class="cm"># IndexError</span>

<span class="cm"># AttributeError - object doesn&#x27;t have that attribute</span>
<span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">.</span>nonexistent<span class="op">(</span><span class="op">)</span>     <span class="cm"># AttributeError</span>

<span class="cm"># FileNotFoundError - file doesn&#x27;t exist</span>
<span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">nonexistent.txt</span><span class="st">&quot;</span><span class="op">)</span>   <span class="cm"># FileNotFoundError</span>

<span class="cm"># ImportError - can&#x27;t import module</span>
<span class="kw">import</span> nonexistent_module  <span class="cm"># ModuleNotFoundError (subclass of ImportError)</span>

<span class="cm"># ZeroDivisionError</span>
<span class="num">10</span> <span class="op">/</span> <span class="num">0</span>                    <span class="cm"># ZeroDivisionError</span>

<span class="cm"># NameError - variable not defined</span>
<span class="nb">print</span><span class="op">(</span>undefined_variable<span class="op">)</span>  <span class="cm"># NameError</span>
</code></pre>
<h3 id="64-custom-exceptions">6.4 Custom Exceptions</h3>
<p>Create your own exceptions for your application's specific errors:</p>
<pre><code><span class="kw">class</span> <span class="fn">ValidationError</span><span class="op">(</span><span class="nb">Exception</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Raised when input validation fails.&quot;&quot;&quot;</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> field<span class="op">,</span> message<span class="op">,</span> value<span class="op">=</span><span class="kw">None</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>field <span class="op">=</span> field
        <span class="nb">self</span><span class="op">.</span>message <span class="op">=</span> message
        <span class="nb">self</span><span class="op">.</span>value <span class="op">=</span> value
        <span class="nb">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="fn">__init__</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Validation failed for </span><span class="st">&#x27;</span><span class="st">{</span>field<span class="st">}</span><span class="st">&#x27;</span><span class="st">: </span><span class="st">{</span>message<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">class</span> <span class="fn">NotFoundError</span><span class="op">(</span><span class="nb">Exception</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Raised when a resource is not found.&quot;&quot;&quot;</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> resource_type<span class="op">,</span> resource_id<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>resource_type <span class="op">=</span> resource_type
        <span class="nb">self</span><span class="op">.</span>resource_id <span class="op">=</span> resource_id
        <span class="nb">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="fn">__init__</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>resource_type<span class="st">}</span><span class="st"> with id </span><span class="st">&#x27;</span><span class="st">{</span>resource_id<span class="st">}</span><span class="st">&#x27;</span><span class="st"> not found</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">class</span> <span class="fn">InsufficientFundsError</span><span class="op">(</span><span class="nb">Exception</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Raised when account balance is too low.&quot;&quot;&quot;</span>
    <span class="kw">pass</span>

<span class="cm"># Usage</span>
<span class="kw">def</span> <span class="fn">validate_age</span><span class="op">(</span>age<span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> <span class="kw">not</span> <span class="nb">isinstance</span><span class="op">(</span>age<span class="op">,</span> <span class="nb">int</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">raise</span> ValidationError<span class="op">(</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">must be an integer</span><span class="st">&quot;</span><span class="op">,</span> age<span class="op">)</span>
    <span class="kw">if</span> age <span class="op">&lt;</span> <span class="num">0</span><span class="op">:</span>
        <span class="kw">raise</span> ValidationError<span class="op">(</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">cannot be negative</span><span class="st">&quot;</span><span class="op">,</span> age<span class="op">)</span>
    <span class="kw">if</span> age <span class="op">&gt;</span> <span class="num">150</span><span class="op">:</span>
        <span class="kw">raise</span> ValidationError<span class="op">(</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">unrealistic value: </span><span class="st">{</span>age<span class="st">}</span><span class="st">&quot;</span><span class="op">,</span> age<span class="op">)</span>
    <span class="kw">return</span> age

<span class="kw">def</span> <span class="fn">get_user</span><span class="op">(</span>user_id<span class="op">)</span><span class="op">:</span>
    users <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">1</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">2</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">}</span>
    <span class="kw">if</span> user_id <span class="kw">not</span> <span class="kw">in</span> users<span class="op">:</span>
        <span class="kw">raise</span> NotFoundError<span class="op">(</span><span class="st">&quot;</span><span class="st">User</span><span class="st">&quot;</span><span class="op">,</span> user_id<span class="op">)</span>
    <span class="kw">return</span> users<span class="op">[</span>user_id<span class="op">]</span>

<span class="cm"># Using them:</span>
<span class="kw">try</span><span class="op">:</span>
    validate_age<span class="op">(</span><span class="op">-</span><span class="num">5</span><span class="op">)</span>
<span class="kw">except</span> ValidationError <span class="kw">as</span> e<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Caught: </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  Field: </span><span class="st">{</span>e<span class="op">.</span>field<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  Value: </span><span class="st">{</span>e<span class="op">.</span>value<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="cm"># Caught: Validation failed for &#x27;age&#x27;: cannot be negative</span>
<span class="cm">#   Field: age</span>
<span class="cm">#   Value: -5</span>

<span class="kw">try</span><span class="op">:</span>
    get_user<span class="op">(</span><span class="st">&quot;</span><span class="st">999</span><span class="st">&quot;</span><span class="op">)</span>
<span class="kw">except</span> NotFoundError <span class="kw">as</span> e<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Caught: </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  Type: </span><span class="st">{</span>e<span class="op">.</span>resource_type<span class="st">}</span><span class="st">, ID: </span><span class="st">{</span>e<span class="op">.</span>resource_id<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="65-exception-handling-with-logging-production-pattern">6.5 Exception Handling with Logging (Production Pattern)</h3>
<pre><code><span class="kw">import</span> logging
<span class="kw">import</span> traceback

logging<span class="op">.</span>basicConfig<span class="op">(</span>level<span class="op">=</span>logging<span class="op">.</span>INFO<span class="op">)</span>
logger <span class="op">=</span> logging<span class="op">.</span>getLogger<span class="op">(</span>__name__<span class="op">)</span>

<span class="kw">def</span> <span class="fn">process_data</span><span class="op">(</span>data<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Production-grade error handling pattern.&quot;&quot;&quot;</span>
    <span class="kw">try</span><span class="op">:</span>
        <span class="cm"># Validate input</span>
        <span class="kw">if</span> <span class="kw">not</span> data<span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Data cannot be empty</span><span class="st">&quot;</span><span class="op">)</span>

        <span class="cm"># Process</span>
        result <span class="op">=</span> transform<span class="op">(</span>data<span class="op">)</span>
        logger<span class="op">.</span>info<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Successfully processed </span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>data<span class="op">)</span><span class="st">}</span><span class="st"> items</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> result

    <span class="kw">except</span> <span class="nb">ValueError</span> <span class="kw">as</span> e<span class="op">:</span>
        <span class="cm"># Known, expected errors - log as warning</span>
        logger<span class="op">.</span>warning<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Invalid input: </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="kw">None</span>

    <span class="kw">except</span> <span class="nb">ConnectionError</span> <span class="kw">as</span> e<span class="op">:</span>
        <span class="cm"># Transient errors - might want to retry</span>
        logger<span class="op">.</span>error<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Connection failed: </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">raise</span>  <span class="cm"># Re-raise so caller can decide to retry</span>

    <span class="kw">except</span> <span class="nb">Exception</span><span class="op">:</span>
        <span class="cm"># Unknown errors - log full traceback for debugging</span>
        logger<span class="op">.</span>error<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Unexpected error processing data:</span><span class="st">\n</span><span class="st">{</span>traceback<span class="op">.</span>format_exc<span class="op">(</span><span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">raise</span>  <span class="cm"># Re-raise unknown errors (don&#x27;t swallow them!)</span>
</code></pre>
<h3 id="66-exception-handling-decorator-reusable-pattern">6.6 Exception Handling Decorator (Reusable Pattern)</h3>
<pre><code><span class="kw">import</span> time
<span class="kw">from</span> functools <span class="kw">import</span> wraps

<span class="kw">def</span> <span class="fn">retry</span><span class="op">(</span>max_attempts<span class="op">=</span><span class="num">3</span><span class="op">,</span> delay<span class="op">=</span><span class="num">1</span><span class="op">,</span> exceptions<span class="op">=</span><span class="op">(</span><span class="nb">Exception</span><span class="op">,</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Retry decorator - retries function on failure.</span>

<span class="st">    Args:</span>
<span class="st">        max_attempts: Maximum number of tries</span>
<span class="st">        delay: Seconds between retries</span>
<span class="st">        exceptions: Tuple of exception types to catch</span>

<span class="st">    Usage:</span>
<span class="st">        @retry(max_attempts=3, delay=2)</span>
<span class="st">        def flaky_api_call():</span>
<span class="st">            ...</span>
<span class="st">    &quot;&quot;&quot;</span>
    <span class="kw">def</span> <span class="fn">decorator</span><span class="op">(</span>func<span class="op">)</span><span class="op">:</span>
        <span class="dc">@wraps</span><span class="op">(</span>func<span class="op">)</span>
        <span class="kw">def</span> <span class="fn">wrapper</span><span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
            last_exception <span class="op">=</span> <span class="kw">None</span>
            <span class="kw">for</span> attempt <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> max_attempts <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>
                <span class="kw">try</span><span class="op">:</span>
                    <span class="kw">return</span> func<span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span>
                <span class="kw">except</span> exceptions <span class="kw">as</span> e<span class="op">:</span>
                    last_exception <span class="op">=</span> e
                    <span class="kw">if</span> attempt <span class="op">&lt;</span> max_attempts<span class="op">:</span>
                        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  Attempt </span><span class="st">{</span>attempt<span class="st">}</span><span class="st">/</span><span class="st">{</span>max_attempts<span class="st">}</span><span class="st"> failed: </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
                        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  Retrying in </span><span class="st">{</span>delay<span class="st">}</span><span class="st">s...</span><span class="st">&quot;</span><span class="op">)</span>
                        time<span class="op">.</span>sleep<span class="op">(</span>delay<span class="op">)</span>
                    <span class="kw">else</span><span class="op">:</span>
                        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  All </span><span class="st">{</span>max_attempts<span class="st">}</span><span class="st"> attempts failed!</span><span class="st">&quot;</span><span class="op">)</span>
            <span class="kw">raise</span> last_exception
        <span class="kw">return</span> wrapper
    <span class="kw">return</span> decorator

<span class="cm"># Usage:</span>
<span class="kw">import</span> random

<span class="dc">@retry</span><span class="op">(</span>max_attempts<span class="op">=</span><span class="num">3</span><span class="op">,</span> delay<span class="op">=</span><span class="num">1</span><span class="op">)</span>
<span class="kw">def</span> <span class="fn">unreliable_api_call</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Simulates a flaky API that fails randomly.&quot;&quot;&quot;</span>
    <span class="kw">if</span> random<span class="op">.</span>random<span class="op">(</span><span class="op">)</span> <span class="op">&lt;</span> <span class="num">0.7</span><span class="op">:</span>  <span class="cm"># 70% chance of failure</span>
        <span class="kw">raise</span> <span class="nb">ConnectionError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Server unavailable</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">status</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">success</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">data</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span><span class="op">}</span>

<span class="cm"># This will retry up to 3 times:</span>
<span class="kw">try</span><span class="op">:</span>
    result <span class="op">=</span> unreliable_api_call<span class="op">(</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Got result: </span><span class="st">{</span>result<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="kw">except</span> <span class="nb">ConnectionError</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">API is down, giving up.</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="exercise-61-build-a-robust-input-validator">Exercise 6.1: Build a Robust Input Validator</h3>
<p>Write a function <code class="inline">get_valid_number()</code> that keeps asking the user for input until they enter a valid number between 1 and 100.</p>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">def</span> <span class="fn">get_valid_number</span><span class="op">(</span>prompt<span class="op">=</span><span class="st">&quot;</span><span class="st">Enter a number (1-100): </span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">while</span> <span class="kw">True</span><span class="op">:</span>
        <span class="kw">try</span><span class="op">:</span>
            value <span class="op">=</span> <span class="nb">int</span><span class="op">(</span><span class="nb">input</span><span class="op">(</span>prompt<span class="op">)</span><span class="op">)</span>
            <span class="kw">if</span> <span class="num">1</span> <span class="op">&lt;</span><span class="op">=</span> value <span class="op">&lt;</span><span class="op">=</span> <span class="num">100</span><span class="op">:</span>
                <span class="kw">return</span> value
            <span class="kw">else</span><span class="op">:</span>
                <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  </span><span class="st">{</span>value<span class="st">}</span><span class="st"> is out of range. Must be 1-100.</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">except</span> <span class="nb">ValueError</span><span class="op">:</span>
            <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">  That</span><span class="st">&#x27;</span><span class="st">s not a valid number. Try again.</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">except</span> <span class="nb">KeyboardInterrupt</span><span class="op">:</span>
            <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">\n</span><span class="st">  Cancelled.</span><span class="st">&quot;</span><span class="op">)</span>
            <span class="kw">return</span> <span class="kw">None</span>

number <span class="op">=</span> get_valid_number<span class="op">(</span><span class="op">)</span>
<span class="kw">if</span> number<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">You chose: </span><span class="st">{</span>number<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-7-file-io-serialization"><h2>Chapter 7: File I/O & Serialization</h2><div class="line"></div><span class="badge" style="background:var(--cyan-dim);color:var(--cyan)">Chapter 7</span></div>
<h3 id="71-reading-and-writing-text-files">7.1 Reading and Writing Text Files</h3>
<pre><code><span class="cm"># ===== WRITING =====</span>

<span class="cm"># Write (creates file or OVERWRITES existing)</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">output.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">w</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    f<span class="op">.</span>write<span class="op">(</span><span class="st">&quot;</span><span class="st">Line 1</span><span class="st">\n</span><span class="st">&quot;</span><span class="op">)</span>
    f<span class="op">.</span>write<span class="op">(</span><span class="st">&quot;</span><span class="st">Line 2</span><span class="st">\n</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Write multiple lines</span>
lines <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Hello</span><span class="st">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">World</span><span class="st">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Python</span><span class="st">\n</span><span class="st">&quot;</span><span class="op">]</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">output.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">w</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    f<span class="op">.</span>writelines<span class="op">(</span>lines<span class="op">)</span>

<span class="cm"># Append (adds to end of file)</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">output.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">a</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    f<span class="op">.</span>write<span class="op">(</span><span class="st">&quot;</span><span class="st">Appended line</span><span class="st">\n</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># ===== READING =====</span>

<span class="cm"># Read entire file as one string</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">output.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    content <span class="op">=</span> f<span class="op">.</span>read<span class="op">(</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span>content<span class="op">)</span>

<span class="cm"># Read all lines into a list</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">output.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    lines <span class="op">=</span> f<span class="op">.</span>readlines<span class="op">(</span><span class="op">)</span>  <span class="cm"># Each line includes \n</span>
    <span class="kw">for</span> line <span class="kw">in</span> lines<span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span>line<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># strip() removes \n</span>

<span class="cm"># Read line by line (memory efficient for large files)</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">output.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    <span class="kw">for</span> line <span class="kw">in</span> f<span class="op">:</span>  <span class="cm"># f is an iterator - reads one line at a time</span>
        <span class="nb">print</span><span class="op">(</span>line<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="cm"># Read first N lines</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">output.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    <span class="kw">for</span> i<span class="op">,</span> line <span class="kw">in</span> <span class="nb">enumerate</span><span class="op">(</span>f<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> i <span class="op">&gt;</span><span class="op">=</span> <span class="num">5</span><span class="op">:</span>  <span class="cm"># Read only first 5 lines</span>
            <span class="kw">break</span>
        <span class="nb">print</span><span class="op">(</span>line<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">)</span>
</code></pre>
<p><strong>The <code class="inline">with</code> statement</strong> - why you should always use it:</p>
<pre><code><span class="cm"># WITHOUT with (bad - you might forget to close)</span>
f <span class="op">=</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">file.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span>
content <span class="op">=</span> f<span class="op">.</span>read<span class="op">(</span><span class="op">)</span>
f<span class="op">.</span>close<span class="op">(</span><span class="op">)</span>  <span class="cm"># Easy to forget, especially if an error occurs above</span>

<span class="cm"># WITH with (good - auto-closes even if error occurs)</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">file.txt</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    content <span class="op">=</span> f<span class="op">.</span>read<span class="op">(</span><span class="op">)</span>
<span class="cm"># File is automatically closed here, even if an exception happened</span>
</code></pre>
<h3 id="72-pathlib---modern-file-operations">7.2 pathlib - Modern File Operations</h3>
<p><code class="inline">pathlib</code> is the modern, Pythonic way to work with file paths:</p>
<pre><code><span class="kw">from</span> pathlib <span class="kw">import</span> Path

<span class="cm"># Create path objects</span>
p <span class="op">=</span> Path<span class="op">(</span><span class="st">&quot;</span><span class="st">data/output.txt</span><span class="st">&quot;</span><span class="op">)</span>
home <span class="op">=</span> Path<span class="op">.</span>home<span class="op">(</span><span class="op">)</span>           <span class="cm"># /Users/username (Mac) or C:\Users\username (Win)</span>
cwd <span class="op">=</span> Path<span class="op">.</span>cwd<span class="op">(</span><span class="op">)</span>             <span class="cm"># Current working directory</span>

<span class="cm"># Path properties</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">.</span>name<span class="op">)</span>       <span class="cm"># &quot;output.txt&quot;</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">.</span>stem<span class="op">)</span>       <span class="cm"># &quot;output&quot;</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">.</span>suffix<span class="op">)</span>     <span class="cm"># &quot;.txt&quot;</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">.</span>parent<span class="op">)</span>     <span class="cm"># &quot;data&quot;</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">.</span>exists<span class="op">(</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># True or False</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">.</span>is_file<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># True if it&#x27;s a file</span>
<span class="nb">print</span><span class="op">(</span>p<span class="op">.</span>is_dir<span class="op">(</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># True if it&#x27;s a directory</span>

<span class="cm"># Create directories</span>
Path<span class="op">(</span><span class="st">&quot;</span><span class="st">data/processed</span><span class="st">&quot;</span><span class="op">)</span><span class="op">.</span>mkdir<span class="op">(</span>parents<span class="op">=</span><span class="kw">True</span><span class="op">,</span> exist_ok<span class="op">=</span><span class="kw">True</span><span class="op">)</span>
<span class="cm"># parents=True: create parent dirs too</span>
<span class="cm"># exist_ok=True: don&#x27;t error if already exists</span>

<span class="cm"># Read and write (simple!)</span>
p <span class="op">=</span> Path<span class="op">(</span><span class="st">&quot;</span><span class="st">data/output.txt</span><span class="st">&quot;</span><span class="op">)</span>
p<span class="op">.</span>parent<span class="op">.</span>mkdir<span class="op">(</span>parents<span class="op">=</span><span class="kw">True</span><span class="op">,</span> exist_ok<span class="op">=</span><span class="kw">True</span><span class="op">)</span>
p<span class="op">.</span>write_text<span class="op">(</span><span class="st">&quot;</span><span class="st">Hello from pathlib!</span><span class="st">&quot;</span><span class="op">)</span>
content <span class="op">=</span> p<span class="op">.</span>read_text<span class="op">(</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>content<span class="op">)</span>

<span class="cm"># Find files</span>
<span class="kw">for</span> py_file <span class="kw">in</span> Path<span class="op">(</span><span class="st">&quot;</span><span class="st">.</span><span class="st">&quot;</span><span class="op">)</span><span class="op">.</span>rglob<span class="op">(</span><span class="st">&quot;</span><span class="st">*.py</span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>       <span class="cm"># Recursive glob</span>
    <span class="nb">print</span><span class="op">(</span>py_file<span class="op">)</span>

<span class="kw">for</span> txt_file <span class="kw">in</span> Path<span class="op">(</span><span class="st">&quot;</span><span class="st">data</span><span class="st">&quot;</span><span class="op">)</span><span class="op">.</span>glob<span class="op">(</span><span class="st">&quot;</span><span class="st">*.txt</span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>    <span class="cm"># Non-recursive</span>
    <span class="nb">print</span><span class="op">(</span>txt_file<span class="op">)</span>

<span class="cm"># Join paths (works across OS)</span>
config_path <span class="op">=</span> Path<span class="op">.</span>home<span class="op">(</span><span class="op">)</span> <span class="op">/</span> <span class="st">&quot;</span><span class="st">.config</span><span class="st">&quot;</span> <span class="op">/</span> <span class="st">&quot;</span><span class="st">myapp</span><span class="st">&quot;</span> <span class="op">/</span> <span class="st">&quot;</span><span class="st">settings.json</span><span class="st">&quot;</span>
</code></pre>
<h3 id="73-json">7.3 JSON</h3>
<p>JSON is the most common format for data exchange:</p>
<pre><code><span class="kw">import</span> json

<span class="cm"># ===== Python dict &lt;-&gt; JSON string =====</span>

data <span class="op">=</span> <span class="op">{</span>
    <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">30</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">hobbies</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">reading</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">coding</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">address</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">{</span>
        <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">,</span>
        <span class="st">&quot;</span><span class="st">state</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">NY</span><span class="st">&quot;</span>
    <span class="op">}</span>
<span class="op">}</span>

<span class="cm"># Python -&gt; JSON string</span>
json_str <span class="op">=</span> json<span class="op">.</span>dumps<span class="op">(</span>data<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>json_str<span class="op">)</span>
<span class="cm"># {&quot;name&quot;: &quot;Alice&quot;, &quot;age&quot;: 30, &quot;hobbies&quot;: [&quot;reading&quot;, &quot;coding&quot;], ...}</span>

<span class="cm"># Pretty-printed JSON</span>
json_pretty <span class="op">=</span> json<span class="op">.</span>dumps<span class="op">(</span>data<span class="op">,</span> indent<span class="op">=</span><span class="num">2</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>json_pretty<span class="op">)</span>

<span class="cm"># JSON string -&gt; Python dict</span>
parsed <span class="op">=</span> json<span class="op">.</span>loads<span class="op">(</span>json_str<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>parsed<span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>   <span class="cm"># &quot;Alice&quot;</span>
<span class="nb">print</span><span class="op">(</span>parsed<span class="op">[</span><span class="st">&quot;</span><span class="st">hobbies</span><span class="st">&quot;</span><span class="op">]</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>  <span class="cm"># &quot;reading&quot;</span>

<span class="cm"># ===== JSON files =====</span>

<span class="cm"># Write to file</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">data.json</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">w</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    json<span class="op">.</span>dump<span class="op">(</span>data<span class="op">,</span> f<span class="op">,</span> indent<span class="op">=</span><span class="num">2</span><span class="op">)</span>

<span class="cm"># Read from file</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">data.json</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    loaded <span class="op">=</span> json<span class="op">.</span>load<span class="op">(</span>f<span class="op">)</span>
</code></pre>
<h3 id="74-csv">7.4 CSV</h3>
<pre><code><span class="kw">import</span> csv

<span class="cm"># ===== Writing CSV =====</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">students.csv</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">w</span><span class="st">&quot;</span><span class="op">,</span> newline<span class="op">=</span><span class="st">&quot;</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    writer <span class="op">=</span> csv<span class="op">.</span>writer<span class="op">(</span>f<span class="op">)</span>
    writer<span class="op">.</span>writerow<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">Name</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Age</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Grade</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>   <span class="cm"># Header</span>
    writer<span class="op">.</span>writerow<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">30</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">A</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
    writer<span class="op">.</span>writerow<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">25</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">B</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
    writer<span class="op">.</span>writerow<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">35</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">A</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>

<span class="cm"># ===== Reading CSV =====</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">students.csv</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    reader <span class="op">=</span> csv<span class="op">.</span>reader<span class="op">(</span>f<span class="op">)</span>
    header <span class="op">=</span> <span class="nb">next</span><span class="op">(</span>reader<span class="op">)</span>     <span class="cm"># Read header row</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Columns: </span><span class="st">{</span>header<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">for</span> row <span class="kw">in</span> reader<span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  </span><span class="st">{</span>row<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="st">}</span><span class="st">, age </span><span class="st">{</span>row<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="st">}</span><span class="st">, grade </span><span class="st">{</span>row<span class="op">[</span><span class="num">2</span><span class="op">]</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># ===== DictReader (much nicer - access by column name) =====</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">students.csv</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    reader <span class="op">=</span> csv<span class="op">.</span>DictReader<span class="op">(</span>f<span class="op">)</span>
    <span class="kw">for</span> row <span class="kw">in</span> reader<span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  </span><span class="st">{</span>row<span class="op">[</span><span class="st">&#x27;</span><span class="st">Name</span><span class="st">&#x27;</span><span class="op">]</span><span class="st">}</span><span class="st">: </span><span class="st">{</span>row<span class="op">[</span><span class="st">&#x27;</span><span class="st">Grade</span><span class="st">&#x27;</span><span class="op">]</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="75-yaml">7.5 YAML</h3>
<pre><code><span class="cm"># pip install pyyaml</span>
<span class="kw">import</span> yaml

<span class="cm"># Read YAML</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">config.yaml</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    config <span class="op">=</span> yaml<span class="op">.</span>safe_load<span class="op">(</span>f<span class="op">)</span>  <span class="cm"># Always use safe_load!</span>

<span class="cm"># Write YAML</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">output.yaml</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">w</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    yaml<span class="op">.</span>dump<span class="op">(</span>config<span class="op">,</span> f<span class="op">,</span> default_flow_style<span class="op">=</span><span class="kw">False</span><span class="op">)</span>

<span class="cm"># Example YAML file (config.yaml):</span>
<span class="cm"># database:</span>
<span class="cm">#   host: localhost</span>
<span class="cm">#   port: 5432</span>
<span class="cm">#   name: mydb</span>
<span class="cm"># features:</span>
<span class="cm">#   - logging</span>
<span class="cm">#   - caching</span>
</code></pre>
<h3 id="76-pickle-python-object-serialization">7.6 Pickle (Python Object Serialization)</h3>
<pre><code><span class="kw">import</span> pickle

<span class="cm"># Pickle can serialize ANY Python object</span>
data <span class="op">=</span> <span class="op">{</span>
    <span class="st">&quot;</span><span class="st">model_weights</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">0.5</span><span class="op">,</span> <span class="num">0.3</span><span class="op">,</span> <span class="num">0.2</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">metadata</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">version</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">1.0</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">created</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">2024-01-15</span><span class="st">&quot;</span><span class="op">}</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">history</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="num">0.95</span><span class="op">)</span><span class="op">,</span> <span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">0.97</span><span class="op">)</span><span class="op">]</span>
<span class="op">}</span>

<span class="cm"># Save</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">model.pkl</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">wb</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>  <span class="cm"># &#x27;wb&#x27; = write binary</span>
    pickle<span class="op">.</span>dump<span class="op">(</span>data<span class="op">,</span> f<span class="op">)</span>

<span class="cm"># Load</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">model.pkl</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">rb</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>  <span class="cm"># &#x27;rb&#x27; = read binary</span>
    loaded <span class="op">=</span> pickle<span class="op">.</span>load<span class="op">(</span>f<span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>loaded<span class="op">[</span><span class="st">&quot;</span><span class="st">model_weights</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>  <span class="cm"># [0.5, 0.3, 0.2]</span>
</code></pre>
<blockquote><strong>SECURITY WARNING</strong>: Never unpickle data from untrusted sources! Pickle can execute arbitrary code. Use JSON for data exchange between systems.</blockquote>
<h3 id="exercise-71-csv-to-json-converter">Exercise 7.1: CSV to JSON Converter</h3>
<p>Read a CSV file, transform the data, and write to JSON:</p>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">import</span> csv
<span class="kw">import</span> json

<span class="kw">def</span> <span class="fn">csv_to_json</span><span class="op">(</span>csv_path<span class="op">,</span> json_path<span class="op">)</span><span class="op">:</span>
    records <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
    <span class="kw">with</span> <span class="nb">open</span><span class="op">(</span>csv_path<span class="op">,</span> <span class="st">&quot;</span><span class="st">r</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
        reader <span class="op">=</span> csv<span class="op">.</span>DictReader<span class="op">(</span>f<span class="op">)</span>
        <span class="kw">for</span> row <span class="kw">in</span> reader<span class="op">:</span>
            records<span class="op">.</span>append<span class="op">(</span>row<span class="op">)</span>

    <span class="kw">with</span> <span class="nb">open</span><span class="op">(</span>json_path<span class="op">,</span> <span class="st">&quot;</span><span class="st">w</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
        json<span class="op">.</span>dump<span class="op">(</span>records<span class="op">,</span> f<span class="op">,</span> indent<span class="op">=</span><span class="num">2</span><span class="op">)</span>

    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Converted </span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>records<span class="op">)</span><span class="st">}</span><span class="st"> records from </span><span class="st">{</span>csv_path<span class="st">}</span><span class="st"> to </span><span class="st">{</span>json_path<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

csv_to_json<span class="op">(</span><span class="st">&quot;</span><span class="st">students.csv</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">students.json</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-8-modules-packages-imports"><h2>Chapter 8: Modules, Packages & Imports</h2><div class="line"></div><span class="badge" style="background:var(--purple-dim);color:var(--purple)">Chapter 8</span></div>
<h3 id="81-what-are-modules-and-packages">8.1 What Are Modules and Packages?</h3>
<table><thead><tr><th>Term</th><th>What it is</th><th>Example</th></tr></thead><tbody><tr><td><strong>Module</strong></td><td>A single <code class="inline">.py</code> file</td><td><code class="inline">math.py</code>, <code class="inline">utils.py</code></td></tr>
<tr><td><strong>Package</strong></td><td>A folder with <code class="inline">__init__.py</code> containing modules</td><td><code class="inline">requests/</code>, <code class="inline">pandas/</code></td></tr>
<tr><td><strong>Library</strong></td><td>A collection of packages (installed via pip)</td><td><code class="inline">pandas</code>, <code class="inline">flask</code></td></tr>
<tr><td><strong>Framework</strong></td><td>An opinionated library that controls the structure</td><td><code class="inline">Django</code>, <code class="inline">FastAPI</code></td></tr></tbody></table>
<h3 id="82-import-styles">8.2 Import Styles</h3>
<pre><code><span class="cm"># Import the entire module</span>
<span class="kw">import</span> os
<span class="nb">print</span><span class="op">(</span>os<span class="op">.</span>path<span class="op">.</span>exists<span class="op">(</span><span class="st">&quot;</span><span class="st">/tmp</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>

<span class="cm"># Import specific things from a module</span>
<span class="kw">from</span> pathlib <span class="kw">import</span> Path
<span class="kw">from</span> collections <span class="kw">import</span> defaultdict<span class="op">,</span> Counter

<span class="cm"># Import with an alias (common for data science)</span>
<span class="kw">import</span> numpy <span class="kw">as</span> np
<span class="kw">import</span> pandas <span class="kw">as</span> pd
<span class="kw">import</span> matplotlib.pyplot <span class="kw">as</span> plt

<span class="cm"># Import everything (AVOID - clutters namespace)</span>
<span class="cm"># from os import *  # Don&#x27;t do this in production code</span>
</code></pre>
<h3 id="83-creating-your-own-package">8.3 Creating Your Own Package</h3>
<pre><code>myproject<span class="op">/</span>
 mypackage<span class="op">/</span>
    <span class="fn">__init__</span><span class="op">.</span>py       <span class="cm"># Makes this directory a package</span>
    utils<span class="op">.</span>py
    models<span class="op">.</span>py
    subpackage<span class="op">/</span>
        <span class="fn">__init__</span><span class="op">.</span>py
        helpers<span class="op">.</span>py
 main<span class="op">.</span>py
 tests<span class="op">/</span>
     test_utils<span class="op">.</span>py
</code></pre>
<pre><code><span class="cm"># mypackage/__init__.py</span>
<span class="st">&quot;&quot;&quot;My package - does amazing things.&quot;&quot;&quot;</span>

<span class="cm"># Control what gets imported with &quot;from mypackage import *&quot;</span>
__all__ <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">utils</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">models</span><span class="st">&quot;</span><span class="op">]</span>

<span class="cm"># Convenience imports (so users can do: from mypackage import MyClass)</span>
<span class="kw">from</span> .utils <span class="kw">import</span> useful_function
<span class="kw">from</span> .models <span class="kw">import</span> MyModel

__version__ <span class="op">=</span> <span class="st">&quot;</span><span class="st">1.0.0</span><span class="st">&quot;</span>
</code></pre>
<pre><code><span class="cm"># mypackage/utils.py</span>
<span class="kw">def</span> <span class="fn">useful_function</span><span class="op">(</span>x<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> x <span class="op">*</span> <span class="num">2</span>
</code></pre>
<pre><code><span class="cm"># main.py</span>
<span class="kw">from</span> mypackage <span class="kw">import</span> useful_function
<span class="kw">from</span> mypackage.models <span class="kw">import</span> MyModel
</code></pre>
<h3 id="84-__name__-and-__main__">8.4 <code class="inline">__name__</code> and <code class="inline">__main__</code></h3>
<p>Every Python file has a special variable <code class="inline">__name__</code>:</p>
<ul><li>When run directly: <code class="inline">__name__</code> is <code class="inline">&quot;__main__&quot;</code></li>
<li>When imported: <code class="inline">__name__</code> is the module's name</li></ul>
<pre><code><span class="cm"># mymodule.py</span>
<span class="kw">def</span> <span class="fn">main</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Running as main program</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">helper</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">I</span><span class="st">&#x27;</span><span class="st">m a helper function</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># This block only runs when the file is executed directly</span>
<span class="cm"># NOT when imported by another module</span>
<span class="kw">if</span> __name__ <span class="op">==</span> <span class="st">&quot;</span><span class="st">__main__</span><span class="st">&quot;</span><span class="op">:</span>
    main<span class="op">(</span><span class="op">)</span>
</code></pre>
<pre><code><span class="cm"># another_file.py</span>
<span class="kw">import</span> mymodule          <span class="cm"># Does NOT run main()</span>
mymodule<span class="op">.</span>helper<span class="op">(</span><span class="op">)</span>       <span class="cm"># Can use the functions</span>
</code></pre>
<h3 id="85-import-order-pep-8">8.5 Import Order (PEP 8)</h3>
<pre><code><span class="cm"># 1. Standard library imports</span>
<span class="kw">import</span> os
<span class="kw">import</span> sys
<span class="kw">from</span> pathlib <span class="kw">import</span> Path

<span class="cm"># 2. Third-party imports (installed via pip)</span>
<span class="kw">import</span> pandas <span class="kw">as</span> pd
<span class="kw">import</span> numpy <span class="kw">as</span> np
<span class="kw">import</span> requests

<span class="cm"># 3. Local application imports</span>
<span class="kw">from</span> mypackage <span class="kw">import</span> utils
<span class="kw">from</span> mypackage.models <span class="kw">import</span> UserModel
</code></pre>
<hr>
<div class="section-divider" id="chapter-9-python-environment-pip-dependency-management"><h2>Chapter 9: Python Environment, pip & Dependency Management</h2><div class="line"></div><span class="badge" style="background:var(--purple-dim);color:var(--purple)">Chapter 9</span></div>
<h3 id="91-virtual-environments-why-and-how">9.1 Virtual Environments: Why and How</h3>
<p><strong>Why</strong>: Without virtual environments, all projects share the same Python packages. Project A might need <code class="inline">requests==2.28</code> while Project B needs <code class="inline">requests==2.31</code>. Virtual environments isolate each project's dependencies.</p>
<pre><code><span class="cm"># CREATE a virtual environment</span>
python -m venv .venv

<span class="cm"># ACTIVATE it</span>
<span class="cm"># Mac/Linux:</span>
<span class="nb">source</span> .venv/bin/activate
<span class="cm"># Windows:</span>
.venv<span class="st">\S</span>cripts<span class="st">\a</span>ctivate

<span class="cm"># Your prompt changes to show (.venv):</span>
<span class="cm"># (.venv) $ python --version</span>

<span class="cm"># INSTALL packages (only affects this virtual environment)</span>
pip install requests pandas

<span class="cm"># DEACTIVATE when done</span>
deactivate
</code></pre>
<h3 id="92-pip---python-package-manager">9.2 pip - Python Package Manager</h3>
<pre><code><span class="cm"># Install a package</span>
pip install requests

<span class="cm"># Install a specific version</span>
pip install requests<span class="op">=</span><span class="op">=</span><span class="num">2</span>.28.0

<span class="cm"># Install a version range</span>
pip install <span class="st">&quot;requests&gt;=2.28,&lt;3.0&quot;</span>

<span class="cm"># pip install vs python -m pip install</span>
<span class="cm"># IMPORTANT: Always prefer python -m pip install</span>
<span class="cm"># This ensures you&#x27;re using the pip for YOUR Python, not some other one</span>
python -m pip install requests

<span class="cm"># Upgrade a package</span>
pip install --upgrade requests

<span class="cm"># See what&#x27;s installed</span>
pip list
pip show requests    <span class="cm"># Detailed info about one package</span>

<span class="cm"># Save your project&#x27;s dependencies</span>
pip freeze &gt; requirements.txt

<span class="cm"># Install from requirements file (reproduce environment)</span>
pip install -r requirements.txt

<span class="cm"># Uninstall</span>
pip uninstall requests
</code></pre>
<h3 id="93-common-pip-issues-how-to-fix-them">9.3 Common pip Issues & How to Fix Them</h3>
<p><strong>Issue: "pip: command not found"</strong></p>
<pre><code><span class="cm"># Use python -m pip instead:</span>
python -m pip install package_name
<span class="cm"># Or upgrade pip:</span>
python -m pip install --upgrade pip
</code></pre>
<p><strong>Issue: Permission denied</strong></p>
<pre><code><span class="cm"># Option 1: Use --user (installs just for your user)</span>
pip install --user package_name

<span class="cm"># Option 2 (RECOMMENDED): Use a virtual environment</span>
python -m venv .venv
<span class="nb">source</span> .venv/bin/activate
pip install package_name
</code></pre>
<p><strong>Issue: SSL certificate error (common behind corporate firewalls)</strong></p>
<pre><code>pip install --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org package_name
</code></pre>
<p><strong>Issue: Wrong package installed (e.g., <code class="inline">jwt</code> vs <code class="inline">PyJWT</code>)</strong></p>
<pre><code><span class="cm"># Diagnose: check what you actually have</span>
python -c <span class="st">&quot;import jwt; print(jwt.__file__); print(dir(jwt))&quot;</span>

<span class="cm"># Fix: remove wrong package, install correct one</span>
pip uninstall jwt PyJWT
pip install PyJWT
</code></pre>
<p><strong>Issue: Dependency conflict</strong></p>
<pre><code><span class="cm"># Force reinstall one package (ignoring dependencies)</span>
pip install --force-reinstall --no-deps package_name

<span class="cm"># Nuclear option: reinstall everything</span>
pip install --force-reinstall package_name
</code></pre>
<p><strong>Issue: "externally-managed-environment" (newer Ubuntu/macOS)</strong></p>
<pre><code><span class="cm"># This means your OS protects system Python. ALWAYS use virtual envs:</span>
python -m venv .venv
<span class="nb">source</span> .venv/bin/activate
pip install package_name
</code></pre>
<h3 id="94-pipenv-better-dependency-management">9.4 Pipenv (Better Dependency Management)</h3>
<p>Pipenv combines <code class="inline">pip</code> + <code class="inline">virtualenv</code> into one tool:</p>
<pre><code><span class="cm"># Install pipenv</span>
pip install pipenv

<span class="cm"># Start a new project (creates Pipfile + virtual env)</span>
pipenv install requests

<span class="cm"># Install dev-only packages</span>
pipenv install pytest --dev

<span class="cm"># Activate the virtual environment</span>
pipenv shell

<span class="cm"># Run a command in the virtual env (without activating)</span>
pipenv run python script.py
pipenv run pytest tests/

<span class="cm"># Lock dependencies for reproducible builds</span>
pipenv lock

<span class="cm"># Install everything from Pipfile.lock</span>
pipenv install

<span class="cm"># Convert existing requirements.txt to Pipfile</span>
pipenv install -r requirements.txt

<span class="cm"># Remove virtual environment</span>
pipenv --rm
</code></pre>
<hr>
<div class="section-divider" id="chapter-10-debugging-profiling"><h2>Chapter 10: Debugging & Profiling</h2><div class="line"></div><span class="badge" style="background:var(--blue-dim);color:var(--blue)">Chapter 10</span></div>
<p>This is one of the most important skills for any developer. Let's cover every technique from simple to advanced.</p>
<h3 id="101-print-debugging-the-basics">10.1 Print Debugging (The Basics)</h3>
<p>The simplest debugging technique. Good for quick checks, but remove before committing:</p>
<pre><code><span class="kw">def</span> <span class="fn">calculate_total</span><span class="op">(</span>items<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">DEBUG: items received = </span><span class="st">{</span>items<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># What did we get?</span>

    total <span class="op">=</span> <span class="num">0</span>
    <span class="kw">for</span> item <span class="kw">in</span> items<span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">DEBUG: processing item = </span><span class="st">{</span>item<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># What are we processing?</span>
        price <span class="op">=</span> item<span class="op">[</span><span class="st">&quot;</span><span class="st">price</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">*</span> item<span class="op">[</span><span class="st">&quot;</span><span class="st">quantity</span><span class="st">&quot;</span><span class="op">]</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">DEBUG: price for </span><span class="st">{</span>item<span class="op">[</span><span class="st">&#x27;</span><span class="st">name</span><span class="st">&#x27;</span><span class="op">]</span><span class="st">}</span><span class="st"> = </span><span class="st">{</span>price<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Intermediate result</span>
        total <span class="op">+</span><span class="op">=</span> price

    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">DEBUG: final total = </span><span class="st">{</span>total<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Final result</span>
    <span class="kw">return</span> total

<span class="cm"># Better: use f-strings with variable names</span>
x <span class="op">=</span> <span class="num">42</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>x <span class="st">= }</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Output: x = 42  (Python 3.8+)</span>

items <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>items<span class="op">)</span> <span class="st">= }</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Output: len(items) = 3</span>
</code></pre>
<h3 id="102-pdb---python-debugger-step-by-step-guide">10.2 pdb - Python Debugger (Step-by-Step Guide)</h3>
<p>pdb lets you pause your program and inspect everything interactively. This is <strong>much more powerful</strong> than print debugging.</p>
<p><strong>How to start pdb:</strong></p>
<pre><code><span class="cm"># Method 1: Add breakpoint() where you want to pause (Python 3.7+)</span>
<span class="kw">def</span> <span class="fn">calculate_discount</span><span class="op">(</span>price<span class="op">,</span> discount_pct<span class="op">)</span><span class="op">:</span>
    <span class="nb">breakpoint</span><span class="op">(</span><span class="op">)</span>  <span class="cm"># Program pauses here</span>
    discount <span class="op">=</span> price <span class="op">*</span> discount_pct <span class="op">/</span> <span class="num">100</span>
    final_price <span class="op">=</span> price <span class="op">-</span> discount
    <span class="kw">return</span> final_price

result <span class="op">=</span> calculate_discount<span class="op">(</span><span class="num">100</span><span class="op">,</span> <span class="num">20</span><span class="op">)</span>
</code></pre>
<pre><code><span class="cm"># Method 2: Old style (works on all Python 3 versions)</span>
<span class="kw">import</span> pdb

<span class="kw">def</span> <span class="fn">calculate_discount</span><span class="op">(</span>price<span class="op">,</span> discount_pct<span class="op">)</span><span class="op">:</span>
    pdb<span class="op">.</span>set_trace<span class="op">(</span><span class="op">)</span>  <span class="cm"># Same effect as breakpoint()</span>
    discount <span class="op">=</span> price <span class="op">*</span> discount_pct <span class="op">/</span> <span class="num">100</span>
    final_price <span class="op">=</span> price <span class="op">-</span> discount
    <span class="kw">return</span> final_price
</code></pre>
<p><strong>When you run this, you'll see the pdb prompt:</strong></p>
<pre><code><span class="op">&gt;</span> <span class="op">/</span>path<span class="op">/</span>to<span class="op">/</span>script<span class="op">.</span>py<span class="op">(</span><span class="num">3</span><span class="op">)</span>calculate_discount<span class="op">(</span><span class="op">)</span>
<span class="op">-</span><span class="op">&gt;</span> discount <span class="op">=</span> price <span class="op">*</span> discount_pct <span class="op">/</span> <span class="num">100</span>
<span class="op">(</span>Pdb<span class="op">)</span>
</code></pre>
<p><strong>Now you can type commands. Here's a complete walkthrough:</strong></p>
<pre><code><span class="op">(</span>Pdb<span class="op">)</span> p price            <span class="cm"># PRINT a variable&#x27;s value</span>
<span class="num">100</span>
<span class="op">(</span>Pdb<span class="op">)</span> p discount_pct     <span class="cm"># Print another variable</span>
<span class="num">20</span>
<span class="op">(</span>Pdb<span class="op">)</span> p price <span class="op">*</span> discount_pct <span class="op">/</span> <span class="num">100</span>    <span class="cm"># Print ANY expression</span>
<span class="num">20.0</span>
<span class="op">(</span>Pdb<span class="op">)</span> pp <span class="nb">locals</span><span class="op">(</span><span class="op">)</span>        <span class="cm"># PRETTY-PRINT all local variables</span>
<span class="op">{</span><span class="st">&#x27;</span><span class="st">discount_pct</span><span class="st">&#x27;</span><span class="op">:</span> <span class="num">20</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">price</span><span class="st">&#x27;</span><span class="op">:</span> <span class="num">100</span><span class="op">}</span>

<span class="op">(</span>Pdb<span class="op">)</span> n                  <span class="cm"># NEXT - execute current line, move to next</span>
<span class="op">&gt;</span> <span class="op">/</span>path<span class="op">/</span>to<span class="op">/</span>script<span class="op">.</span>py<span class="op">(</span><span class="num">4</span><span class="op">)</span>calculate_discount<span class="op">(</span><span class="op">)</span>
<span class="op">-</span><span class="op">&gt;</span> final_price <span class="op">=</span> price <span class="op">-</span> discount

<span class="op">(</span>Pdb<span class="op">)</span> p discount         <span class="cm"># Now &#x27;discount&#x27; exists</span>
<span class="num">20.0</span>

<span class="op">(</span>Pdb<span class="op">)</span> n                  <span class="cm"># Execute this line too</span>
<span class="op">&gt;</span> <span class="op">/</span>path<span class="op">/</span>to<span class="op">/</span>script<span class="op">.</span>py<span class="op">(</span><span class="num">5</span><span class="op">)</span>calculate_discount<span class="op">(</span><span class="op">)</span>
<span class="op">-</span><span class="op">&gt;</span> <span class="kw">return</span> final_price

<span class="op">(</span>Pdb<span class="op">)</span> p final_price      <span class="cm"># Check the result</span>
<span class="num">80.0</span>

<span class="op">(</span>Pdb<span class="op">)</span> c                  <span class="cm"># CONTINUE - run until next breakpoint or end</span>
</code></pre>
<p><strong>Complete pdb command reference:</strong></p>
<table><thead><tr><th>Command</th><th>Short</th><th>What it does</th><th>Example</th></tr></thead><tbody><tr><td><code class="inline">print(expr)</code></td><td><code class="inline">p expr</code></td><td>Print a value</td><td><code class="inline">p my_variable</code></td></tr>
<tr><td><code class="inline">pp expr</code></td><td></td><td>Pretty-print (for dicts, lists)</td><td><code class="inline">pp my_dict</code></td></tr>
<tr><td><code class="inline">next</code></td><td><code class="inline">n</code></td><td>Execute current line, go to next</td><td></td></tr>
<tr><td><code class="inline">step</code></td><td><code class="inline">s</code></td><td>Step INTO a function call</td><td></td></tr>
<tr><td><code class="inline">continue</code></td><td><code class="inline">c</code></td><td>Run until next breakpoint</td><td></td></tr>
<tr><td><code class="inline">list</code></td><td><code class="inline">l</code></td><td>Show code around current line</td><td><code class="inline">l 1, 20</code> (lines 1-20)</td></tr>
<tr><td><code class="inline">longlist</code></td><td><code class="inline">ll</code></td><td>Show entire current function</td><td></td></tr>
<tr><td><code class="inline">where</code></td><td><code class="inline">w</code></td><td>Show call stack (who called what)</td><td></td></tr>
<tr><td><code class="inline">up</code></td><td><code class="inline">u</code></td><td>Go UP one level in call stack</td><td></td></tr>
<tr><td><code class="inline">down</code></td><td><code class="inline">d</code></td><td>Go DOWN one level in call stack</td><td></td></tr>
<tr><td><code class="inline">break</code></td><td><code class="inline">b</code></td><td>Set a breakpoint</td><td><code class="inline">b 42</code> (line 42), <code class="inline">b my_func</code></td></tr>
<tr><td><code class="inline">clear</code></td><td><code class="inline">cl</code></td><td>Remove breakpoints</td><td><code class="inline">cl 1</code> (breakpoint #1)</td></tr>
<tr><td><code class="inline">return</code></td><td><code class="inline">r</code></td><td>Run until current function returns</td><td></td></tr>
<tr><td><code class="inline">quit</code></td><td><code class="inline">q</code></td><td>Quit debugger</td><td></td></tr>
<tr><td><code class="inline">!statement</code></td><td></td><td>Execute Python statement</td><td><code class="inline">!x = 42</code></td></tr>
<tr><td><code class="inline">whatis expr</code></td><td></td><td>Show type of expression</td><td><code class="inline">whatis my_var</code></td></tr></tbody></table>
<p><strong>Real debugging session example:</strong></p>
<p>Say you have a bug - the function returns wrong results:</p>
<pre><code><span class="kw">def</span> <span class="fn">find_average</span><span class="op">(</span>numbers<span class="op">)</span><span class="op">:</span>
    total <span class="op">=</span> <span class="num">0</span>
    <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="nb">len</span><span class="op">(</span>numbers<span class="op">)</span><span class="op">)</span><span class="op">:</span>
        total <span class="op">+</span><span class="op">=</span> numbers<span class="op">[</span>i<span class="op">]</span>
    average <span class="op">=</span> total <span class="op">/</span> <span class="nb">len</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">+</span> <span class="num">1</span>  <span class="cm"># Bug! The +1 is wrong</span>
    <span class="kw">return</span> average

<span class="cm"># Let&#x27;s debug:</span>
<span class="kw">def</span> <span class="fn">find_average</span><span class="op">(</span>numbers<span class="op">)</span><span class="op">:</span>
    <span class="nb">breakpoint</span><span class="op">(</span><span class="op">)</span>  <span class="cm"># ADD THIS</span>
    total <span class="op">=</span> <span class="num">0</span>
    <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="nb">len</span><span class="op">(</span>numbers<span class="op">)</span><span class="op">)</span><span class="op">:</span>
        total <span class="op">+</span><span class="op">=</span> numbers<span class="op">[</span>i<span class="op">]</span>
    average <span class="op">=</span> total <span class="op">/</span> <span class="nb">len</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">+</span> <span class="num">1</span>
    <span class="kw">return</span> average

result <span class="op">=</span> find_average<span class="op">(</span><span class="op">[</span><span class="num">10</span><span class="op">,</span> <span class="num">20</span><span class="op">,</span> <span class="num">30</span><span class="op">]</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Average: </span><span class="st">{</span>result<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Prints 21.0, but should be 20.0</span>
</code></pre>
<pre><code><span class="cm"># Run the script, pdb starts:</span>

<span class="op">(</span>Pdb<span class="op">)</span> n                    <span class="cm"># Skip past total = 0</span>
<span class="op">(</span>Pdb<span class="op">)</span> n                    <span class="cm"># Enter the for loop</span>
<span class="op">(</span>Pdb<span class="op">)</span> n                    <span class="cm"># Execute total += numbers[i]</span>
<span class="op">(</span>Pdb<span class="op">)</span> p total              <span class="cm"># Check total after first iteration</span>
<span class="num">10</span>
<span class="op">(</span>Pdb<span class="op">)</span> c                    <span class="cm"># Continue (but we want to see more...)</span>

<span class="cm"># Better approach - set a breakpoint AFTER the loop:</span>
<span class="op">(</span>Pdb<span class="op">)</span> b <span class="num">6</span>                 <span class="cm"># Set breakpoint at line 6 (the average line)</span>
<span class="op">(</span>Pdb<span class="op">)</span> c                    <span class="cm"># Continue to that breakpoint</span>
<span class="op">(</span>Pdb<span class="op">)</span> p total              <span class="cm"># Check total</span>
<span class="num">60</span>
<span class="op">(</span>Pdb<span class="op">)</span> p <span class="nb">len</span><span class="op">(</span>numbers<span class="op">)</span>       <span class="cm"># Check count</span>
<span class="num">3</span>
<span class="op">(</span>Pdb<span class="op">)</span> p total <span class="op">/</span> <span class="nb">len</span><span class="op">(</span>numbers<span class="op">)</span>  <span class="cm"># What should average be?</span>
<span class="num">20.0</span>
<span class="op">(</span>Pdb<span class="op">)</span> p total <span class="op">/</span> <span class="nb">len</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">+</span> <span class="num">1</span>  <span class="cm"># What IS the average (with bug)?</span>
<span class="num">21.0</span>
<span class="cm"># AHA! The + 1 is the bug!</span>
</code></pre>
<p><strong>Step vs Next - the important difference:</strong></p>
<pre><code><span class="kw">def</span> <span class="fn">helper</span><span class="op">(</span>x<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> x <span class="op">*</span> <span class="num">2</span>

<span class="kw">def</span> <span class="fn">main</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">breakpoint</span><span class="op">(</span><span class="op">)</span>
    result <span class="op">=</span> helper<span class="op">(</span><span class="num">5</span><span class="op">)</span>  <span class="cm"># Line we&#x27;re about to execute</span>
    <span class="nb">print</span><span class="op">(</span>result<span class="op">)</span>
</code></pre>
<pre><code><span class="cm"># At the breakpoint:</span>
<span class="op">(</span>Pdb<span class="op">)</span> n    <span class="cm"># NEXT: executes helper(5) completely, stops at print(result)</span>
           <span class="cm"># You DON&#x27;T go inside helper()</span>

<span class="op">(</span>Pdb<span class="op">)</span> s    <span class="cm"># STEP: goes INSIDE helper(5), stops at &quot;return x * 2&quot;</span>
           <span class="cm"># You CAN inspect x inside helper</span>
</code></pre>
<p><strong>Post-mortem debugging</strong> - debug AFTER a crash:</p>
<pre><code><span class="cm"># Run with -m pdb to auto-enter debugger on crash:</span>
python -m pdb my_script.py

<span class="cm"># When it crashes, you&#x27;re dropped into pdb at the crash site</span>
<span class="cm"># You can inspect all variables to understand what went wrong</span>
</code></pre>
<h3 id="103-logging-production-grade-debugging">10.3 Logging (Production-Grade Debugging)</h3>
<p>Print statements get removed before deployment. Logging is permanent and configurable.</p>
<p><strong>Basic logging:</strong></p>
<pre><code><span class="kw">import</span> logging

<span class="cm"># Configure logging (do this ONCE, at the top of your main script)</span>
logging<span class="op">.</span>basicConfig<span class="op">(</span>
    level<span class="op">=</span>logging<span class="op">.</span>DEBUG<span class="op">,</span>       <span class="cm"># Show all messages DEBUG and above</span>
    <span class="nb">format</span><span class="op">=</span><span class="st">&#x27;</span><span class="st">%(asctime)s</span><span class="st"> [</span><span class="st">%(levelname)s</span><span class="st">] </span><span class="st">%(name)s</span><span class="st">: </span><span class="st">%(message)s</span><span class="st">&#x27;</span><span class="op">,</span>
    datefmt<span class="op">=</span><span class="st">&#x27;</span><span class="st">%</span><span class="st">Y-</span><span class="st">%</span><span class="st">m-</span><span class="st">%d</span><span class="st"> </span><span class="st">%</span><span class="st">H:</span><span class="st">%</span><span class="st">M:</span><span class="st">%</span><span class="st">S</span><span class="st">&#x27;</span>
<span class="op">)</span>

<span class="cm"># Create a logger for this module</span>
logger <span class="op">=</span> logging<span class="op">.</span>getLogger<span class="op">(</span>__name__<span class="op">)</span>

<span class="cm"># Log at different levels:</span>
logger<span class="op">.</span>debug<span class="op">(</span><span class="st">&quot;</span><span class="st">Detailed info for diagnosing problems</span><span class="st">&quot;</span><span class="op">)</span>
logger<span class="op">.</span>info<span class="op">(</span><span class="st">&quot;</span><span class="st">General operational info</span><span class="st">&quot;</span><span class="op">)</span>
logger<span class="op">.</span>warning<span class="op">(</span><span class="st">&quot;</span><span class="st">Something unexpected but not fatal</span><span class="st">&quot;</span><span class="op">)</span>
logger<span class="op">.</span>error<span class="op">(</span><span class="st">&quot;</span><span class="st">Something failed!</span><span class="st">&quot;</span><span class="op">)</span>
logger<span class="op">.</span>critical<span class="op">(</span><span class="st">&quot;</span><span class="st">System is unusable!</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Output:</span>
<span class="cm"># 2024-03-15 14:30:00 [DEBUG] __main__: Detailed info for diagnosing problems</span>
<span class="cm"># 2024-03-15 14:30:00 [INFO] __main__: General operational info</span>
<span class="cm"># ...</span>
</code></pre>
<p><strong>Log levels (from least to most severe):</strong></p>
<table><thead><tr><th>Level</th><th>When to use</th><th>Example</th></tr></thead><tbody><tr><td><code class="inline">DEBUG</code></td><td>Detailed diagnostic info</td><td><code class="inline">logger.debug(f&quot;Processing item {i}: {item}&quot;)</code></td></tr>
<tr><td><code class="inline">INFO</code></td><td>General operational events</td><td><code class="inline">logger.info(&quot;Server started on port 8080&quot;)</code></td></tr>
<tr><td><code class="inline">WARNING</code></td><td>Something unexpected</td><td><code class="inline">logger.warning(&quot;Disk space below 10%&quot;)</code></td></tr>
<tr><td><code class="inline">ERROR</code></td><td>Something failed</td><td><code class="inline">logger.error(&quot;Failed to connect to database&quot;)</code></td></tr>
<tr><td><code class="inline">CRITICAL</code></td><td>System is unusable</td><td><code class="inline">logger.critical(&quot;Out of memory!&quot;)</code></td></tr></tbody></table>
<p><strong>Production logging setup</strong> (log to file + console):</p>
<pre><code><span class="kw">import</span> logging
<span class="kw">import</span> logging.handlers

<span class="kw">def</span> <span class="fn">setup_logging</span><span class="op">(</span>log_file<span class="op">=</span><span class="st">&quot;</span><span class="st">app.log</span><span class="st">&quot;</span><span class="op">,</span> level<span class="op">=</span>logging<span class="op">.</span>INFO<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Set up production-grade logging.&quot;&quot;&quot;</span>
    logger <span class="op">=</span> logging<span class="op">.</span>getLogger<span class="op">(</span><span class="op">)</span>
    logger<span class="op">.</span>setLevel<span class="op">(</span>logging<span class="op">.</span>DEBUG<span class="op">)</span>  <span class="cm"># Capture everything</span>

    <span class="cm"># Format</span>
    formatter <span class="op">=</span> logging<span class="op">.</span>Formatter<span class="op">(</span>
        <span class="st">&#x27;</span><span class="st">%(asctime)s</span><span class="st"> [</span><span class="st">%(levelname)-8s</span><span class="st">] </span><span class="st">%(name)s</span><span class="st">:</span><span class="st">%(lineno)d</span><span class="st"> - </span><span class="st">%(message)s</span><span class="st">&#x27;</span><span class="op">,</span>
        datefmt<span class="op">=</span><span class="st">&#x27;</span><span class="st">%</span><span class="st">Y-</span><span class="st">%</span><span class="st">m-</span><span class="st">%d</span><span class="st"> </span><span class="st">%</span><span class="st">H:</span><span class="st">%</span><span class="st">M:</span><span class="st">%</span><span class="st">S</span><span class="st">&#x27;</span>
    <span class="op">)</span>

    <span class="cm"># Console handler - show INFO and above</span>
    console <span class="op">=</span> logging<span class="op">.</span>StreamHandler<span class="op">(</span><span class="op">)</span>
    console<span class="op">.</span>setLevel<span class="op">(</span>level<span class="op">)</span>
    console<span class="op">.</span>setFormatter<span class="op">(</span>formatter<span class="op">)</span>
    logger<span class="op">.</span>addHandler<span class="op">(</span>console<span class="op">)</span>

    <span class="cm"># File handler - log EVERYTHING, rotate at 10MB, keep 5 backups</span>
    file_handler <span class="op">=</span> logging<span class="op">.</span>handlers<span class="op">.</span>RotatingFileHandler<span class="op">(</span>
        log_file<span class="op">,</span> maxBytes<span class="op">=</span><span class="num">10</span><span class="op">*</span><span class="num">1024</span><span class="op">*</span><span class="num">1024</span><span class="op">,</span> backupCount<span class="op">=</span><span class="num">5</span>
    <span class="op">)</span>
    file_handler<span class="op">.</span>setLevel<span class="op">(</span>logging<span class="op">.</span>DEBUG<span class="op">)</span>
    file_handler<span class="op">.</span>setFormatter<span class="op">(</span>formatter<span class="op">)</span>
    logger<span class="op">.</span>addHandler<span class="op">(</span>file_handler<span class="op">)</span>

    <span class="kw">return</span> logger

<span class="cm"># Usage</span>
logger <span class="op">=</span> setup_logging<span class="op">(</span><span class="op">)</span>
logger<span class="op">.</span>info<span class="op">(</span><span class="st">&quot;</span><span class="st">Application started</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="104-decorator-for-logging-and-timing">10.4 Decorator for Logging and Timing</h3>
<p>This is a pattern used extensively in production Python code:</p>
<pre><code><span class="kw">import</span> time
<span class="kw">import</span> logging
<span class="kw">from</span> functools <span class="kw">import</span> wraps

logger <span class="op">=</span> logging<span class="op">.</span>getLogger<span class="op">(</span>__name__<span class="op">)</span>

<span class="kw">def</span> <span class="fn">log_calls</span><span class="op">(</span>func<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Decorator that logs function calls, return values, and execution time.</span>

<span class="st">    Usage:</span>
<span class="st">        @log_calls</span>
<span class="st">        def my_function(x, y):</span>
<span class="st">            return x + y</span>

<span class="st">    When you call my_function(3, 4), it logs:</span>
<span class="st">        CALL my_function(args=(3, 4), kwargs={})</span>
<span class="st">        RETURN my_function -&gt; 7 [0.0001s]</span>
<span class="st">    &quot;&quot;&quot;</span>
    <span class="dc">@wraps</span><span class="op">(</span>func<span class="op">)</span>  <span class="cm"># Preserves function name and docstring</span>
    <span class="kw">def</span> <span class="fn">wrapper</span><span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
        <span class="cm"># Log the call</span>
        args_repr <span class="op">=</span> <span class="op">[</span><span class="nb">repr</span><span class="op">(</span>a<span class="op">)</span> <span class="kw">for</span> a <span class="kw">in</span> args<span class="op">]</span>
        kwargs_repr <span class="op">=</span> <span class="op">[</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>k<span class="st">}</span><span class="st">=</span><span class="st">{</span>v<span class="st">!r}</span><span class="st">&quot;</span> <span class="kw">for</span> k<span class="op">,</span> v <span class="kw">in</span> kwargs<span class="op">.</span>items<span class="op">(</span><span class="op">)</span><span class="op">]</span>
        signature <span class="op">=</span> <span class="st">&quot;</span><span class="st">, </span><span class="st">&quot;</span><span class="op">.</span>join<span class="op">(</span>args_repr <span class="op">+</span> kwargs_repr<span class="op">)</span>
        logger<span class="op">.</span>info<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">CALL </span><span class="st">{</span>func<span class="op">.</span>__name__<span class="st">}</span><span class="st">(</span><span class="st">{</span>signature<span class="st">}</span><span class="st">)</span><span class="st">&quot;</span><span class="op">)</span>

        <span class="cm"># Execute and time</span>
        start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
        <span class="kw">try</span><span class="op">:</span>
            result <span class="op">=</span> func<span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span>
            elapsed <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start
            logger<span class="op">.</span>info<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">RETURN </span><span class="st">{</span>func<span class="op">.</span>__name__<span class="st">}</span><span class="st"> -&gt; </span><span class="st">{</span>result<span class="st">!r}</span><span class="st"> [</span><span class="st">{</span>elapsed<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s]</span><span class="st">&quot;</span><span class="op">)</span>
            <span class="kw">return</span> result
        <span class="kw">except</span> <span class="nb">Exception</span> <span class="kw">as</span> e<span class="op">:</span>
            elapsed <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start
            logger<span class="op">.</span>error<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">ERROR </span><span class="st">{</span>func<span class="op">.</span>__name__<span class="st">}</span><span class="st"> raised </span><span class="st">{</span><span class="nb">type</span><span class="op">(</span>e<span class="op">)</span><span class="op">.</span>__name__<span class="st">}</span><span class="st">: </span><span class="st">{</span>e<span class="st">}</span><span class="st"> [</span><span class="st">{</span>elapsed<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s]</span><span class="st">&quot;</span><span class="op">)</span>
            <span class="kw">raise</span>

    <span class="kw">return</span> wrapper

<span class="cm"># Usage:</span>
<span class="dc">@log_calls</span>
<span class="kw">def</span> <span class="fn">calculate_tax</span><span class="op">(</span>amount<span class="op">,</span> rate<span class="op">=</span><span class="num">0.08</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> <span class="nb">round</span><span class="op">(</span>amount <span class="op">*</span> rate<span class="op">,</span> <span class="num">2</span><span class="op">)</span>

<span class="dc">@log_calls</span>
<span class="kw">def</span> <span class="fn">process_order</span><span class="op">(</span>items<span class="op">)</span><span class="op">:</span>
    total <span class="op">=</span> <span class="nb">sum</span><span class="op">(</span>item<span class="op">[</span><span class="st">&quot;</span><span class="st">price</span><span class="st">&quot;</span><span class="op">]</span> <span class="kw">for</span> item <span class="kw">in</span> items<span class="op">)</span>
    tax <span class="op">=</span> calculate_tax<span class="op">(</span>total<span class="op">)</span>
    <span class="kw">return</span> total <span class="op">+</span> tax

<span class="cm"># When you call:</span>
result <span class="op">=</span> process_order<span class="op">(</span><span class="op">[</span><span class="op">{</span><span class="st">&quot;</span><span class="st">price</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">10</span><span class="op">}</span><span class="op">,</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">price</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">20</span><span class="op">}</span><span class="op">]</span><span class="op">)</span>
<span class="cm"># You see in the logs:</span>
<span class="cm"># CALL process_order([{&#x27;price&#x27;: 10}, {&#x27;price&#x27;: 20}])</span>
<span class="cm"># CALL calculate_tax(30, rate=0.08)</span>
<span class="cm"># RETURN calculate_tax -&gt; 2.4 [0.0000s]</span>
<span class="cm"># RETURN process_order -&gt; 32.4 [0.0001s]</span>
</code></pre>
<h3 id="105-who-called-me-call-stack-inspection">10.5 Who Called Me? (Call Stack Inspection)</h3>
<p>When debugging, it's useful to know WHO called a function:</p>
<pre><code><span class="kw">import</span> inspect

<span class="kw">def</span> <span class="fn">who_called_me</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Print information about the caller.&quot;&quot;&quot;</span>
    frame <span class="op">=</span> inspect<span class="op">.</span>currentframe<span class="op">(</span><span class="op">)</span><span class="op">.</span>f_back  <span class="cm"># Go up one level</span>
    caller_name <span class="op">=</span> frame<span class="op">.</span>f_code<span class="op">.</span>co_name
    caller_file <span class="op">=</span> frame<span class="op">.</span>f_code<span class="op">.</span>co_filename
    caller_line <span class="op">=</span> frame<span class="op">.</span>f_lineno
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Called by: </span><span class="st">{</span>caller_name<span class="st">}</span><span class="st">() at </span><span class="st">{</span>caller_file<span class="st">}</span><span class="st">:</span><span class="st">{</span>caller_line<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">my_function</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    who_called_me<span class="op">(</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">another_function</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    my_function<span class="op">(</span><span class="op">)</span>

<span class="cm"># Run it:</span>
another_function<span class="op">(</span><span class="op">)</span>
<span class="cm"># Output: Called by: my_function() at script.py:12</span>

<span class="cm"># See the full call stack:</span>
<span class="kw">def</span> <span class="fn">show_call_stack</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Print the entire call stack.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Call stack (most recent call last):</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">for</span> i<span class="op">,</span> frame_info <span class="kw">in</span> <span class="nb">enumerate</span><span class="op">(</span>inspect<span class="op">.</span>stack<span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>
        frame <span class="op">=</span> frame_info<span class="op">[</span><span class="num">0</span><span class="op">]</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  </span><span class="st">{</span>i<span class="st">}</span><span class="st">: </span><span class="st">{</span>frame<span class="op">.</span>f_code<span class="op">.</span>co_name<span class="st">}</span><span class="st">() </span><span class="st">&quot;</span>
              <span class="st">f</span><span class="st">&quot;</span><span class="st">at </span><span class="st">{</span>frame<span class="op">.</span>f_code<span class="op">.</span>co_filename<span class="st">}</span><span class="st">:</span><span class="st">{</span>frame<span class="op">.</span>f_lineno<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="106-python-trace-module">10.6 Python trace Module</h3>
<p>The <code class="inline">trace</code> module shows every line of code as it executes:</p>
<pre><code><span class="cm"># Trace every line executed in your script</span>
python -m trace --trace script.py

<span class="cm"># Example output:</span>
<span class="cm">#  --- modulename: script, funcname: calculate</span>
<span class="cm"># script.py(3):     total = 0</span>
<span class="cm"># script.py(4):     for i in range(len(numbers)):</span>
<span class="cm"># script.py(5):         total += numbers[i]</span>
<span class="cm"># script.py(4):     for i in range(len(numbers)):</span>
<span class="cm"># script.py(5):         total += numbers[i]</span>
<span class="cm"># ...</span>

<span class="cm"># Show which functions were called (less verbose)</span>
python -m trace --listfuncs script.py

<span class="cm"># Count how many times each line was executed</span>
python -m trace --count script.py

<span class="cm"># Verbose import tracing (see which modules are loaded)</span>
python -v script.py
</code></pre>
<p><strong>Using trace programmatically:</strong></p>
<pre><code><span class="kw">import</span> sys

<span class="kw">def</span> <span class="fn">trace_calls</span><span class="op">(</span>frame<span class="op">,</span> event<span class="op">,</span> arg<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Custom tracer that shows function calls.&quot;&quot;&quot;</span>
    <span class="kw">if</span> event <span class="op">==</span> <span class="st">&#x27;</span><span class="st">call</span><span class="st">&#x27;</span><span class="op">:</span>
        filename <span class="op">=</span> frame<span class="op">.</span>f_code<span class="op">.</span>co_filename
        funcname <span class="op">=</span> frame<span class="op">.</span>f_code<span class="op">.</span>co_name
        lineno <span class="op">=</span> frame<span class="op">.</span>f_lineno
        <span class="cm"># Only trace our own code (not library code)</span>
        <span class="kw">if</span> <span class="st">&#x27;</span><span class="st">site-packages</span><span class="st">&#x27;</span> <span class="kw">not</span> <span class="kw">in</span> filename<span class="op">:</span>
            <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">CALL: </span><span class="st">{</span>funcname<span class="st">}</span><span class="st">() at </span><span class="st">{</span>filename<span class="st">}</span><span class="st">:</span><span class="st">{</span>lineno<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> trace_calls

<span class="cm"># Enable tracing</span>
sys<span class="op">.</span>settrace<span class="op">(</span>trace_calls<span class="op">)</span>

<span class="cm"># Your code here...</span>
<span class="kw">def</span> <span class="fn">hello</span><span class="op">(</span>name<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Hello, </span><span class="st">{</span>name<span class="st">}</span><span class="st">!</span><span class="st">&quot;</span>

result <span class="op">=</span> hello<span class="op">(</span><span class="st">&quot;</span><span class="st">World</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Disable tracing</span>
sys<span class="op">.</span>settrace<span class="op">(</span><span class="kw">None</span><span class="op">)</span>
</code></pre>
<h3 id="107-strace-dtrace-system-level-debugging">10.7 strace / dtrace (System-Level Debugging)</h3>
<p>When Python-level debugging isn't enough, you can trace system calls (file opens, network connections, etc.):</p>
<pre><code><span class="cm"># Linux: see what files Python opens</span>
strace -e trace<span class="op">=</span>open,openat python script.py

<span class="cm"># Linux: see network activity</span>
strace -e trace<span class="op">=</span>network python script.py

<span class="cm"># macOS: use dtruss</span>
sudo dtruss python script.py

<span class="cm"># Useful for:</span>
<span class="cm"># - &quot;Why can&#x27;t Python find my module?&quot; -&gt; see which paths it searches</span>
<span class="cm"># - &quot;Why is this script slow?&quot; -&gt; see unexpected disk or network I/O</span>
<span class="cm"># - &quot;Permission denied errors&quot; -&gt; see which files it&#x27;s trying to access</span>
</code></pre>
<h3 id="108-visual-code-tracer-from-this-repository">10.8 Visual Code Tracer (From This Repository)</h3>
<p>This repository includes a powerful visual tracing tool that shows function calls in a web browser:</p>
<pre><code><span class="cm"># Copy visual_tracer.py from quick101/debugging/visual_code_tracer/</span>
<span class="cm"># Then in your code:</span>

<span class="kw">from</span> visual_tracer <span class="kw">import</span> trace

<span class="cm"># Basic - trace everything</span>
trace<span class="op">(</span><span class="op">)</span>

<span class="cm"># Now write your code normally:</span>
<span class="kw">def</span> <span class="fn">fibonacci</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> n <span class="op">&lt;</span> <span class="num">2</span><span class="op">:</span>
        <span class="kw">return</span> n
    <span class="kw">return</span> fibonacci<span class="op">(</span>n<span class="op">-</span><span class="num">1</span><span class="op">)</span> <span class="op">+</span> fibonacci<span class="op">(</span>n<span class="op">-</span><span class="num">2</span><span class="op">)</span>

result <span class="op">=</span> fibonacci<span class="op">(</span><span class="num">10</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>result<span class="op">)</span>

<span class="cm"># A browser window opens at http://localhost:5050 showing:</span>
<span class="cm"># - Every function call in real-time</span>
<span class="cm"># - Call duration (how long each function took)</span>
<span class="cm"># - Call depth (how deep in the call stack)</span>
<span class="cm"># - Source code viewing (click to see code)</span>
</code></pre>
<p><strong>Filtering (so you don't get overwhelmed):</strong></p>
<pre><code><span class="cm"># Only trace your code (skip third-party libraries)</span>
trace<span class="op">(</span>only_user_code<span class="op">=</span><span class="kw">True</span><span class="op">)</span>

<span class="cm"># Only trace specific modules</span>
trace<span class="op">(</span>include_modules<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">myapp.utils</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">myapp.api</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>

<span class="cm"># Trace all modules starting with &quot;myapp&quot;</span>
trace<span class="op">(</span>include_modules<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">myapp.*</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>

<span class="cm"># Skip test modules</span>
trace<span class="op">(</span>exclude_modules<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">*.tests</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">*.test_*</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>

<span class="cm"># Only show slow calls (&gt;100ms)</span>
trace<span class="op">(</span>min_duration_ms<span class="op">=</span><span class="num">100</span><span class="op">)</span>

<span class="cm"># Combine filters</span>
trace<span class="op">(</span>
    include_modules<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">myapp.*</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    exclude_modules<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">myapp.tests.*</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    only_user_code<span class="op">=</span><span class="kw">True</span><span class="op">,</span>
    min_duration_ms<span class="op">=</span><span class="num">10</span>
<span class="op">)</span>
</code></pre>
<h3 id="109-profiling-finding-performance-bottlenecks">10.9 Profiling (Finding Performance Bottlenecks)</h3>
<p><strong>cProfile</strong> - find which functions are slow:</p>
<pre><code><span class="kw">import</span> cProfile
<span class="kw">import</span> pstats

<span class="cm"># Method 1: Profile a function call</span>
cProfile<span class="op">.</span>run<span class="op">(</span><span class="st">&#x27;</span><span class="st">my_slow_function()</span><span class="st">&#x27;</span><span class="op">)</span>

<span class="cm"># Method 2: Profile a block of code</span>
profiler <span class="op">=</span> cProfile<span class="op">.</span>Profile<span class="op">(</span><span class="op">)</span>
profiler<span class="op">.</span>enable<span class="op">(</span><span class="op">)</span>

<span class="cm"># ... your code here ...</span>
result <span class="op">=</span> process_large_dataset<span class="op">(</span>data<span class="op">)</span>

profiler<span class="op">.</span>disable<span class="op">(</span><span class="op">)</span>

<span class="cm"># Print the top 10 slowest functions</span>
stats <span class="op">=</span> pstats<span class="op">.</span>Stats<span class="op">(</span>profiler<span class="op">)</span>
stats<span class="op">.</span>sort_stats<span class="op">(</span><span class="st">&#x27;</span><span class="st">cumulative</span><span class="st">&#x27;</span><span class="op">)</span>  <span class="cm"># Sort by total time</span>
stats<span class="op">.</span>print_stats<span class="op">(</span><span class="num">10</span><span class="op">)</span>           <span class="cm"># Show top 10</span>

<span class="cm"># Output looks like:</span>
<span class="cm">#    ncalls  tottime  percall  cumtime  percall filename:lineno(function)</span>
<span class="cm">#         1    0.000    0.000    0.056    0.056 script.py:28(big_loop)</span>
<span class="cm">#    120002    0.039    0.000    0.039    0.000 script.py:33(&lt;genexpr&gt;)</span>
<span class="cm">#         2    0.016    0.008    0.055    0.028 {method &#x27;join&#x27; of &#x27;str&#x27;}</span>
<span class="cm">#</span>
<span class="cm"># Columns:</span>
<span class="cm">#   ncalls:  how many times the function was called</span>
<span class="cm">#   tottime: time spent IN this function (not counting sub-calls)</span>
<span class="cm">#   cumtime: time spent in this function INCLUDING sub-calls</span>
</code></pre>
<p><strong>Command-line profiling:</strong></p>
<pre><code><span class="cm"># Save profile data</span>
python -m cProfile -o profile.pstats script.py

<span class="cm"># Visualize with snakeviz (interactive browser UI)</span>
pip install snakeviz
snakeviz profile.pstats

<span class="cm"># Visualize with gprof2dot (generates an image)</span>
pip install gprof2dot
brew install graphviz  <span class="cm"># macOS</span>
gprof2dot -f pstats profile.pstats <span class="op">|</span> dot -Tpng -o profile.png

<span class="cm"># Timeline profiling with viztracer</span>
pip install viztracer
viztracer script.py
vizviewer result.json
</code></pre>
<p><strong>Quick timing</strong> - measure how long something takes:</p>
<pre><code><span class="kw">from</span> time <span class="kw">import</span> perf_counter

<span class="cm"># Time a block of code</span>
start <span class="op">=</span> perf_counter<span class="op">(</span><span class="op">)</span>
result <span class="op">=</span> <span class="nb">sum</span><span class="op">(</span><span class="nb">range</span><span class="op">(</span><span class="num">1_000_000</span><span class="op">)</span><span class="op">)</span>
elapsed <span class="op">=</span> perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Took </span><span class="st">{</span>elapsed<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st"> seconds</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># In Jupyter notebooks:</span>
<span class="cm"># %timeit [x**2 for x in range(1000)]     # Time one expression (runs many times)</span>
<span class="cm"># %%time                                    # Time an entire cell (runs once)</span>
<span class="cm"># slow_function()</span>
</code></pre>
<h3 id="1010-debugging-cheat-sheet">10.10 Debugging Cheat Sheet</h3>
<table><thead><tr><th>Situation</th><th>Tool</th><th>Command</th></tr></thead><tbody><tr><td>Quick value check</td><td>Print</td><td><code class="inline">print(f&quot;{var = }&quot;)</code></td></tr>
<tr><td>Step through code</td><td>pdb</td><td><code class="inline">breakpoint()</code> then <code class="inline">n</code>, <code class="inline">s</code>, <code class="inline">c</code></td></tr>
<tr><td>Inspect after crash</td><td>pdb post-mortem</td><td><code class="inline">python -m pdb script.py</code></td></tr>
<tr><td>See every line executed</td><td>trace</td><td><code class="inline">python -m trace --trace script.py</code></td></tr>
<tr><td>Find slow functions</td><td>cProfile</td><td><code class="inline">python -m cProfile script.py</code></td></tr>
<tr><td>Visual slow-function analysis</td><td>snakeviz</td><td><code class="inline">snakeviz profile.pstats</code></td></tr>
<tr><td>See system calls</td><td>strace/dtruss</td><td><code class="inline">strace python script.py</code></td></tr>
<tr><td>Visual live tracing</td><td>visual_tracer</td><td><code class="inline">trace(only_user_code=True)</code></td></tr>
<tr><td>Production debugging</td><td>logging</td><td><code class="inline">logger.debug(f&quot;x={x}&quot;)</code></td></tr>
<tr><td>Find who called a function</td><td>inspect</td><td><code class="inline">inspect.stack()</code></td></tr>
<tr><td>Module loading issues</td><td>verbose</td><td><code class="inline">python -v script.py</code></td></tr></tbody></table>
<h3 id="exercise-101-debug-this-function">Exercise 10.1: Debug This Function</h3>
<p>This function has a bug. Use <code class="inline">breakpoint()</code> and pdb to find it:</p>
<pre><code><span class="kw">def</span> <span class="fn">calculate_average_grade</span><span class="op">(</span>students<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Calculate the average grade for all students.&quot;&quot;&quot;</span>
    total <span class="op">=</span> <span class="num">0</span>
    count <span class="op">=</span> <span class="num">0</span>
    <span class="kw">for</span> student <span class="kw">in</span> students<span class="op">:</span>
        <span class="kw">if</span> student<span class="op">[</span><span class="st">&quot;</span><span class="st">grade</span><span class="st">&quot;</span><span class="op">]</span> <span class="kw">is</span> <span class="kw">not</span> <span class="kw">None</span><span class="op">:</span>
            total <span class="op">+</span><span class="op">=</span> student<span class="op">[</span><span class="st">&quot;</span><span class="st">grade</span><span class="st">&quot;</span><span class="op">]</span>
    count <span class="op">+</span><span class="op">=</span> <span class="num">1</span>  <span class="cm"># BUG: this is outside the if block!</span>
    <span class="kw">return</span> total <span class="op">/</span> count <span class="kw">if</span> count <span class="op">&gt;</span> <span class="num">0</span> <span class="kw">else</span> <span class="num">0</span>

students <span class="op">=</span> <span class="op">[</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">grade</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">90</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">grade</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">80</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">grade</span><span class="st">&quot;</span><span class="op">:</span> <span class="kw">None</span><span class="op">}</span><span class="op">,</span>
    <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">grade</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">85</span><span class="op">}</span><span class="op">,</span>
<span class="op">]</span>

<span class="nb">print</span><span class="op">(</span>calculate_average_grade<span class="op">(</span>students<span class="op">)</span><span class="op">)</span>  <span class="cm"># Should be 85, but isn&#x27;t!</span>
</code></pre>
<details>
<summary>Solution</summary>

The bug is that `count += 1` is outside the `if` block and outside the `for` loop. It should be inside both:

<pre><code><span class="kw">def</span> <span class="fn">calculate_average_grade</span><span class="op">(</span>students<span class="op">)</span><span class="op">:</span>
    total <span class="op">=</span> <span class="num">0</span>
    count <span class="op">=</span> <span class="num">0</span>
    <span class="kw">for</span> student <span class="kw">in</span> students<span class="op">:</span>
        <span class="kw">if</span> student<span class="op">[</span><span class="st">&quot;</span><span class="st">grade</span><span class="st">&quot;</span><span class="op">]</span> <span class="kw">is</span> <span class="kw">not</span> <span class="kw">None</span><span class="op">:</span>
            total <span class="op">+</span><span class="op">=</span> student<span class="op">[</span><span class="st">&quot;</span><span class="st">grade</span><span class="st">&quot;</span><span class="op">]</span>
            count <span class="op">+</span><span class="op">=</span> <span class="num">1</span>  <span class="cm"># FIXED: now inside the if block AND the for loop</span>
    <span class="kw">return</span> total <span class="op">/</span> count <span class="kw">if</span> count <span class="op">&gt;</span> <span class="num">0</span> <span class="kw">else</span> <span class="num">0</span>
</code></pre>

Using pdb to find the bug:
1. Add `breakpoint()` before the return
2. Check `total` (255) and `count` (1 - wrong, should be 3!)
3. Realize count is only incremented once because it's outside the loop
</details>
<h3 id="exercise-102-profile-and-optimize">Exercise 10.2: Profile and Optimize</h3>
<p>Profile this code, find the bottleneck, and optimize it:</p>
<pre><code><span class="kw">def</span> <span class="fn">slow_search</span><span class="op">(</span>data<span class="op">,</span> target<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Find all indices where target appears.&quot;&quot;&quot;</span>
    indices <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
    <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="nb">len</span><span class="op">(</span>data<span class="op">)</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">for</span> j <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="nb">len</span><span class="op">(</span>data<span class="op">)</span><span class="op">)</span><span class="op">:</span>  <span class="cm"># BUG: why are we scanning the whole list again?</span>
            <span class="kw">if</span> data<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> target<span class="op">:</span>
                indices<span class="op">.</span>append<span class="op">(</span>i<span class="op">)</span>
                <span class="kw">break</span>
    <span class="kw">return</span> indices

<span class="kw">import</span> random
data <span class="op">=</span> <span class="op">[</span>random<span class="op">.</span>randint<span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">100</span><span class="op">)</span> <span class="kw">for</span> _ <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10000</span><span class="op">)</span><span class="op">]</span>
result <span class="op">=</span> slow_search<span class="op">(</span>data<span class="op">,</span> <span class="num">42</span><span class="op">)</span>
</code></pre>
<details>
<summary>Solution</summary>

<pre><code><span class="cm"># Optimized: single pass O(n)</span>
<span class="kw">def</span> <span class="fn">fast_search</span><span class="op">(</span>data<span class="op">,</span> target<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> <span class="op">[</span>i <span class="kw">for</span> i<span class="op">,</span> val <span class="kw">in</span> <span class="nb">enumerate</span><span class="op">(</span>data<span class="op">)</span> <span class="kw">if</span> val <span class="op">==</span> target<span class="op">]</span>

<span class="cm"># Or even simpler for just counting:</span>
<span class="cm"># count = data.count(42)</span>
</code></pre>
</details>
<div class="section-divider" id="chapter-11-intermediate-python"><h2>Chapter 11: Intermediate Python</h2><div class="line"></div><span class="badge" style="background:var(--green-dim);color:var(--green)">Chapter 11</span></div>
<h3 id="111-decorators">11.1 Decorators</h3>
<p>A decorator is a function that takes another function and extends its behavior without modifying it.</p>
<p><strong>Step-by-step: How decorators work:</strong></p>
<pre><code><span class="cm"># Step 1: Functions can be passed as arguments</span>
<span class="kw">def</span> <span class="fn">shout</span><span class="op">(</span>text<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> text<span class="op">.</span>upper<span class="op">(</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">whisper</span><span class="op">(</span>text<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> text<span class="op">.</span>lower<span class="op">(</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">greet</span><span class="op">(</span>func<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Takes a function, calls it, prints result.&quot;&quot;&quot;</span>
    result <span class="op">=</span> func<span class="op">(</span><span class="st">&quot;</span><span class="st">Hello, World</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span>result<span class="op">)</span>

greet<span class="op">(</span>shout<span class="op">)</span>    <span class="cm"># HELLO, WORLD</span>
greet<span class="op">(</span>whisper<span class="op">)</span>  <span class="cm"># hello, world</span>
</code></pre>
<pre><code><span class="cm"># Step 2: Functions can return other functions</span>
<span class="kw">def</span> <span class="fn">create_greeting</span><span class="op">(</span>style<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">formal</span><span class="op">(</span>name<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Good day, </span><span class="st">{</span>name<span class="st">}</span><span class="st">. How do you do?</span><span class="st">&quot;</span>
    <span class="kw">def</span> <span class="fn">casual</span><span class="op">(</span>name<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Hey </span><span class="st">{</span>name<span class="st">}</span><span class="st">! What</span><span class="st">&#x27;</span><span class="st">s up?</span><span class="st">&quot;</span>

    <span class="kw">if</span> style <span class="op">==</span> <span class="st">&quot;</span><span class="st">formal</span><span class="st">&quot;</span><span class="op">:</span>
        <span class="kw">return</span> formal
    <span class="kw">else</span><span class="op">:</span>
        <span class="kw">return</span> casual

greet <span class="op">=</span> create_greeting<span class="op">(</span><span class="st">&quot;</span><span class="st">casual</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>greet<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># Hey Alice! What&#x27;s up?</span>
</code></pre>
<pre><code><span class="cm"># Step 3: A decorator combines both concepts</span>
<span class="kw">from</span> functools <span class="kw">import</span> wraps

<span class="kw">def</span> <span class="fn">timer</span><span class="op">(</span>func<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Decorator that measures execution time.&quot;&quot;&quot;</span>
    <span class="dc">@wraps</span><span class="op">(</span>func<span class="op">)</span>  <span class="cm"># Preserves the original function&#x27;s name and docstring</span>
    <span class="kw">def</span> <span class="fn">wrapper</span><span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
        <span class="kw">import</span> time
        start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
        result <span class="op">=</span> func<span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span>  <span class="cm"># Call the original function</span>
        elapsed <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>func<span class="op">.</span>__name__<span class="st">}</span><span class="st">() took </span><span class="st">{</span>elapsed<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> result
    <span class="kw">return</span> wrapper

<span class="cm"># Using the decorator:</span>
<span class="dc">@timer</span>
<span class="kw">def</span> <span class="fn">slow_function</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;This function is slow.&quot;&quot;&quot;</span>
    <span class="kw">import</span> time
    time<span class="op">.</span>sleep<span class="op">(</span><span class="num">1</span><span class="op">)</span>
    <span class="kw">return</span> <span class="st">&quot;</span><span class="st">done</span><span class="st">&quot;</span>

result <span class="op">=</span> slow_function<span class="op">(</span><span class="op">)</span>
<span class="cm"># Output: slow_function() took 1.0012s</span>

<span class="cm"># @timer is syntactic sugar for:</span>
<span class="cm"># slow_function = timer(slow_function)</span>
</code></pre>
<p><strong>Decorator with parameters:</strong></p>
<pre><code><span class="kw">from</span> functools <span class="kw">import</span> wraps
<span class="kw">import</span> time

<span class="kw">def</span> <span class="fn">retry</span><span class="op">(</span>max_attempts<span class="op">=</span><span class="num">3</span><span class="op">,</span> delay<span class="op">=</span><span class="num">1</span><span class="op">,</span> exceptions<span class="op">=</span><span class="op">(</span><span class="nb">Exception</span><span class="op">,</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Decorator factory - returns a decorator configured with parameters.&quot;&quot;&quot;</span>
    <span class="kw">def</span> <span class="fn">decorator</span><span class="op">(</span>func<span class="op">)</span><span class="op">:</span>
        <span class="dc">@wraps</span><span class="op">(</span>func<span class="op">)</span>
        <span class="kw">def</span> <span class="fn">wrapper</span><span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
            <span class="kw">for</span> attempt <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> max_attempts <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>
                <span class="kw">try</span><span class="op">:</span>
                    <span class="kw">return</span> func<span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span>
                <span class="kw">except</span> exceptions <span class="kw">as</span> e<span class="op">:</span>
                    <span class="kw">if</span> attempt <span class="op">==</span> max_attempts<span class="op">:</span>
                        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">All </span><span class="st">{</span>max_attempts<span class="st">}</span><span class="st"> attempts failed for </span><span class="st">{</span>func<span class="op">.</span>__name__<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
                        <span class="kw">raise</span>
                    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Attempt </span><span class="st">{</span>attempt<span class="st">}</span><span class="st"> failed: </span><span class="st">{</span>e<span class="st">}</span><span class="st">. Retrying in </span><span class="st">{</span>delay<span class="st">}</span><span class="st">s...</span><span class="st">&quot;</span><span class="op">)</span>
                    time<span class="op">.</span>sleep<span class="op">(</span>delay<span class="op">)</span>
        <span class="kw">return</span> wrapper
    <span class="kw">return</span> decorator

<span class="dc">@retry</span><span class="op">(</span>max_attempts<span class="op">=</span><span class="num">3</span><span class="op">,</span> delay<span class="op">=</span><span class="num">2</span><span class="op">)</span>
<span class="kw">def</span> <span class="fn">fetch_data</span><span class="op">(</span>url<span class="op">)</span><span class="op">:</span>
    <span class="kw">import</span> random
    <span class="kw">if</span> random<span class="op">.</span>random<span class="op">(</span><span class="op">)</span> <span class="op">&lt;</span> <span class="num">0.7</span><span class="op">:</span>
        <span class="kw">raise</span> <span class="nb">ConnectionError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Server down</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">data</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">success</span><span class="st">&quot;</span><span class="op">}</span>

<span class="cm"># Stacking decorators (applied bottom to top):</span>
<span class="dc">@timer</span>          <span class="cm"># 2nd: wraps the retry-wrapped function</span>
<span class="dc">@retry</span><span class="op">(</span>max_attempts<span class="op">=</span><span class="num">3</span><span class="op">)</span>  <span class="cm"># 1st: wraps fetch_data</span>
<span class="kw">def</span> <span class="fn">api_call</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">pass</span>
</code></pre>
<h3 id="112-context-managers">11.2 Context Managers</h3>
<p>Context managers handle setup and cleanup automatically (files, connections, locks, etc.):</p>
<pre><code><span class="cm"># You&#x27;ve already used one:</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">file.txt</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    content <span class="op">=</span> f<span class="op">.</span>read<span class="op">(</span><span class="op">)</span>
<span class="cm"># File is automatically closed here</span>

<span class="cm"># Creating your own context manager - Method 1: class-based</span>
<span class="kw">class</span> <span class="fn">Timer</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Context manager that measures execution time.&quot;&quot;&quot;</span>
    <span class="kw">def</span> <span class="fn">__enter__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">import</span> time
        <span class="nb">self</span><span class="op">.</span>start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Timer started</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="nb">self</span>  <span class="cm"># This becomes the &#x27;as&#x27; variable</span>

    <span class="kw">def</span> <span class="fn">__exit__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> exc_type<span class="op">,</span> exc_val<span class="op">,</span> exc_tb<span class="op">)</span><span class="op">:</span>
        <span class="kw">import</span> time
        <span class="nb">self</span><span class="op">.</span>elapsed <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="nb">self</span><span class="op">.</span>start
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Timer stopped: </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>elapsed<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> <span class="kw">False</span>  <span class="cm"># Don&#x27;t suppress exceptions</span>

<span class="cm"># Usage:</span>
<span class="kw">with</span> Timer<span class="op">(</span><span class="op">)</span> <span class="kw">as</span> t<span class="op">:</span>
    total <span class="op">=</span> <span class="nb">sum</span><span class="op">(</span><span class="nb">range</span><span class="op">(</span><span class="num">1_000_000</span><span class="op">)</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Elapsed: </span><span class="st">{</span>t<span class="op">.</span>elapsed<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Method 2: contextlib (simpler for most cases)</span>
<span class="kw">from</span> contextlib <span class="kw">import</span> contextmanager

<span class="dc">@contextmanager</span>
<span class="kw">def</span> <span class="fn">timer</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">import</span> time
    start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
    <span class="kw">yield</span>  <span class="cm"># Everything before yield is __enter__, after is __exit__</span>
    elapsed <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Elapsed: </span><span class="st">{</span>elapsed<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">with</span> timer<span class="op">(</span><span class="op">)</span><span class="op">:</span>
    total <span class="op">=</span> <span class="nb">sum</span><span class="op">(</span><span class="nb">range</span><span class="op">(</span><span class="num">1_000_000</span><span class="op">)</span><span class="op">)</span>

<span class="cm"># Practical example: temporary directory change</span>
<span class="kw">import</span> os
<span class="kw">from</span> contextlib <span class="kw">import</span> contextmanager

<span class="dc">@contextmanager</span>
<span class="kw">def</span> <span class="fn">change_directory</span><span class="op">(</span>path<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Temporarily change to a directory, then restore.&quot;&quot;&quot;</span>
    original <span class="op">=</span> os<span class="op">.</span>getcwd<span class="op">(</span><span class="op">)</span>
    <span class="kw">try</span><span class="op">:</span>
        os<span class="op">.</span>chdir<span class="op">(</span>path<span class="op">)</span>
        <span class="kw">yield</span> path
    <span class="kw">finally</span><span class="op">:</span>
        os<span class="op">.</span>chdir<span class="op">(</span>original<span class="op">)</span>

<span class="kw">with</span> change_directory<span class="op">(</span><span class="st">&quot;</span><span class="st">/tmp</span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Now in: </span><span class="st">{</span>os<span class="op">.</span>getcwd<span class="op">(</span><span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># /tmp</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Back in: </span><span class="st">{</span>os<span class="op">.</span>getcwd<span class="op">(</span><span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>     <span class="cm"># original directory</span>
</code></pre>
<h3 id="113-dataclasses">11.3 Dataclasses</h3>
<p>Dataclasses auto-generate <code class="inline">__init__</code>, <code class="inline">__repr__</code>, <code class="inline">__eq__</code>, and more:</p>
<pre><code><span class="kw">from</span> dataclasses <span class="kw">import</span> dataclass<span class="op">,</span> field
<span class="kw">from</span> typing <span class="kw">import</span> List<span class="op">,</span> Optional

<span class="dc">@dataclass</span>
<span class="kw">class</span> <span class="fn">Employee</span><span class="op">:</span>
    name<span class="op">:</span> <span class="nb">str</span>
    age<span class="op">:</span> <span class="nb">int</span>
    department<span class="op">:</span> <span class="nb">str</span>
    salary<span class="op">:</span> <span class="nb">float</span> <span class="op">=</span> <span class="num">50000.0</span>                    <span class="cm"># Default value</span>
    skills<span class="op">:</span> List<span class="op">[</span><span class="nb">str</span><span class="op">]</span> <span class="op">=</span> field<span class="op">(</span>default_factory<span class="op">=</span><span class="nb">list</span><span class="op">)</span>  <span class="cm"># Mutable default</span>

    <span class="dc">@property</span>
    <span class="kw">def</span> <span class="fn">is_senior</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>age <span class="op">&gt;</span><span class="op">=</span> <span class="num">40</span>

<span class="cm"># Auto-generated __init__:</span>
emp <span class="op">=</span> Employee<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">35</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Engineering</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">95000</span><span class="op">,</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Python</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">SQL</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>

<span class="cm"># Auto-generated __repr__:</span>
<span class="nb">print</span><span class="op">(</span>emp<span class="op">)</span>
<span class="cm"># Employee(name=&#x27;Alice&#x27;, age=35, department=&#x27;Engineering&#x27;, salary=95000, skills=[&#x27;Python&#x27;, &#x27;SQL&#x27;])</span>

<span class="cm"># Auto-generated __eq__:</span>
emp2 <span class="op">=</span> Employee<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">35</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Engineering</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">95000</span><span class="op">,</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Python</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">SQL</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>emp <span class="op">==</span> emp2<span class="op">)</span>  <span class="cm"># True</span>

<span class="cm"># Frozen (immutable) dataclass:</span>
<span class="dc">@dataclass</span><span class="op">(</span>frozen<span class="op">=</span><span class="kw">True</span><span class="op">)</span>
<span class="kw">class</span> <span class="fn">Point</span><span class="op">:</span>
    x<span class="op">:</span> <span class="nb">float</span>
    y<span class="op">:</span> <span class="nb">float</span>
<span class="cm"># Can be used as dict key or in sets</span>

<span class="cm"># Ordered dataclass (enables sorting):</span>
<span class="dc">@dataclass</span><span class="op">(</span>order<span class="op">=</span><span class="kw">True</span><span class="op">)</span>
<span class="kw">class</span> <span class="fn">Priority</span><span class="op">:</span>
    priority<span class="op">:</span> <span class="nb">int</span>
    name<span class="op">:</span> <span class="nb">str</span> <span class="op">=</span> field<span class="op">(</span>compare<span class="op">=</span><span class="kw">False</span><span class="op">)</span>  <span class="cm"># Excluded from comparison</span>

tasks <span class="op">=</span> <span class="op">[</span>Priority<span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">low</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span> Priority<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">high</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span> Priority<span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">med</span><span class="st">&quot;</span><span class="op">)</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">sorted</span><span class="op">(</span>tasks<span class="op">)</span><span class="op">)</span>  <span class="cm"># Sorted by priority</span>
</code></pre>
<h3 id="114-regular-expressions">11.4 Regular Expressions</h3>
<pre><code><span class="kw">import</span> re

text <span class="op">=</span> <span class="st">&quot;</span><span class="st">Contact alice@example.com or bob@test.org. Call 555-123-4567 on 2024-01-15.</span><span class="st">&quot;</span>

<span class="cm"># findall - find ALL matches</span>
emails <span class="op">=</span> re<span class="op">.</span>findall<span class="op">(</span><span class="st">r</span><span class="st">&#x27;</span><span class="st">[</span><span class="st">\</span><span class="st">w.+-]+@[</span><span class="st">\</span><span class="st">w-]+</span><span class="st">\</span><span class="st">.[</span><span class="st">\</span><span class="st">w.]+</span><span class="st">&#x27;</span><span class="op">,</span> text<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>emails<span class="op">)</span>  <span class="cm"># [&#x27;alice@example.com&#x27;, &#x27;bob@test.org&#x27;]</span>

dates <span class="op">=</span> re<span class="op">.</span>findall<span class="op">(</span><span class="st">r</span><span class="st">&#x27;</span><span class="st">\</span><span class="st">d</span><span class="st">{4}</span><span class="st">-</span><span class="st">\</span><span class="st">d</span><span class="st">{2}</span><span class="st">-</span><span class="st">\</span><span class="st">d</span><span class="st">{2}</span><span class="st">&#x27;</span><span class="op">,</span> text<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>dates<span class="op">)</span>  <span class="cm"># [&#x27;2024-01-15&#x27;]</span>

phones <span class="op">=</span> re<span class="op">.</span>findall<span class="op">(</span><span class="st">r</span><span class="st">&#x27;</span><span class="st">\</span><span class="st">d</span><span class="st">{3}</span><span class="st">-</span><span class="st">\</span><span class="st">d</span><span class="st">{3}</span><span class="st">-</span><span class="st">\</span><span class="st">d</span><span class="st">{4}</span><span class="st">&#x27;</span><span class="op">,</span> text<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>phones<span class="op">)</span>  <span class="cm"># [&#x27;555-123-4567&#x27;]</span>

<span class="cm"># search - find FIRST match</span>
match <span class="op">=</span> re<span class="op">.</span>search<span class="op">(</span><span class="st">r</span><span class="st">&#x27;</span><span class="st">(</span><span class="st">\</span><span class="st">w+)@([</span><span class="st">\</span><span class="st">w.]+)</span><span class="st">&#x27;</span><span class="op">,</span> text<span class="op">)</span>
<span class="kw">if</span> match<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>match<span class="op">.</span>group<span class="op">(</span><span class="num">0</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &#x27;alice@example.com&#x27; (full match)</span>
    <span class="nb">print</span><span class="op">(</span>match<span class="op">.</span>group<span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &#x27;alice&#x27; (first group)</span>
    <span class="nb">print</span><span class="op">(</span>match<span class="op">.</span>group<span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># &#x27;example.com&#x27; (second group)</span>

<span class="cm"># sub - replace matches</span>
cleaned <span class="op">=</span> re<span class="op">.</span>sub<span class="op">(</span><span class="st">r</span><span class="st">&#x27;</span><span class="st">\</span><span class="st">d</span><span class="st">{3}</span><span class="st">-</span><span class="st">\</span><span class="st">d</span><span class="st">{3}</span><span class="st">-</span><span class="st">\</span><span class="st">d</span><span class="st">{4}</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">[PHONE REDACTED]</span><span class="st">&#x27;</span><span class="op">,</span> text<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>cleaned<span class="op">)</span>

<span class="cm"># compile - pre-compile for reuse (faster in loops)</span>
email_pattern <span class="op">=</span> re<span class="op">.</span>compile<span class="op">(</span><span class="st">r</span><span class="st">&#x27;</span><span class="st">[</span><span class="st">\</span><span class="st">w.+-]+@[</span><span class="st">\</span><span class="st">w-]+</span><span class="st">\</span><span class="st">.[</span><span class="st">\</span><span class="st">w.]+</span><span class="st">&#x27;</span><span class="op">)</span>
matches <span class="op">=</span> email_pattern<span class="op">.</span>findall<span class="op">(</span>some_large_text<span class="op">)</span>
</code></pre>
<h3 id="115-date-and-time">11.5 Date and Time</h3>
<pre><code><span class="kw">from</span> datetime <span class="kw">import</span> datetime<span class="op">,</span> date<span class="op">,</span> timedelta<span class="op">,</span> timezone

<span class="cm"># Current date/time</span>
now <span class="op">=</span> datetime<span class="op">.</span>now<span class="op">(</span><span class="op">)</span>
today <span class="op">=</span> date<span class="op">.</span>today<span class="op">(</span><span class="op">)</span>
utc_now <span class="op">=</span> datetime<span class="op">.</span>now<span class="op">(</span>timezone<span class="op">.</span>utc<span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>now<span class="op">)</span>          <span class="cm"># 2024-03-15 14:30:45.123456</span>
<span class="nb">print</span><span class="op">(</span>today<span class="op">)</span>        <span class="cm"># 2024-03-15</span>

<span class="cm"># Formatting (datetime -&gt; string)</span>
<span class="nb">print</span><span class="op">(</span>now<span class="op">.</span>strftime<span class="op">(</span><span class="st">&quot;</span><span class="st">%</span><span class="st">Y-</span><span class="st">%</span><span class="st">m-</span><span class="st">%d</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>          <span class="cm"># 2024-03-15</span>
<span class="nb">print</span><span class="op">(</span>now<span class="op">.</span>strftime<span class="op">(</span><span class="st">&quot;</span><span class="st">%</span><span class="st">B </span><span class="st">%d</span><span class="st">, </span><span class="st">%</span><span class="st">Y</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>         <span class="cm"># March 15, 2024</span>
<span class="nb">print</span><span class="op">(</span>now<span class="op">.</span>strftime<span class="op">(</span><span class="st">&quot;</span><span class="st">%</span><span class="st">I:</span><span class="st">%</span><span class="st">M </span><span class="st">%</span><span class="st">p</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>          <span class="cm"># 02:30 PM</span>

<span class="cm"># Parsing (string -&gt; datetime)</span>
dt <span class="op">=</span> datetime<span class="op">.</span>strptime<span class="op">(</span><span class="st">&quot;</span><span class="st">2024-03-15 14:30:00</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">%</span><span class="st">Y-</span><span class="st">%</span><span class="st">m-</span><span class="st">%d</span><span class="st"> </span><span class="st">%</span><span class="st">H:</span><span class="st">%</span><span class="st">M:</span><span class="st">%</span><span class="st">S</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Arithmetic</span>
tomorrow <span class="op">=</span> now <span class="op">+</span> timedelta<span class="op">(</span>days<span class="op">=</span><span class="num">1</span><span class="op">)</span>
next_week <span class="op">=</span> now <span class="op">+</span> timedelta<span class="op">(</span>weeks<span class="op">=</span><span class="num">1</span><span class="op">)</span>
two_hours_later <span class="op">=</span> now <span class="op">+</span> timedelta<span class="op">(</span>hours<span class="op">=</span><span class="num">2</span><span class="op">)</span>

<span class="cm"># Difference between dates</span>
diff <span class="op">=</span> datetime<span class="op">(</span><span class="num">2024</span><span class="op">,</span> <span class="num">12</span><span class="op">,</span> <span class="num">31</span><span class="op">)</span> <span class="op">-</span> datetime<span class="op">(</span><span class="num">2024</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>diff<span class="op">.</span>days<span class="st">}</span><span class="st"> days</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># 365 days</span>

<span class="cm"># Timezones (pip install pytz)</span>
<span class="kw">import</span> pytz
est <span class="op">=</span> pytz<span class="op">.</span>timezone<span class="op">(</span><span class="st">&#x27;</span><span class="st">US/Eastern</span><span class="st">&#x27;</span><span class="op">)</span>
now_est <span class="op">=</span> datetime<span class="op">.</span>now<span class="op">(</span>est<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">EST: </span><span class="st">{</span>now_est<span class="op">.</span>strftime<span class="op">(</span><span class="st">&#x27;</span><span class="st">%</span><span class="st">Y-</span><span class="st">%</span><span class="st">m-</span><span class="st">%d</span><span class="st"> </span><span class="st">%</span><span class="st">H:</span><span class="st">%</span><span class="st">M </span><span class="st">%</span><span class="st">Z</span><span class="st">&#x27;</span><span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<hr>
<div class="section-divider" id="chapter-12-advanced-python"><h2>Chapter 12: Advanced Python</h2><div class="line"></div><span class="badge" style="background:var(--pink-dim);color:var(--pink)">Chapter 12</span></div>
<h3 id="121-metaclasses">12.1 Metaclasses</h3>
<p>A metaclass is a "class of a class" - it controls how classes themselves are created:</p>
<pre><code><span class="cm"># Every class is an instance of &#x27;type&#x27;:</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">type</span><span class="op">(</span><span class="nb">int</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># &lt;class &#x27;type&#x27;&gt;</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">type</span><span class="op">(</span><span class="nb">str</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># &lt;class &#x27;type&#x27;&gt;</span>

<span class="cm"># Custom metaclass for Singleton pattern</span>
<span class="kw">class</span> <span class="fn">SingletonMeta</span><span class="op">(</span><span class="nb">type</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Metaclass that ensures only one instance of a class exists.&quot;&quot;&quot;</span>
    _instances <span class="op">=</span> <span class="op">{</span><span class="op">}</span>

    <span class="kw">def</span> <span class="fn">__call__</span><span class="op">(</span><span class="nb">cls</span><span class="op">,</span> <span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> <span class="nb">cls</span> <span class="kw">not</span> <span class="kw">in</span> <span class="nb">cls</span><span class="op">.</span>_instances<span class="op">:</span>
            <span class="nb">cls</span><span class="op">.</span>_instances<span class="op">[</span><span class="nb">cls</span><span class="op">]</span> <span class="op">=</span> <span class="nb">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="fn">__call__</span><span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span>
        <span class="kw">return</span> <span class="nb">cls</span><span class="op">.</span>_instances<span class="op">[</span><span class="nb">cls</span><span class="op">]</span>

<span class="kw">class</span> <span class="fn">Database</span><span class="op">(</span>metaclass<span class="op">=</span>SingletonMeta<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>connection <span class="op">=</span> <span class="st">&quot;</span><span class="st">connected</span><span class="st">&quot;</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Database initialized</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Usage:</span>
db1 <span class="op">=</span> Database<span class="op">(</span><span class="op">)</span>  <span class="cm"># Prints &quot;Database initialized&quot;</span>
db2 <span class="op">=</span> Database<span class="op">(</span><span class="op">)</span>  <span class="cm"># Does NOT print again - returns same instance</span>
<span class="nb">print</span><span class="op">(</span>db1 <span class="kw">is</span> db2<span class="op">)</span>  <span class="cm"># True</span>
</code></pre>
<h3 id="122-the-gil-global-interpreter-lock">12.2 The GIL (Global Interpreter Lock)</h3>
<p>The GIL is a mutex that allows only one thread to execute Python bytecode at a time:</p>
<pre><code><span class="cm"># CPU-bound: GIL is a bottleneck -&gt; use multiprocessing</span>
<span class="cm"># I/O-bound: GIL is released during I/O -&gt; threading works fine</span>

<span class="cm"># Example: CPU-bound (GIL hurts performance)</span>
<span class="kw">import</span> time
<span class="kw">from</span> threading <span class="kw">import</span> Thread
<span class="kw">from</span> multiprocessing <span class="kw">import</span> Process

<span class="kw">def</span> <span class="fn">cpu_heavy</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    total <span class="op">=</span> <span class="nb">sum</span><span class="op">(</span>i <span class="op">*</span> i <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span>n<span class="op">)</span><span class="op">)</span>
    <span class="kw">return</span> total

<span class="cm"># Threading: NOT faster for CPU work (GIL blocks parallel execution)</span>
start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
threads <span class="op">=</span> <span class="op">[</span>Thread<span class="op">(</span>target<span class="op">=</span>cpu_heavy<span class="op">,</span> args<span class="op">=</span><span class="op">(</span><span class="num">5_000_000</span><span class="op">,</span><span class="op">)</span><span class="op">)</span> <span class="kw">for</span> _ <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">4</span><span class="op">)</span><span class="op">]</span>
<span class="kw">for</span> t <span class="kw">in</span> threads<span class="op">:</span> t<span class="op">.</span>start<span class="op">(</span><span class="op">)</span>
<span class="kw">for</span> t <span class="kw">in</span> threads<span class="op">:</span> t<span class="op">.</span>join<span class="op">(</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Threads: </span><span class="st">{</span>time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start<span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># ~4s (serial!)</span>

<span class="cm"># Multiprocessing: FASTER (each process has its own GIL)</span>
start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
processes <span class="op">=</span> <span class="op">[</span>Process<span class="op">(</span>target<span class="op">=</span>cpu_heavy<span class="op">,</span> args<span class="op">=</span><span class="op">(</span><span class="num">5_000_000</span><span class="op">,</span><span class="op">)</span><span class="op">)</span> <span class="kw">for</span> _ <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">4</span><span class="op">)</span><span class="op">]</span>
<span class="kw">for</span> p <span class="kw">in</span> processes<span class="op">:</span> p<span class="op">.</span>start<span class="op">(</span><span class="op">)</span>
<span class="kw">for</span> p <span class="kw">in</span> processes<span class="op">:</span> p<span class="op">.</span>join<span class="op">(</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Processes: </span><span class="st">{</span>time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start<span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># ~1s (parallel!)</span>
</code></pre>
<h3 id="123-__slots__-memory-optimization">12.3 <code class="inline">__slots__</code> (Memory Optimization)</h3>
<pre><code><span class="kw">import</span> sys

<span class="kw">class</span> <span class="fn">RegularPoint</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>x <span class="op">=</span> x
        <span class="nb">self</span><span class="op">.</span>y <span class="op">=</span> y

<span class="kw">class</span> <span class="fn">SlottedPoint</span><span class="op">:</span>
    __slots__ <span class="op">=</span> <span class="op">[</span><span class="st">&#x27;</span><span class="st">x</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">y</span><span class="st">&#x27;</span><span class="op">]</span>  <span class="cm"># No __dict__, saves memory</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>x <span class="op">=</span> x
        <span class="nb">self</span><span class="op">.</span>y <span class="op">=</span> y

<span class="cm"># Memory comparison (for millions of instances, this matters):</span>
regular <span class="op">=</span> RegularPoint<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">)</span>
slotted <span class="op">=</span> SlottedPoint<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>sys<span class="op">.</span>getsizeof<span class="op">(</span>regular<span class="op">.</span>__dict__<span class="op">)</span><span class="op">)</span>  <span class="cm"># ~104 bytes per instance</span>
<span class="cm"># slotted has no __dict__ - saves ~50% memory</span>

<span class="cm"># Tradeoff: can&#x27;t add new attributes</span>
<span class="cm"># slotted.z = 3  # AttributeError!</span>
</code></pre>
<h3 id="124-deep-copy-vs-shallow-copy">12.4 Deep Copy vs Shallow Copy</h3>
<pre><code><span class="kw">import</span> copy

<span class="cm"># Shallow copy: copies the outer object, but inner objects are SHARED</span>
original <span class="op">=</span> <span class="op">[</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span><span class="op">]</span>
shallow <span class="op">=</span> copy<span class="op">.</span>copy<span class="op">(</span>original<span class="op">)</span>

<span class="cm"># They look the same:</span>
<span class="nb">print</span><span class="op">(</span>original<span class="op">)</span>  <span class="cm"># [[1, 2, 3], [4, 5, 6]]</span>
<span class="nb">print</span><span class="op">(</span>shallow<span class="op">)</span>   <span class="cm"># [[1, 2, 3], [4, 5, 6]]</span>

<span class="cm"># But modifying an inner list affects both:</span>
original<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">.</span>append<span class="op">(</span><span class="num">99</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>original<span class="op">)</span>  <span class="cm"># [[1, 2, 3, 99], [4, 5, 6]]</span>
<span class="nb">print</span><span class="op">(</span>shallow<span class="op">)</span>   <span class="cm"># [[1, 2, 3, 99], [4, 5, 6]]  &lt;- ALSO CHANGED!</span>

<span class="cm"># Deep copy: copies EVERYTHING recursively</span>
original2 <span class="op">=</span> <span class="op">[</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span><span class="op">]</span>
deep <span class="op">=</span> copy<span class="op">.</span>deepcopy<span class="op">(</span>original2<span class="op">)</span>

original2<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">.</span>append<span class="op">(</span><span class="num">99</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>original2<span class="op">)</span>  <span class="cm"># [[1, 2, 3, 99], [4, 5, 6]]</span>
<span class="nb">print</span><span class="op">(</span>deep<span class="op">)</span>       <span class="cm"># [[1, 2, 3], [4, 5, 6]]  &lt;- NOT affected</span>
</code></pre>
<hr>
<div class="section-divider" id="chapter-13-concurrency-parallelism"><h2>Chapter 13: Concurrency & Parallelism</h2><div class="line"></div><span class="badge" style="background:var(--cyan-dim);color:var(--cyan)">Chapter 13</span></div>
<h3 id="131-threading-for-io-bound-tasks">13.1 Threading (For I/O-bound Tasks)</h3>
<pre><code><span class="kw">from</span> concurrent.futures <span class="kw">import</span> ThreadPoolExecutor<span class="op">,</span> as_completed
<span class="kw">import</span> time

<span class="kw">def</span> <span class="fn">download_page</span><span class="op">(</span>url<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Simulate downloading a web page.&quot;&quot;&quot;</span>
    time<span class="op">.</span>sleep<span class="op">(</span><span class="num">1</span><span class="op">)</span>  <span class="cm"># Simulate network I/O</span>
    <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Content of </span><span class="st">{</span>url<span class="st">}</span><span class="st">&quot;</span>

urls <span class="op">=</span> <span class="op">[</span><span class="st">f</span><span class="st">&quot;</span><span class="st">https://example.com/page/</span><span class="st">{</span>i<span class="st">}</span><span class="st">&quot;</span> <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">]</span>

<span class="cm"># Sequential: ~10 seconds</span>
start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
results <span class="op">=</span> <span class="op">[</span>download_page<span class="op">(</span>url<span class="op">)</span> <span class="kw">for</span> url <span class="kw">in</span> urls<span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Sequential: </span><span class="st">{</span>time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start<span class="st">:</span><span class="st">.1f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Parallel with ThreadPoolExecutor: ~2 seconds</span>
start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
<span class="kw">with</span> ThreadPoolExecutor<span class="op">(</span>max_workers<span class="op">=</span><span class="num">5</span><span class="op">)</span> <span class="kw">as</span> executor<span class="op">:</span>
    futures <span class="op">=</span> <span class="op">{</span>executor<span class="op">.</span>submit<span class="op">(</span>download_page<span class="op">,</span> url<span class="op">)</span><span class="op">:</span> url <span class="kw">for</span> url <span class="kw">in</span> urls<span class="op">}</span>
    <span class="kw">for</span> future <span class="kw">in</span> as_completed<span class="op">(</span>futures<span class="op">)</span><span class="op">:</span>
        url <span class="op">=</span> futures<span class="op">[</span>future<span class="op">]</span>
        <span class="kw">try</span><span class="op">:</span>
            result <span class="op">=</span> future<span class="op">.</span>result<span class="op">(</span><span class="op">)</span>
            <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Done: </span><span class="st">{</span>url<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">except</span> <span class="nb">Exception</span> <span class="kw">as</span> e<span class="op">:</span>
            <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Failed: </span><span class="st">{</span>url<span class="st">}</span><span class="st"> - </span><span class="st">{</span>e<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Threaded: </span><span class="st">{</span>time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start<span class="st">:</span><span class="st">.1f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="132-multiprocessing-for-cpu-bound-tasks">13.2 Multiprocessing (For CPU-bound Tasks)</h3>
<pre><code><span class="kw">from</span> multiprocessing <span class="kw">import</span> Pool

<span class="kw">def</span> <span class="fn">cpu_task</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;CPU-intensive calculation.&quot;&quot;&quot;</span>
    <span class="kw">return</span> <span class="nb">sum</span><span class="op">(</span>i <span class="op">*</span> i <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span>n<span class="op">)</span><span class="op">)</span>

<span class="cm"># Parallel processing</span>
<span class="kw">with</span> Pool<span class="op">(</span>processes<span class="op">=</span><span class="num">4</span><span class="op">)</span> <span class="kw">as</span> pool<span class="op">:</span>
    results <span class="op">=</span> pool<span class="op">.</span>map<span class="op">(</span>cpu_task<span class="op">,</span> <span class="op">[</span><span class="num">10</span><span class="op">*</span><span class="op">*</span><span class="num">6</span><span class="op">,</span> <span class="num">10</span><span class="op">*</span><span class="op">*</span><span class="num">6</span><span class="op">,</span> <span class="num">10</span><span class="op">*</span><span class="op">*</span><span class="num">6</span><span class="op">,</span> <span class="num">10</span><span class="op">*</span><span class="op">*</span><span class="num">6</span><span class="op">]</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Total: </span><span class="st">{</span><span class="nb">sum</span><span class="op">(</span>results<span class="op">)</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="133-asyncio-modern-async-io">13.3 asyncio (Modern Async I/O)</h3>
<pre><code><span class="kw">import</span> asyncio

<span class="kw">async</span> <span class="kw">def</span> <span class="fn">fetch_data</span><span class="op">(</span>name<span class="op">,</span> delay<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Starting </span><span class="st">{</span>name<span class="st">}</span><span class="st">...</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">await</span> asyncio<span class="op">.</span>sleep<span class="op">(</span>delay<span class="op">)</span>  <span class="cm"># Non-blocking sleep</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Done </span><span class="st">{</span>name<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>name<span class="st">}</span><span class="st">: </span><span class="st">{</span>delay<span class="st">}</span><span class="st">s of data</span><span class="st">&quot;</span>

<span class="kw">async</span> <span class="kw">def</span> <span class="fn">main</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="cm"># Run all three concurrently</span>
    results <span class="op">=</span> <span class="kw">await</span> asyncio<span class="op">.</span>gather<span class="op">(</span>
        fetch_data<span class="op">(</span><span class="st">&quot;</span><span class="st">users</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">2</span><span class="op">)</span><span class="op">,</span>
        fetch_data<span class="op">(</span><span class="st">&quot;</span><span class="st">orders</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">,</span>
        fetch_data<span class="op">(</span><span class="st">&quot;</span><span class="st">products</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">1.5</span><span class="op">)</span><span class="op">,</span>
    <span class="op">)</span>
    <span class="kw">for</span> r <span class="kw">in</span> results<span class="op">:</span>
        <span class="nb">print</span><span class="op">(</span>r<span class="op">)</span>

asyncio<span class="op">.</span>run<span class="op">(</span>main<span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="cm"># All three complete in ~2s (the longest), not 4.5s (sequential)</span>
</code></pre>
<h3 id="when-to-use-what">When to Use What</h3>
<table><thead><tr><th>Task Type</th><th>Tool</th><th>Example</th></tr></thead><tbody><tr><td>Download files, API calls</td><td><code class="inline">ThreadPoolExecutor</code></td><td>HTTP requests</td></tr>
<tr><td>Database queries</td><td><code class="inline">threading</code> / <code class="inline">asyncio</code></td><td>SELECT/INSERT</td></tr>
<tr><td>Number crunching</td><td><code class="inline">multiprocessing.Pool</code></td><td>Math, image processing</td></tr>
<tr><td>Many concurrent connections</td><td><code class="inline">asyncio</code></td><td>Web servers, chat</td></tr></tbody></table>
<hr>
<div class="section-divider" id="chapter-14-design-patterns"><h2>Chapter 14: Design Patterns</h2><div class="line"></div><span class="badge" style="background:var(--amber-dim);color:var(--amber)">Chapter 14</span></div>
<h3 id="141-singleton">14.1 Singleton</h3>
<pre><code><span class="kw">class</span> <span class="fn">Singleton</span><span class="op">:</span>
    _instance <span class="op">=</span> <span class="kw">None</span>

    <span class="kw">def</span> <span class="fn">__new__</span><span class="op">(</span><span class="nb">cls</span><span class="op">,</span> <span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> <span class="nb">cls</span><span class="op">.</span>_instance <span class="kw">is</span> <span class="kw">None</span><span class="op">:</span>
            <span class="nb">cls</span><span class="op">.</span>_instance <span class="op">=</span> <span class="nb">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="fn">__new__</span><span class="op">(</span><span class="nb">cls</span><span class="op">)</span>
        <span class="kw">return</span> <span class="nb">cls</span><span class="op">.</span>_instance

    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> value<span class="op">=</span><span class="kw">None</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> <span class="kw">not</span> <span class="nb">hasattr</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">_initialized</span><span class="st">&#x27;</span><span class="op">)</span><span class="op">:</span>
            <span class="nb">self</span><span class="op">.</span>value <span class="op">=</span> value
            <span class="nb">self</span><span class="op">.</span>_initialized <span class="op">=</span> <span class="kw">True</span>

s1 <span class="op">=</span> Singleton<span class="op">(</span><span class="st">&quot;</span><span class="st">first</span><span class="st">&quot;</span><span class="op">)</span>
s2 <span class="op">=</span> Singleton<span class="op">(</span><span class="st">&quot;</span><span class="st">second</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>s1 <span class="kw">is</span> s2<span class="op">)</span>      <span class="cm"># True - same object</span>
<span class="nb">print</span><span class="op">(</span>s1<span class="op">.</span>value<span class="op">)</span>       <span class="cm"># &quot;first&quot; - not overwritten</span>
</code></pre>
<h3 id="142-factory-pattern">14.2 Factory Pattern</h3>
<pre><code><span class="kw">from</span> abc <span class="kw">import</span> ABC<span class="op">,</span> abstractmethod

<span class="kw">class</span> <span class="fn">Notification</span><span class="op">(</span>ABC<span class="op">)</span><span class="op">:</span>
    <span class="dc">@abstractmethod</span>
    <span class="kw">def</span> <span class="fn">send</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> message<span class="op">)</span><span class="op">:</span> <span class="kw">pass</span>

<span class="kw">class</span> <span class="fn">EmailNotification</span><span class="op">(</span>Notification<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">send</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> message<span class="op">)</span><span class="op">:</span> <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Email: </span><span class="st">{</span>message<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">class</span> <span class="fn">SMSNotification</span><span class="op">(</span>Notification<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">send</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> message<span class="op">)</span><span class="op">:</span> <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">SMS: </span><span class="st">{</span>message<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">class</span> <span class="fn">NotificationFactory</span><span class="op">:</span>
    _registry <span class="op">=</span> <span class="op">{</span>
        <span class="st">&quot;</span><span class="st">email</span><span class="st">&quot;</span><span class="op">:</span> EmailNotification<span class="op">,</span>
        <span class="st">&quot;</span><span class="st">sms</span><span class="st">&quot;</span><span class="op">:</span> SMSNotification<span class="op">,</span>
    <span class="op">}</span>

    <span class="dc">@classmethod</span>
    <span class="kw">def</span> <span class="fn">create</span><span class="op">(</span><span class="nb">cls</span><span class="op">,</span> channel<span class="op">:</span> <span class="nb">str</span><span class="op">)</span> <span class="op">-</span><span class="op">&gt;</span> Notification<span class="op">:</span>
        klass <span class="op">=</span> <span class="nb">cls</span><span class="op">.</span>_registry<span class="op">.</span>get<span class="op">(</span>channel<span class="op">)</span>
        <span class="kw">if</span> <span class="kw">not</span> klass<span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Unknown channel: </span><span class="st">{</span>channel<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> klass<span class="op">(</span><span class="op">)</span>

    <span class="dc">@classmethod</span>
    <span class="kw">def</span> <span class="fn">register</span><span class="op">(</span><span class="nb">cls</span><span class="op">,</span> channel<span class="op">:</span> <span class="nb">str</span><span class="op">,</span> klass<span class="op">)</span><span class="op">:</span>
        <span class="nb">cls</span><span class="op">.</span>_registry<span class="op">[</span>channel<span class="op">]</span> <span class="op">=</span> klass

<span class="cm"># Usage:</span>
notif <span class="op">=</span> NotificationFactory<span class="op">.</span>create<span class="op">(</span><span class="st">&quot;</span><span class="st">email</span><span class="st">&quot;</span><span class="op">)</span>
notif<span class="op">.</span>send<span class="op">(</span><span class="st">&quot;</span><span class="st">Hello!</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="143-observer-pattern">14.3 Observer Pattern</h3>
<pre><code><span class="kw">class</span> <span class="fn">EventEmitter</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>_listeners <span class="op">=</span> <span class="op">{</span><span class="op">}</span>

    <span class="kw">def</span> <span class="fn">on</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> event<span class="op">,</span> callback<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>_listeners<span class="op">.</span>setdefault<span class="op">(</span>event<span class="op">,</span> <span class="op">[</span><span class="op">]</span><span class="op">)</span><span class="op">.</span>append<span class="op">(</span>callback<span class="op">)</span>

    <span class="kw">def</span> <span class="fn">emit</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> event<span class="op">,</span> <span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
        <span class="kw">for</span> callback <span class="kw">in</span> <span class="nb">self</span><span class="op">.</span>_listeners<span class="op">.</span>get<span class="op">(</span>event<span class="op">,</span> <span class="op">[</span><span class="op">]</span><span class="op">)</span><span class="op">:</span>
            callback<span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span>

<span class="cm"># Usage</span>
bus <span class="op">=</span> EventEmitter<span class="op">(</span><span class="op">)</span>
bus<span class="op">.</span>on<span class="op">(</span><span class="st">&quot;</span><span class="st">user_created</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">lambda</span> user<span class="op">:</span> <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Welcome </span><span class="st">{</span>user<span class="st">}</span><span class="st">!</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>
bus<span class="op">.</span>on<span class="op">(</span><span class="st">&quot;</span><span class="st">user_created</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">lambda</span> user<span class="op">:</span> <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Sending email to </span><span class="st">{</span>user<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>
bus<span class="op">.</span>emit<span class="op">(</span><span class="st">&quot;</span><span class="st">user_created</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">)</span>
<span class="cm"># Welcome Alice!</span>
<span class="cm"># Sending email to Alice</span>
</code></pre>
<hr>
<div class="section-divider" id="chapter-15-data-science-with-python"><h2>Chapter 15: Data Science with Python</h2><div class="line"></div><span class="badge" style="background:var(--blue-dim);color:var(--blue)">Chapter 15</span></div>
<p>Data science in Python revolves around three core libraries: <strong>NumPy</strong> for numerical computation, <strong>Pandas</strong> for data manipulation, and <strong>Matplotlib/Seaborn</strong> for visualization. Together with <strong>scikit-learn</strong> for machine learning, they form the standard data science toolkit.</p>
<h3 id="151-numpy---numerical-computing">15.1 NumPy - Numerical Computing</h3>
<p>NumPy arrays are the foundation of scientific computing in Python. They're <strong>up to 100x faster</strong> than Python lists for math because they use contiguous memory and C-optimized operations.</p>
<pre><code><span class="kw">import</span> numpy <span class="kw">as</span> np

<span class="cm"># Creating arrays</span>
arr <span class="op">=</span> np<span class="op">.</span>array<span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span><span class="op">)</span>
zeros <span class="op">=</span> np<span class="op">.</span>zeros<span class="op">(</span><span class="num">5</span><span class="op">)</span>                    <span class="cm"># [0. 0. 0. 0. 0.]</span>
ones <span class="op">=</span> np<span class="op">.</span>ones<span class="op">(</span><span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">3</span><span class="op">)</span><span class="op">)</span>                 <span class="cm"># 3x3 matrix of 1s</span>
range_arr <span class="op">=</span> np<span class="op">.</span>arange<span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">2</span><span class="op">)</span>        <span class="cm"># [0, 2, 4, 6, 8]</span>
linspace <span class="op">=</span> np<span class="op">.</span>linspace<span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">5</span><span class="op">)</span>        <span class="cm"># [0.  0.25 0.5  0.75 1. ]</span>
random_arr <span class="op">=</span> np<span class="op">.</span>random<span class="op">.</span>rand<span class="op">(</span><span class="num">5</span><span class="op">)</span>         <span class="cm"># 5 random floats [0, 1)</span>
random_int <span class="op">=</span> np<span class="op">.</span>random<span class="op">.</span>randint<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> size<span class="op">=</span><span class="num">10</span><span class="op">)</span>  <span class="cm"># 10 random ints</span>

<span class="cm"># Element-wise operations (no loops needed!)</span>
arr <span class="op">=</span> np<span class="op">.</span>array<span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>arr <span class="op">*</span> <span class="num">2</span><span class="op">)</span>       <span class="cm"># [ 2  4  6  8 10]</span>
<span class="nb">print</span><span class="op">(</span>arr <span class="op">*</span><span class="op">*</span> <span class="num">2</span><span class="op">)</span>      <span class="cm"># [ 1  4  9 16 25]</span>
<span class="nb">print</span><span class="op">(</span>arr <span class="op">+</span> <span class="num">10</span><span class="op">)</span>      <span class="cm"># [11 12 13 14 15]</span>
<span class="nb">print</span><span class="op">(</span>np<span class="op">.</span>sqrt<span class="op">(</span>arr<span class="op">)</span><span class="op">)</span>  <span class="cm"># [1.   1.41 1.73 2.   2.24]</span>

<span class="cm"># Aggregation</span>
<span class="nb">print</span><span class="op">(</span>np<span class="op">.</span>mean<span class="op">(</span>arr<span class="op">)</span><span class="op">)</span>   <span class="cm"># 3.0</span>
<span class="nb">print</span><span class="op">(</span>np<span class="op">.</span>std<span class="op">(</span>arr<span class="op">)</span><span class="op">)</span>    <span class="cm"># 1.414</span>
<span class="nb">print</span><span class="op">(</span>np<span class="op">.</span>median<span class="op">(</span>arr<span class="op">)</span><span class="op">)</span> <span class="cm"># 3.0</span>
<span class="nb">print</span><span class="op">(</span>np<span class="op">.</span>sum<span class="op">(</span>arr<span class="op">)</span><span class="op">)</span>    <span class="cm"># 15</span>
<span class="nb">print</span><span class="op">(</span>np<span class="op">.</span>min<span class="op">(</span>arr<span class="op">)</span><span class="op">,</span> np<span class="op">.</span>max<span class="op">(</span>arr<span class="op">)</span><span class="op">)</span>  <span class="cm"># 1 5</span>
</code></pre>
<p><strong>2D arrays (matrices) - the bread and butter of data science:</strong></p>
<pre><code><span class="cm"># 2D arrays</span>
matrix <span class="op">=</span> np<span class="op">.</span>array<span class="op">(</span><span class="op">[</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span><span class="op">,</span>
                    <span class="op">[</span><span class="num">4</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span><span class="op">,</span>
                    <span class="op">[</span><span class="num">7</span><span class="op">,</span> <span class="num">8</span><span class="op">,</span> <span class="num">9</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>

<span class="cm"># Indexing and slicing</span>
<span class="nb">print</span><span class="op">(</span>matrix<span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="op">:</span><span class="op">]</span><span class="op">)</span>        <span class="cm"># First row: [1, 2, 3]</span>
<span class="nb">print</span><span class="op">(</span>matrix<span class="op">[</span><span class="op">:</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">)</span>        <span class="cm"># First column: [1, 4, 7]</span>
<span class="nb">print</span><span class="op">(</span>matrix<span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="num">2</span><span class="op">,</span> <span class="num">1</span><span class="op">:</span><span class="num">3</span><span class="op">]</span><span class="op">)</span>    <span class="cm"># Sub-matrix: [[2, 3], [5, 6]]</span>
<span class="nb">print</span><span class="op">(</span>matrix<span class="op">.</span>shape<span class="op">)</span>        <span class="cm"># (3, 3)</span>

<span class="cm"># Boolean indexing (very powerful!)</span>
<span class="nb">print</span><span class="op">(</span>matrix<span class="op">[</span>matrix <span class="op">&gt;</span> <span class="num">5</span><span class="op">]</span><span class="op">)</span>  <span class="cm"># [6, 7, 8, 9]</span>
<span class="nb">print</span><span class="op">(</span>matrix<span class="op">[</span>matrix <span class="op">%</span> <span class="num">2</span> <span class="op">==</span> <span class="num">0</span><span class="op">]</span><span class="op">)</span>  <span class="cm"># [2, 4, 6, 8]</span>

<span class="cm"># Reshape</span>
flat <span class="op">=</span> np<span class="op">.</span>arange<span class="op">(</span><span class="num">12</span><span class="op">)</span>             <span class="cm"># [0,1,2,...,11]</span>
reshaped <span class="op">=</span> flat<span class="op">.</span>reshape<span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span>    <span class="cm"># 3x4 matrix</span>
<span class="nb">print</span><span class="op">(</span>reshaped<span class="op">)</span>
<span class="cm"># [[ 0  1  2  3]</span>
<span class="cm">#  [ 4  5  6  7]</span>
<span class="cm">#  [ 8  9 10 11]]</span>

<span class="cm"># Matrix operations</span>
a <span class="op">=</span> np<span class="op">.</span>array<span class="op">(</span><span class="op">[</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
b <span class="op">=</span> np<span class="op">.</span>array<span class="op">(</span><span class="op">[</span><span class="op">[</span><span class="num">5</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">7</span><span class="op">,</span> <span class="num">8</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>a <span class="op">@</span> b<span class="op">)</span>           <span class="cm"># Matrix multiplication (dot product)</span>
<span class="nb">print</span><span class="op">(</span>a <span class="op">*</span> b<span class="op">)</span>           <span class="cm"># Element-wise multiplication</span>
<span class="nb">print</span><span class="op">(</span>a<span class="op">.</span>T<span class="op">)</span>             <span class="cm"># Transpose</span>
<span class="nb">print</span><span class="op">(</span>np<span class="op">.</span>linalg<span class="op">.</span>inv<span class="op">(</span>a<span class="op">)</span><span class="op">)</span>  <span class="cm"># Inverse</span>
<span class="nb">print</span><span class="op">(</span>np<span class="op">.</span>linalg<span class="op">.</span>det<span class="op">(</span>a<span class="op">)</span><span class="op">)</span>  <span class="cm"># Determinant: -2.0</span>
</code></pre>
<p><strong>Why NumPy over lists - a speed comparison:</strong></p>
<pre><code><span class="kw">import</span> time

size <span class="op">=</span> <span class="num">1_000_000</span>

<span class="cm"># Python list</span>
py_list <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">range</span><span class="op">(</span>size<span class="op">)</span><span class="op">)</span>
start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
result <span class="op">=</span> <span class="op">[</span>x <span class="op">*</span> <span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> py_list<span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">List: </span><span class="st">{</span>time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># NumPy array</span>
np_arr <span class="op">=</span> np<span class="op">.</span>arange<span class="op">(</span>size<span class="op">)</span>
start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
result <span class="op">=</span> np_arr <span class="op">*</span> <span class="num">2</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">NumPy: </span><span class="st">{</span>time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>
<span class="cm"># NumPy is typically 50-100x faster!</span>
</code></pre>
<h3 id="152-pandas---data-manipulation">15.2 Pandas - Data Manipulation</h3>
<p>Pandas is <em>the</em> tool for working with tabular data (think spreadsheets, CSV files, database tables).</p>
<p><strong>Creating DataFrames:</strong></p>
<pre><code><span class="kw">import</span> pandas <span class="kw">as</span> pd

<span class="cm"># From a dictionary</span>
df <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span>
    <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Eve</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">30</span><span class="op">,</span> <span class="num">25</span><span class="op">,</span> <span class="num">35</span><span class="op">,</span> <span class="num">28</span><span class="op">,</span> <span class="num">32</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">LA</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Chicago</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">LA</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">95000</span><span class="op">,</span> <span class="num">72000</span><span class="op">,</span> <span class="num">88000</span><span class="op">,</span> <span class="num">78000</span><span class="op">,</span> <span class="num">105000</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">department</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Eng</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Sales</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Eng</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">HR</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Eng</span><span class="st">&quot;</span><span class="op">]</span>
<span class="op">}</span><span class="op">)</span>

<span class="cm"># From CSV file</span>
<span class="cm"># df = pd.read_csv(&quot;employees.csv&quot;)</span>

<span class="cm"># From JSON</span>
<span class="cm"># df = pd.read_json(&quot;data.json&quot;)</span>
</code></pre>
<p><strong>Exploring your data (always do this first!):</strong></p>
<pre><code><span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>head<span class="op">(</span><span class="op">)</span><span class="op">)</span>       <span class="cm"># First 5 rows</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>tail<span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">)</span>      <span class="cm"># Last 3 rows</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>shape<span class="op">)</span>        <span class="cm"># (5, 5) = 5 rows, 5 columns</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>dtypes<span class="op">)</span>       <span class="cm"># Data type of each column</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>info<span class="op">(</span><span class="op">)</span><span class="op">)</span>       <span class="cm"># Summary: types, non-null counts, memory</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>describe<span class="op">(</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># Statistics: mean, std, min, max, percentiles</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>columns<span class="op">.</span>tolist<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># Column names as a list</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>nunique<span class="op">(</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># Number of unique values per column</span>
</code></pre>
<p><strong>Selecting and filtering:</strong></p>
<pre><code><span class="cm"># Select columns</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>              <span class="cm"># Single column (Series)</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">[</span><span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="cm"># Multiple columns (DataFrame)</span>

<span class="cm"># Filter rows</span>
nyc <span class="op">=</span> df<span class="op">[</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">==</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">]</span>
high_salary <span class="op">=</span> df<span class="op">[</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">&gt;</span> <span class="num">80000</span><span class="op">]</span>

<span class="cm"># Multiple conditions (use &amp; for AND, | for OR, ~ for NOT)</span>
eng_nyc <span class="op">=</span> df<span class="op">[</span><span class="op">(</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">department</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">==</span> <span class="st">&quot;</span><span class="st">Eng</span><span class="st">&quot;</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">==</span> <span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">)</span><span class="op">]</span>
not_sales <span class="op">=</span> df<span class="op">[</span><span class="op">~</span><span class="op">(</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">department</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">==</span> <span class="st">&quot;</span><span class="st">Sales</span><span class="st">&quot;</span><span class="op">)</span><span class="op">]</span>

<span class="cm"># .query() - more readable for complex filters</span>
result <span class="op">=</span> df<span class="op">.</span>query<span class="op">(</span><span class="st">&quot;</span><span class="st">salary &gt; 80000 and city == </span><span class="st">&#x27;</span><span class="st">NYC</span><span class="st">&#x27;</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># .loc (label-based) and .iloc (position-based)</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>loc<span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>      <span class="cm"># &quot;Alice&quot; (by label)</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>iloc<span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">)</span>          <span class="cm"># &quot;Alice&quot; (by position)</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>loc<span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="num">2</span><span class="op">,</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>  <span class="cm"># Rows 0-2, specific columns</span>
</code></pre>
<p><strong>Transforming data:</strong></p>
<pre><code><span class="cm"># Add new columns</span>
df<span class="op">[</span><span class="st">&quot;</span><span class="st">bonus</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> df<span class="op">[</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">*</span> <span class="num">0.1</span>
df<span class="op">[</span><span class="st">&quot;</span><span class="st">tax_bracket</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> df<span class="op">[</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>apply<span class="op">(</span>
    <span class="kw">lambda</span> s<span class="op">:</span> <span class="st">&quot;</span><span class="st">high</span><span class="st">&quot;</span> <span class="kw">if</span> s <span class="op">&gt;</span> <span class="num">90000</span> <span class="kw">else</span> <span class="st">&quot;</span><span class="st">medium</span><span class="st">&quot;</span> <span class="kw">if</span> s <span class="op">&gt;</span> <span class="num">75000</span> <span class="kw">else</span> <span class="st">&quot;</span><span class="st">low</span><span class="st">&quot;</span>
<span class="op">)</span>

<span class="cm"># Rename columns</span>
df <span class="op">=</span> df<span class="op">.</span>rename<span class="op">(</span>columns<span class="op">=</span><span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">employee_name</span><span class="st">&quot;</span><span class="op">}</span><span class="op">)</span>

<span class="cm"># Sort</span>
df_sorted <span class="op">=</span> df<span class="op">.</span>sort_values<span class="op">(</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">,</span> ascending<span class="op">=</span><span class="kw">False</span><span class="op">)</span>
df_multi_sort <span class="op">=</span> df<span class="op">.</span>sort_values<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span> ascending<span class="op">=</span><span class="op">[</span><span class="kw">True</span><span class="op">,</span> <span class="kw">False</span><span class="op">]</span><span class="op">)</span>

<span class="cm"># Drop columns or rows</span>
df_slim <span class="op">=</span> df<span class="op">.</span>drop<span class="op">(</span>columns<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">bonus</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
df_no_dupes <span class="op">=</span> df<span class="op">.</span>drop_duplicates<span class="op">(</span>subset<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
</code></pre>
<p><strong>GroupBy - split-apply-combine (most powerful Pandas feature):</strong></p>
<pre><code><span class="cm"># Average salary by city</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>groupby<span class="op">(</span><span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">)</span><span class="op">[</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>mean<span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="cm"># Chicago    78000.0</span>
<span class="cm"># LA         88500.0</span>
<span class="cm"># NYC        91500.0</span>

<span class="cm"># Multiple aggregations</span>
summary <span class="op">=</span> df<span class="op">.</span>groupby<span class="op">(</span><span class="st">&quot;</span><span class="st">department</span><span class="st">&quot;</span><span class="op">)</span><span class="op">.</span>agg<span class="op">(</span>
    avg_salary<span class="op">=</span><span class="op">(</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">mean</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    max_salary<span class="op">=</span><span class="op">(</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">max</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    headcount<span class="op">=</span><span class="op">(</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">count</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    avg_age<span class="op">=</span><span class="op">(</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">mean</span><span class="st">&quot;</span><span class="op">)</span>
<span class="op">)</span><span class="op">.</span>round<span class="op">(</span><span class="num">0</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>summary<span class="op">)</span>

<span class="cm"># Pivot tables (like Excel pivot tables)</span>
pivot <span class="op">=</span> df<span class="op">.</span>pivot_table<span class="op">(</span>
    values<span class="op">=</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">,</span>
    index<span class="op">=</span><span class="st">&quot;</span><span class="st">department</span><span class="st">&quot;</span><span class="op">,</span>
    columns<span class="op">=</span><span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">,</span>
    aggfunc<span class="op">=</span><span class="st">&quot;</span><span class="st">mean</span><span class="st">&quot;</span><span class="op">,</span>
    fill_value<span class="op">=</span><span class="num">0</span>
<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>pivot<span class="op">)</span>
</code></pre>
<p><strong>Handling missing data (critical for real-world data):</strong></p>
<pre><code>df_dirty <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span>
    <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">None</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">30</span><span class="op">,</span> <span class="kw">None</span><span class="op">,</span> <span class="num">35</span><span class="op">,</span> <span class="num">28</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">95000</span><span class="op">,</span> <span class="num">72000</span><span class="op">,</span> <span class="kw">None</span><span class="op">,</span> <span class="num">78000</span><span class="op">]</span>
<span class="op">}</span><span class="op">)</span>

<span class="cm"># Detect missing data</span>
<span class="nb">print</span><span class="op">(</span>df_dirty<span class="op">.</span>isnull<span class="op">(</span><span class="op">)</span><span class="op">)</span>           <span class="cm"># Boolean mask</span>
<span class="nb">print</span><span class="op">(</span>df_dirty<span class="op">.</span>isnull<span class="op">(</span><span class="op">)</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span><span class="op">)</span>     <span class="cm"># Count per column</span>
<span class="nb">print</span><span class="op">(</span>df_dirty<span class="op">.</span>isnull<span class="op">(</span><span class="op">)</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># Total missing</span>

<span class="cm"># Handle missing data</span>
df_clean <span class="op">=</span> df_dirty<span class="op">.</span>dropna<span class="op">(</span><span class="op">)</span>                    <span class="cm"># Remove rows with ANY NaN</span>
df_clean <span class="op">=</span> df_dirty<span class="op">.</span>dropna<span class="op">(</span>subset<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>     <span class="cm"># Remove only if name is NaN</span>
df_filled <span class="op">=</span> df_dirty<span class="op">.</span>fillna<span class="op">(</span><span class="op">{</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> df_dirty<span class="op">[</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>median<span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">0</span><span class="op">}</span><span class="op">)</span>
df_interpolated <span class="op">=</span> df_dirty<span class="op">.</span>interpolate<span class="op">(</span><span class="op">)</span>        <span class="cm"># Fill with interpolated values</span>
df_forward <span class="op">=</span> df_dirty<span class="op">.</span>fillna<span class="op">(</span>method<span class="op">=</span><span class="st">&quot;</span><span class="st">ffill</span><span class="st">&quot;</span><span class="op">)</span>    <span class="cm"># Forward fill</span>
</code></pre>
<p><strong>Merging DataFrames (like SQL JOINs):</strong></p>
<pre><code>orders <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span>
    <span class="st">&quot;</span><span class="st">order_id</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">customer</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">amount</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">100</span><span class="op">,</span> <span class="num">200</span><span class="op">,</span> <span class="num">150</span><span class="op">,</span> <span class="num">300</span><span class="op">]</span>
<span class="op">}</span><span class="op">)</span>

customers <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span>
    <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">city</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">NYC</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">LA</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Chicago</span><span class="st">&quot;</span><span class="op">]</span>
<span class="op">}</span><span class="op">)</span>

<span class="cm"># Inner join (only matching rows)</span>
merged <span class="op">=</span> orders<span class="op">.</span>merge<span class="op">(</span>customers<span class="op">,</span> left_on<span class="op">=</span><span class="st">&quot;</span><span class="st">customer</span><span class="st">&quot;</span><span class="op">,</span> right_on<span class="op">=</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">,</span> how<span class="op">=</span><span class="st">&quot;</span><span class="st">inner</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Left join (keep all orders, even if customer not found)</span>
merged_left <span class="op">=</span> orders<span class="op">.</span>merge<span class="op">(</span>customers<span class="op">,</span> left_on<span class="op">=</span><span class="st">&quot;</span><span class="st">customer</span><span class="st">&quot;</span><span class="op">,</span> right_on<span class="op">=</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">,</span> how<span class="op">=</span><span class="st">&quot;</span><span class="st">left</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Concatenate (stack DataFrames)</span>
df_all <span class="op">=</span> pd<span class="op">.</span>concat<span class="op">(</span><span class="op">[</span>df_part1<span class="op">,</span> df_part2<span class="op">]</span><span class="op">,</span> ignore_index<span class="op">=</span><span class="kw">True</span><span class="op">)</span>
</code></pre>
<h3 id="153-visualization-with-matplotlib-and-seaborn">15.3 Visualization with Matplotlib and Seaborn</h3>
<pre><code><span class="kw">import</span> matplotlib.pyplot <span class="kw">as</span> plt
<span class="kw">import</span> numpy <span class="kw">as</span> np

<span class="cm"># Line plot</span>
x <span class="op">=</span> np<span class="op">.</span>linspace<span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">100</span><span class="op">)</span>
plt<span class="op">.</span>figure<span class="op">(</span>figsize<span class="op">=</span><span class="op">(</span><span class="num">10</span><span class="op">,</span> <span class="num">6</span><span class="op">)</span><span class="op">)</span>
plt<span class="op">.</span>plot<span class="op">(</span>x<span class="op">,</span> np<span class="op">.</span>sin<span class="op">(</span>x<span class="op">)</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">b-</span><span class="st">&#x27;</span><span class="op">,</span> label<span class="op">=</span><span class="st">&quot;</span><span class="st">sin(x)</span><span class="st">&quot;</span><span class="op">,</span> linewidth<span class="op">=</span><span class="num">2</span><span class="op">)</span>
plt<span class="op">.</span>plot<span class="op">(</span>x<span class="op">,</span> np<span class="op">.</span>cos<span class="op">(</span>x<span class="op">)</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">r--</span><span class="st">&#x27;</span><span class="op">,</span> label<span class="op">=</span><span class="st">&quot;</span><span class="st">cos(x)</span><span class="st">&quot;</span><span class="op">,</span> linewidth<span class="op">=</span><span class="num">2</span><span class="op">)</span>
plt<span class="op">.</span>xlabel<span class="op">(</span><span class="st">&quot;</span><span class="st">X axis</span><span class="st">&quot;</span><span class="op">,</span> fontsize<span class="op">=</span><span class="num">12</span><span class="op">)</span>
plt<span class="op">.</span>ylabel<span class="op">(</span><span class="st">&quot;</span><span class="st">Y axis</span><span class="st">&quot;</span><span class="op">,</span> fontsize<span class="op">=</span><span class="num">12</span><span class="op">)</span>
plt<span class="op">.</span>title<span class="op">(</span><span class="st">&quot;</span><span class="st">Trigonometric Functions</span><span class="st">&quot;</span><span class="op">,</span> fontsize<span class="op">=</span><span class="num">14</span><span class="op">)</span>
plt<span class="op">.</span>legend<span class="op">(</span>fontsize<span class="op">=</span><span class="num">12</span><span class="op">)</span>
plt<span class="op">.</span>grid<span class="op">(</span><span class="kw">True</span><span class="op">,</span> alpha<span class="op">=</span><span class="num">0.3</span><span class="op">)</span>
plt<span class="op">.</span>tight_layout<span class="op">(</span><span class="op">)</span>
plt<span class="op">.</span>savefig<span class="op">(</span><span class="st">&quot;</span><span class="st">plot.png</span><span class="st">&quot;</span><span class="op">,</span> dpi<span class="op">=</span><span class="num">150</span><span class="op">)</span>  <span class="cm"># Save to file</span>
plt<span class="op">.</span>show<span class="op">(</span><span class="op">)</span>
</code></pre>
<pre><code><span class="cm"># Multiple plot types in subplots</span>
fig<span class="op">,</span> axes <span class="op">=</span> plt<span class="op">.</span>subplots<span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> figsize<span class="op">=</span><span class="op">(</span><span class="num">12</span><span class="op">,</span> <span class="num">10</span><span class="op">)</span><span class="op">)</span>

<span class="cm"># Bar chart</span>
categories <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Eng</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Sales</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">HR</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Marketing</span><span class="st">&quot;</span><span class="op">]</span>
values <span class="op">=</span> <span class="op">[</span><span class="num">45</span><span class="op">,</span> <span class="num">30</span><span class="op">,</span> <span class="num">15</span><span class="op">,</span> <span class="num">25</span><span class="op">]</span>
axes<span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">.</span>bar<span class="op">(</span>categories<span class="op">,</span> values<span class="op">,</span> color<span class="op">=</span><span class="op">[</span><span class="st">&#x27;</span><span class="st">#5b9cf5</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">#50d890</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">#f5a623</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">#e878a0</span><span class="st">&#x27;</span><span class="op">]</span><span class="op">)</span>
axes<span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Headcount by Department</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Scatter plot</span>
np<span class="op">.</span>random<span class="op">.</span>seed<span class="op">(</span><span class="num">42</span><span class="op">)</span>
x <span class="op">=</span> np<span class="op">.</span>random<span class="op">.</span>randn<span class="op">(</span><span class="num">100</span><span class="op">)</span>
y <span class="op">=</span> x <span class="op">*</span> <span class="num">2</span> <span class="op">+</span> np<span class="op">.</span>random<span class="op">.</span>randn<span class="op">(</span><span class="num">100</span><span class="op">)</span> <span class="op">*</span> <span class="num">0.5</span>
axes<span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">.</span>scatter<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> alpha<span class="op">=</span><span class="num">0.6</span><span class="op">,</span> c<span class="op">=</span>y<span class="op">,</span> cmap<span class="op">=</span><span class="st">&#x27;</span><span class="st">viridis</span><span class="st">&#x27;</span><span class="op">)</span>
axes<span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Correlation Plot</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Histogram</span>
data <span class="op">=</span> np<span class="op">.</span>random<span class="op">.</span>normal<span class="op">(</span><span class="num">70000</span><span class="op">,</span> <span class="num">15000</span><span class="op">,</span> <span class="num">1000</span><span class="op">)</span>
axes<span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">.</span>hist<span class="op">(</span>data<span class="op">,</span> bins<span class="op">=</span><span class="num">30</span><span class="op">,</span> color<span class="op">=</span><span class="st">&#x27;</span><span class="st">#a78bfa</span><span class="st">&#x27;</span><span class="op">,</span> edgecolor<span class="op">=</span><span class="st">&#x27;</span><span class="st">black</span><span class="st">&#x27;</span><span class="op">,</span> alpha<span class="op">=</span><span class="num">0.7</span><span class="op">)</span>
axes<span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">0</span><span class="op">]</span><span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Salary Distribution</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Pie chart</span>
sizes <span class="op">=</span> <span class="op">[</span><span class="num">45</span><span class="op">,</span> <span class="num">30</span><span class="op">,</span> <span class="num">15</span><span class="op">,</span> <span class="num">10</span><span class="op">]</span>
axes<span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">.</span>pie<span class="op">(</span>sizes<span class="op">,</span> labels<span class="op">=</span>categories<span class="op">,</span> autopct<span class="op">=</span><span class="st">&#x27;</span><span class="st">%1.1f</span><span class="st">%%</span><span class="st">&#x27;</span><span class="op">,</span> startangle<span class="op">=</span><span class="num">90</span><span class="op">)</span>
axes<span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Department Share</span><span class="st">&quot;</span><span class="op">)</span>

plt<span class="op">.</span>tight_layout<span class="op">(</span><span class="op">)</span>
plt<span class="op">.</span>show<span class="op">(</span><span class="op">)</span>
</code></pre>
<pre><code><span class="cm"># Seaborn - statistical visualizations (prettier defaults)</span>
<span class="cm"># pip install seaborn</span>
<span class="kw">import</span> seaborn <span class="kw">as</span> sns

<span class="cm"># Use a built-in dataset for demonstration</span>
tips <span class="op">=</span> sns<span class="op">.</span>load_dataset<span class="op">(</span><span class="st">&quot;</span><span class="st">tips</span><span class="st">&quot;</span><span class="op">)</span>

fig<span class="op">,</span> axes <span class="op">=</span> plt<span class="op">.</span>subplots<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> figsize<span class="op">=</span><span class="op">(</span><span class="num">15</span><span class="op">,</span> <span class="num">5</span><span class="op">)</span><span class="op">)</span>

<span class="cm"># Box plot - shows distribution, outliers, median</span>
sns<span class="op">.</span>boxplot<span class="op">(</span>data<span class="op">=</span>tips<span class="op">,</span> x<span class="op">=</span><span class="st">&quot;</span><span class="st">day</span><span class="st">&quot;</span><span class="op">,</span> y<span class="op">=</span><span class="st">&quot;</span><span class="st">total_bill</span><span class="st">&quot;</span><span class="op">,</span> ax<span class="op">=</span>axes<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>
axes<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Bill by Day</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Violin plot - box plot + kernel density</span>
sns<span class="op">.</span>violinplot<span class="op">(</span>data<span class="op">=</span>tips<span class="op">,</span> x<span class="op">=</span><span class="st">&quot;</span><span class="st">day</span><span class="st">&quot;</span><span class="op">,</span> y<span class="op">=</span><span class="st">&quot;</span><span class="st">tip</span><span class="st">&quot;</span><span class="op">,</span> ax<span class="op">=</span>axes<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>
axes<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Tips by Day</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Heatmap - correlation matrix</span>
numeric_tips <span class="op">=</span> tips<span class="op">.</span>select_dtypes<span class="op">(</span>include<span class="op">=</span><span class="st">&#x27;</span><span class="st">number</span><span class="st">&#x27;</span><span class="op">)</span>
sns<span class="op">.</span>heatmap<span class="op">(</span>numeric_tips<span class="op">.</span>corr<span class="op">(</span><span class="op">)</span><span class="op">,</span> annot<span class="op">=</span><span class="kw">True</span><span class="op">,</span> cmap<span class="op">=</span><span class="st">&quot;</span><span class="st">coolwarm</span><span class="st">&quot;</span><span class="op">,</span> ax<span class="op">=</span>axes<span class="op">[</span><span class="num">2</span><span class="op">]</span><span class="op">)</span>
axes<span class="op">[</span><span class="num">2</span><span class="op">]</span><span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Correlation Heatmap</span><span class="st">&quot;</span><span class="op">)</span>

plt<span class="op">.</span>tight_layout<span class="op">(</span><span class="op">)</span>
plt<span class="op">.</span>show<span class="op">(</span><span class="op">)</span>
</code></pre>
<h3 id="154-scikit-learn---machine-learning-basics">15.4 scikit-learn - Machine Learning Basics</h3>
<pre><code><span class="kw">from</span> sklearn.model_selection <span class="kw">import</span> train_test_split
<span class="kw">from</span> sklearn.preprocessing <span class="kw">import</span> StandardScaler
<span class="kw">from</span> sklearn.linear_model <span class="kw">import</span> LinearRegression<span class="op">,</span> LogisticRegression
<span class="kw">from</span> sklearn.ensemble <span class="kw">import</span> RandomForestClassifier
<span class="kw">from</span> sklearn.metrics <span class="kw">import</span> accuracy_score<span class="op">,</span> classification_report<span class="op">,</span> mean_squared_error
<span class="kw">import</span> numpy <span class="kw">as</span> np
<span class="kw">import</span> pandas <span class="kw">as</span> pd

<span class="cm"># --- Regression example: Predict house prices ---</span>
np<span class="op">.</span>random<span class="op">.</span>seed<span class="op">(</span><span class="num">42</span><span class="op">)</span>
n <span class="op">=</span> <span class="num">200</span>
sqft <span class="op">=</span> np<span class="op">.</span>random<span class="op">.</span>uniform<span class="op">(</span><span class="num">800</span><span class="op">,</span> <span class="num">3000</span><span class="op">,</span> n<span class="op">)</span>
bedrooms <span class="op">=</span> np<span class="op">.</span>random<span class="op">.</span>randint<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">6</span><span class="op">,</span> n<span class="op">)</span>
price <span class="op">=</span> sqft <span class="op">*</span> <span class="num">150</span> <span class="op">+</span> bedrooms <span class="op">*</span> <span class="num">20000</span> <span class="op">+</span> np<span class="op">.</span>random<span class="op">.</span>normal<span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">15000</span><span class="op">,</span> n<span class="op">)</span>

df <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span><span class="st">&quot;</span><span class="st">sqft</span><span class="st">&quot;</span><span class="op">:</span> sqft<span class="op">,</span> <span class="st">&quot;</span><span class="st">bedrooms</span><span class="st">&quot;</span><span class="op">:</span> bedrooms<span class="op">,</span> <span class="st">&quot;</span><span class="st">price</span><span class="st">&quot;</span><span class="op">:</span> price<span class="op">}</span><span class="op">)</span>

<span class="cm"># Step 1: Split into features (X) and target (y)</span>
X <span class="op">=</span> df<span class="op">[</span><span class="op">[</span><span class="st">&quot;</span><span class="st">sqft</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">bedrooms</span><span class="st">&quot;</span><span class="op">]</span><span class="op">]</span>
y <span class="op">=</span> df<span class="op">[</span><span class="st">&quot;</span><span class="st">price</span><span class="st">&quot;</span><span class="op">]</span>

<span class="cm"># Step 2: Train/test split (80% train, 20% test)</span>
X_train<span class="op">,</span> X_test<span class="op">,</span> y_train<span class="op">,</span> y_test <span class="op">=</span> train_test_split<span class="op">(</span>X<span class="op">,</span> y<span class="op">,</span> test_size<span class="op">=</span><span class="num">0.2</span><span class="op">,</span> random_state<span class="op">=</span><span class="num">42</span><span class="op">)</span>

<span class="cm"># Step 3: Scale features (important for many algorithms)</span>
scaler <span class="op">=</span> StandardScaler<span class="op">(</span><span class="op">)</span>
X_train_scaled <span class="op">=</span> scaler<span class="op">.</span>fit_transform<span class="op">(</span>X_train<span class="op">)</span>
X_test_scaled <span class="op">=</span> scaler<span class="op">.</span>transform<span class="op">(</span>X_test<span class="op">)</span>  <span class="cm"># Use same scaler!</span>

<span class="cm"># Step 4: Train model</span>
model <span class="op">=</span> LinearRegression<span class="op">(</span><span class="op">)</span>
model<span class="op">.</span>fit<span class="op">(</span>X_train_scaled<span class="op">,</span> y_train<span class="op">)</span>

<span class="cm"># Step 5: Evaluate</span>
predictions <span class="op">=</span> model<span class="op">.</span>predict<span class="op">(</span>X_test_scaled<span class="op">)</span>
rmse <span class="op">=</span> mean_squared_error<span class="op">(</span>y_test<span class="op">,</span> predictions<span class="op">,</span> squared<span class="op">=</span><span class="kw">False</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">RMSE: $</span><span class="st">{</span>rmse<span class="st">:</span><span class="st">,.0f</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">R score: </span><span class="st">{</span>model<span class="op">.</span>score<span class="op">(</span>X_test_scaled<span class="op">,</span> y_test<span class="op">)</span><span class="st">:</span><span class="st">.3f</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<pre><code><span class="cm"># --- Classification example: Predict customer churn ---</span>
<span class="kw">from</span> sklearn.ensemble <span class="kw">import</span> RandomForestClassifier
<span class="kw">from</span> sklearn.metrics <span class="kw">import</span> classification_report

<span class="cm"># Simulated data</span>
np<span class="op">.</span>random<span class="op">.</span>seed<span class="op">(</span><span class="num">42</span><span class="op">)</span>
n <span class="op">=</span> <span class="num">500</span>
data <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span>
    <span class="st">&quot;</span><span class="st">tenure_months</span><span class="st">&quot;</span><span class="op">:</span> np<span class="op">.</span>random<span class="op">.</span>randint<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">72</span><span class="op">,</span> n<span class="op">)</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">monthly_charge</span><span class="st">&quot;</span><span class="op">:</span> np<span class="op">.</span>random<span class="op">.</span>uniform<span class="op">(</span><span class="num">20</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> n<span class="op">)</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">support_calls</span><span class="st">&quot;</span><span class="op">:</span> np<span class="op">.</span>random<span class="op">.</span>randint<span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> n<span class="op">)</span><span class="op">,</span>
<span class="op">}</span><span class="op">)</span>
<span class="cm"># Churn more likely with short tenure, high charges, many support calls</span>
data<span class="op">[</span><span class="st">&quot;</span><span class="st">churned</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span>
    <span class="op">(</span>data<span class="op">[</span><span class="st">&quot;</span><span class="st">tenure_months</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">&lt;</span> <span class="num">12</span><span class="op">)</span> <span class="op">&amp;</span>
    <span class="op">(</span>data<span class="op">[</span><span class="st">&quot;</span><span class="st">monthly_charge</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">&gt;</span> <span class="num">60</span><span class="op">)</span> <span class="op">|</span>
    <span class="op">(</span>data<span class="op">[</span><span class="st">&quot;</span><span class="st">support_calls</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">&gt;</span> <span class="num">7</span><span class="op">)</span>
<span class="op">)</span><span class="op">.</span>astype<span class="op">(</span><span class="nb">int</span><span class="op">)</span>

X <span class="op">=</span> data<span class="op">[</span><span class="op">[</span><span class="st">&quot;</span><span class="st">tenure_months</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">monthly_charge</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">support_calls</span><span class="st">&quot;</span><span class="op">]</span><span class="op">]</span>
y <span class="op">=</span> data<span class="op">[</span><span class="st">&quot;</span><span class="st">churned</span><span class="st">&quot;</span><span class="op">]</span>

X_train<span class="op">,</span> X_test<span class="op">,</span> y_train<span class="op">,</span> y_test <span class="op">=</span> train_test_split<span class="op">(</span>X<span class="op">,</span> y<span class="op">,</span> test_size<span class="op">=</span><span class="num">0.2</span><span class="op">,</span> random_state<span class="op">=</span><span class="num">42</span><span class="op">)</span>

clf <span class="op">=</span> RandomForestClassifier<span class="op">(</span>n_estimators<span class="op">=</span><span class="num">100</span><span class="op">,</span> random_state<span class="op">=</span><span class="num">42</span><span class="op">)</span>
clf<span class="op">.</span>fit<span class="op">(</span>X_train<span class="op">,</span> y_train<span class="op">)</span>

y_pred <span class="op">=</span> clf<span class="op">.</span>predict<span class="op">(</span>X_test<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Accuracy: </span><span class="st">{</span>accuracy_score<span class="op">(</span>y_test<span class="op">,</span> y_pred<span class="op">)</span><span class="st">:</span><span class="st">.2%</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>classification_report<span class="op">(</span>y_test<span class="op">,</span> y_pred<span class="op">)</span><span class="op">)</span>

<span class="cm"># Feature importance (which features matter most)</span>
<span class="kw">for</span> name<span class="op">,</span> importance <span class="kw">in</span> <span class="nb">zip</span><span class="op">(</span>X<span class="op">.</span>columns<span class="op">,</span> clf<span class="op">.</span>feature_importances_<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">  </span><span class="st">{</span>name<span class="st">}</span><span class="st">: </span><span class="st">{</span>importance<span class="st">:</span><span class="st">.3f</span><span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="exercise-151-data-analysis-challenge">Exercise 15.1: Data Analysis Challenge</h3>
<p>Using pandas, analyze this sales dataset:</p>
<pre><code>sales <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span>
    <span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">:</span> pd<span class="op">.</span>date_range<span class="op">(</span><span class="st">&quot;</span><span class="st">2024-01-01</span><span class="st">&quot;</span><span class="op">,</span> periods<span class="op">=</span><span class="num">100</span><span class="op">,</span> freq<span class="op">=</span><span class="st">&quot;</span><span class="st">D</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">product</span><span class="st">&quot;</span><span class="op">:</span> np<span class="op">.</span>random<span class="op">.</span>choice<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">Widget</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Gadget</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Doohickey</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span> <span class="num">100</span><span class="op">)</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">quantity</span><span class="st">&quot;</span><span class="op">:</span> np<span class="op">.</span>random<span class="op">.</span>randint<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">50</span><span class="op">,</span> <span class="num">100</span><span class="op">)</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">unit_price</span><span class="st">&quot;</span><span class="op">:</span> np<span class="op">.</span>random<span class="op">.</span>choice<span class="op">(</span><span class="op">[</span><span class="num">9.99</span><span class="op">,</span> <span class="num">24.99</span><span class="op">,</span> <span class="num">49.99</span><span class="op">]</span><span class="op">,</span> <span class="num">100</span><span class="op">)</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">region</span><span class="st">&quot;</span><span class="op">:</span> np<span class="op">.</span>random<span class="op">.</span>choice<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">North</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">South</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">East</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">West</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span> <span class="num">100</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
sales<span class="op">[</span><span class="st">&quot;</span><span class="st">revenue</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> sales<span class="op">[</span><span class="st">&quot;</span><span class="st">quantity</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">*</span> sales<span class="op">[</span><span class="st">&quot;</span><span class="st">unit_price</span><span class="st">&quot;</span><span class="op">]</span>
</code></pre>
<p>Tasks:</p>
<ol><li>What's the total revenue by product?</li>
<li>Which region has the highest average order value?</li>
<li>What's the weekly revenue trend?</li>
<li>Create a bar chart of revenue by product and a line chart of weekly revenue.</li></ol>
<details>
<summary>Solution</summary>

<pre><code><span class="cm"># 1. Revenue by product</span>
<span class="nb">print</span><span class="op">(</span>sales<span class="op">.</span>groupby<span class="op">(</span><span class="st">&quot;</span><span class="st">product</span><span class="st">&quot;</span><span class="op">)</span><span class="op">[</span><span class="st">&quot;</span><span class="st">revenue</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span><span class="op">.</span>sort_values<span class="op">(</span>ascending<span class="op">=</span><span class="kw">False</span><span class="op">)</span><span class="op">)</span>

<span class="cm"># 2. Highest avg order by region</span>
<span class="nb">print</span><span class="op">(</span>sales<span class="op">.</span>groupby<span class="op">(</span><span class="st">&quot;</span><span class="st">region</span><span class="st">&quot;</span><span class="op">)</span><span class="op">[</span><span class="st">&quot;</span><span class="st">revenue</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>mean<span class="op">(</span><span class="op">)</span><span class="op">.</span>sort_values<span class="op">(</span>ascending<span class="op">=</span><span class="kw">False</span><span class="op">)</span><span class="op">)</span>

<span class="cm"># 3. Weekly revenue trend</span>
sales<span class="op">[</span><span class="st">&quot;</span><span class="st">week</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> sales<span class="op">[</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>dt<span class="op">.</span>isocalendar<span class="op">(</span><span class="op">)</span><span class="op">.</span>week
weekly <span class="op">=</span> sales<span class="op">.</span>groupby<span class="op">(</span><span class="st">&quot;</span><span class="st">week</span><span class="st">&quot;</span><span class="op">)</span><span class="op">[</span><span class="st">&quot;</span><span class="st">revenue</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span>

<span class="cm"># 4. Visualize</span>
fig<span class="op">,</span> <span class="op">(</span>ax1<span class="op">,</span> ax2<span class="op">)</span> <span class="op">=</span> plt<span class="op">.</span>subplots<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> figsize<span class="op">=</span><span class="op">(</span><span class="num">14</span><span class="op">,</span> <span class="num">5</span><span class="op">)</span><span class="op">)</span>

sales<span class="op">.</span>groupby<span class="op">(</span><span class="st">&quot;</span><span class="st">product</span><span class="st">&quot;</span><span class="op">)</span><span class="op">[</span><span class="st">&quot;</span><span class="st">revenue</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span><span class="op">.</span>plot<span class="op">(</span>kind<span class="op">=</span><span class="st">&quot;</span><span class="st">bar</span><span class="st">&quot;</span><span class="op">,</span> ax<span class="op">=</span>ax1<span class="op">,</span> color<span class="op">=</span><span class="op">[</span><span class="st">&#x27;</span><span class="st">#5b9cf5</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">#50d890</span><span class="st">&#x27;</span><span class="op">,</span> <span class="st">&#x27;</span><span class="st">#f5a623</span><span class="st">&#x27;</span><span class="op">]</span><span class="op">)</span>
ax1<span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Revenue by Product</span><span class="st">&quot;</span><span class="op">)</span>
ax1<span class="op">.</span>set_ylabel<span class="op">(</span><span class="st">&quot;</span><span class="st">Revenue ($)</span><span class="st">&quot;</span><span class="op">)</span>

weekly<span class="op">.</span>plot<span class="op">(</span>ax<span class="op">=</span>ax2<span class="op">,</span> marker<span class="op">=</span><span class="st">&#x27;</span><span class="st">o</span><span class="st">&#x27;</span><span class="op">,</span> color<span class="op">=</span><span class="st">&#x27;</span><span class="st">#a78bfa</span><span class="st">&#x27;</span><span class="op">)</span>
ax2<span class="op">.</span>set_title<span class="op">(</span><span class="st">&quot;</span><span class="st">Weekly Revenue Trend</span><span class="st">&quot;</span><span class="op">)</span>
ax2<span class="op">.</span>set_ylabel<span class="op">(</span><span class="st">&quot;</span><span class="st">Revenue ($)</span><span class="st">&quot;</span><span class="op">)</span>

plt<span class="op">.</span>tight_layout<span class="op">(</span><span class="op">)</span>
plt<span class="op">.</span>show<span class="op">(</span><span class="op">)</span>
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-16-data-engineering-with-python"><h2>Chapter 16: Data Engineering with Python</h2><div class="line"></div><span class="badge" style="background:var(--green-dim);color:var(--green)">Chapter 16</span></div>
<p>Data engineering is about building reliable pipelines to move and transform data. Python is the dominant language in this space, especially with tools like Apache Spark (PySpark), Airflow, and boto3.</p>
<h3 id="161-database-operations">16.1 Database Operations</h3>
<p><strong>SQLite (built-in, great for prototyping):</strong></p>
<pre><code><span class="kw">import</span> sqlite3

<span class="cm"># Connect (creates file if it doesn&#x27;t exist)</span>
conn <span class="op">=</span> sqlite3<span class="op">.</span>connect<span class="op">(</span><span class="st">&quot;</span><span class="st">local.db</span><span class="st">&quot;</span><span class="op">)</span>
cursor <span class="op">=</span> conn<span class="op">.</span>cursor<span class="op">(</span><span class="op">)</span>

<span class="cm"># Create table</span>
cursor<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;&quot;&quot;</span>
<span class="st">    CREATE TABLE IF NOT EXISTS users (</span>
<span class="st">        id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class="st">        name TEXT NOT NULL,</span>
<span class="st">        email TEXT UNIQUE,</span>
<span class="st">        age INTEGER,</span>
<span class="st">        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
<span class="st">    )</span>
<span class="st">&quot;&quot;&quot;</span><span class="op">)</span>

<span class="cm"># Insert data - ALWAYS use parameterized queries to prevent SQL injection!</span>
cursor<span class="op">.</span>execute<span class="op">(</span>
    <span class="st">&quot;</span><span class="st">INSERT OR IGNORE INTO users (name, email, age) VALUES (?, ?, ?)</span><span class="st">&quot;</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">alice@example.com</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">30</span><span class="op">)</span>
<span class="op">)</span>

<span class="cm"># Insert many rows at once (much faster than individual inserts)</span>
users <span class="op">=</span> <span class="op">[</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">bob@example.com</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">25</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">charlie@example.com</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">35</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">diana@example.com</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">28</span><span class="op">)</span><span class="op">,</span>
<span class="op">]</span>
cursor<span class="op">.</span>executemany<span class="op">(</span>
    <span class="st">&quot;</span><span class="st">INSERT OR IGNORE INTO users (name, email, age) VALUES (?, ?, ?)</span><span class="st">&quot;</span><span class="op">,</span>
    users
<span class="op">)</span>
conn<span class="op">.</span>commit<span class="op">(</span><span class="op">)</span>

<span class="cm"># Query</span>
cursor<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;</span><span class="st">SELECT name, age FROM users WHERE age &gt; ? ORDER BY age</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="num">26</span><span class="op">,</span><span class="op">)</span><span class="op">)</span>
<span class="kw">for</span> row <span class="kw">in</span> cursor<span class="op">.</span>fetchall<span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>row<span class="op">)</span>  <span class="cm"># (&#x27;Alice&#x27;, 30), (&#x27;Diana&#x27;, 28), (&#x27;Charlie&#x27;, 35)</span>

<span class="cm"># Use context manager for automatic cleanup</span>
conn<span class="op">.</span>close<span class="op">(</span><span class="op">)</span>
</code></pre>
<p><strong>Using Pandas with databases (recommended for data work):</strong></p>
<pre><code><span class="kw">import</span> pandas <span class="kw">as</span> pd
<span class="kw">import</span> sqlite3

conn <span class="op">=</span> sqlite3<span class="op">.</span>connect<span class="op">(</span><span class="st">&quot;</span><span class="st">local.db</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Read SQL query into DataFrame (much easier than manual iteration)</span>
df <span class="op">=</span> pd<span class="op">.</span>read_sql_query<span class="op">(</span><span class="st">&quot;</span><span class="st">SELECT * FROM users WHERE age &gt; 25</span><span class="st">&quot;</span><span class="op">,</span> conn<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">)</span>

<span class="cm"># Write DataFrame to SQL table</span>
new_users <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span>
    <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Eve</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Frank</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">email</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">eve@example.com</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">frank@example.com</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">29</span><span class="op">,</span> <span class="num">33</span><span class="op">]</span>
<span class="op">}</span><span class="op">)</span>
new_users<span class="op">.</span>to_sql<span class="op">(</span><span class="st">&quot;</span><span class="st">users</span><span class="st">&quot;</span><span class="op">,</span> conn<span class="op">,</span> if_exists<span class="op">=</span><span class="st">&quot;</span><span class="st">append</span><span class="st">&quot;</span><span class="op">,</span> index<span class="op">=</span><span class="kw">False</span><span class="op">)</span>

conn<span class="op">.</span>close<span class="op">(</span><span class="op">)</span>
</code></pre>
<p><strong>PostgreSQL with psycopg2 (production databases):</strong></p>
<pre><code><span class="cm"># pip install psycopg2-binary</span>
<span class="kw">import</span> psycopg2
<span class="kw">from</span> contextlib <span class="kw">import</span> contextmanager

<span class="dc">@contextmanager</span>
<span class="kw">def</span> <span class="fn">get_db_connection</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Context manager for database connections.&quot;&quot;&quot;</span>
    conn <span class="op">=</span> psycopg2<span class="op">.</span>connect<span class="op">(</span>
        host<span class="op">=</span><span class="st">&quot;</span><span class="st">localhost</span><span class="st">&quot;</span><span class="op">,</span>
        database<span class="op">=</span><span class="st">&quot;</span><span class="st">mydb</span><span class="st">&quot;</span><span class="op">,</span>
        user<span class="op">=</span><span class="st">&quot;</span><span class="st">user</span><span class="st">&quot;</span><span class="op">,</span>
        password<span class="op">=</span><span class="st">&quot;</span><span class="st">password</span><span class="st">&quot;</span>  <span class="cm"># In production: use env vars!</span>
    <span class="op">)</span>
    <span class="kw">try</span><span class="op">:</span>
        <span class="kw">yield</span> conn
    <span class="kw">finally</span><span class="op">:</span>
        conn<span class="op">.</span>close<span class="op">(</span><span class="op">)</span>

<span class="cm"># Usage</span>
<span class="kw">with</span> get_db_connection<span class="op">(</span><span class="op">)</span> <span class="kw">as</span> conn<span class="op">:</span>
    <span class="kw">with</span> conn<span class="op">.</span>cursor<span class="op">(</span><span class="op">)</span> <span class="kw">as</span> cur<span class="op">:</span>
        cur<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;</span><span class="st">SELECT * FROM users LIMIT 10</span><span class="st">&quot;</span><span class="op">)</span>
        rows <span class="op">=</span> cur<span class="op">.</span>fetchall<span class="op">(</span><span class="op">)</span>
        <span class="kw">for</span> row <span class="kw">in</span> rows<span class="op">:</span>
            <span class="nb">print</span><span class="op">(</span>row<span class="op">)</span>
</code></pre>
<h3 id="162-processing-large-files">16.2 Processing Large Files</h3>
<p>When files don't fit in memory, you need streaming/chunked approaches:</p>
<pre><code><span class="cm"># Chunked CSV processing (for files too large for memory)</span>
<span class="kw">import</span> pandas <span class="kw">as</span> pd

total_revenue <span class="op">=</span> <span class="num">0</span>
row_count <span class="op">=</span> <span class="num">0</span>

<span class="kw">for</span> chunk <span class="kw">in</span> pd<span class="op">.</span>read_csv<span class="op">(</span><span class="st">&quot;</span><span class="st">huge_file.csv</span><span class="st">&quot;</span><span class="op">,</span> chunksize<span class="op">=</span><span class="num">50_000</span><span class="op">)</span><span class="op">:</span>
    <span class="cm"># Process each chunk (50,000 rows at a time)</span>
    filtered <span class="op">=</span> chunk<span class="op">[</span>chunk<span class="op">[</span><span class="st">&quot;</span><span class="st">amount</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">&gt;</span> <span class="num">100</span><span class="op">]</span>
    total_revenue <span class="op">+</span><span class="op">=</span> filtered<span class="op">[</span><span class="st">&quot;</span><span class="st">amount</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span>
    row_count <span class="op">+</span><span class="op">=</span> <span class="nb">len</span><span class="op">(</span>filtered<span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Processed chunk: </span><span class="st">{</span>row_count<span class="st">}</span><span class="st"> qualifying rows so far</span><span class="st">&quot;</span><span class="op">)</span>

<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Total revenue: $</span><span class="st">{</span>total_revenue<span class="st">:</span><span class="st">,.2f</span><span class="st">}</span><span class="st"> from </span><span class="st">{</span>row_count<span class="st">}</span><span class="st"> rows</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<pre><code><span class="cm"># Line-by-line processing (for non-CSV or custom formats)</span>
<span class="kw">import</span> json

<span class="kw">def</span> <span class="fn">process_jsonl</span><span class="op">(</span>filepath<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Process a JSON Lines file (one JSON object per line).&quot;&quot;&quot;</span>
    results <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
    errors <span class="op">=</span> <span class="num">0</span>
    <span class="kw">with</span> <span class="nb">open</span><span class="op">(</span>filepath<span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
        <span class="kw">for</span> line_num<span class="op">,</span> line <span class="kw">in</span> <span class="nb">enumerate</span><span class="op">(</span>f<span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>
            <span class="kw">try</span><span class="op">:</span>
                record <span class="op">=</span> json<span class="op">.</span>loads<span class="op">(</span>line<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">)</span>
                <span class="kw">if</span> record<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">status</span><span class="st">&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="st">&quot;</span><span class="st">active</span><span class="st">&quot;</span><span class="op">:</span>
                    results<span class="op">.</span>append<span class="op">(</span>record<span class="op">)</span>
            <span class="kw">except</span> json<span class="op">.</span>JSONDecodeError<span class="op">:</span>
                errors <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
            <span class="kw">if</span> line_num <span class="op">%</span> <span class="num">100_000</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span>
                <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Processed </span><span class="st">{</span>line_num<span class="st">:</span><span class="st">,</span><span class="st">}</span><span class="st"> lines...</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Done: </span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>results<span class="op">)</span><span class="st">}</span><span class="st"> active records, </span><span class="st">{</span>errors<span class="st">}</span><span class="st"> errors</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> results
</code></pre>
<pre><code><span class="cm"># Generator-based pipeline (memory-efficient chaining)</span>
<span class="kw">def</span> <span class="fn">read_lines</span><span class="op">(</span>filepath<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Generator: yields lines from file.&quot;&quot;&quot;</span>
    <span class="kw">with</span> <span class="nb">open</span><span class="op">(</span>filepath<span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
        <span class="kw">for</span> line <span class="kw">in</span> f<span class="op">:</span>
            <span class="kw">yield</span> line<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">parse_csv_lines</span><span class="op">(</span>lines<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Generator: parse CSV lines into dicts.&quot;&quot;&quot;</span>
    headers <span class="op">=</span> <span class="nb">next</span><span class="op">(</span>lines<span class="op">)</span><span class="op">.</span>split<span class="op">(</span><span class="st">&quot;</span><span class="st">,</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">for</span> line <span class="kw">in</span> lines<span class="op">:</span>
        values <span class="op">=</span> line<span class="op">.</span>split<span class="op">(</span><span class="st">&quot;</span><span class="st">,</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">yield</span> <span class="nb">dict</span><span class="op">(</span><span class="nb">zip</span><span class="op">(</span>headers<span class="op">,</span> values<span class="op">)</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">filter_records</span><span class="op">(</span>records<span class="op">,</span> min_amount<span class="op">=</span><span class="num">100</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Generator: filter by amount.&quot;&quot;&quot;</span>
    <span class="kw">for</span> record <span class="kw">in</span> records<span class="op">:</span>
        <span class="kw">if</span> <span class="nb">float</span><span class="op">(</span>record<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">amount</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span><span class="op">)</span> <span class="op">&gt;</span> min_amount<span class="op">:</span>
            <span class="kw">yield</span> record

<span class="cm"># Chain generators - processes one record at a time, any file size!</span>
pipeline <span class="op">=</span> filter_records<span class="op">(</span>parse_csv_lines<span class="op">(</span>read_lines<span class="op">(</span><span class="st">&quot;</span><span class="st">sales.csv</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="kw">for</span> record <span class="kw">in</span> pipeline<span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span>record<span class="op">)</span>
</code></pre>
<h3 id="163-aws-s3-with-boto3">16.3 AWS S3 with boto3</h3>
<pre><code><span class="cm"># pip install boto3</span>
<span class="kw">import</span> boto3
<span class="kw">import</span> json

s3 <span class="op">=</span> boto3<span class="op">.</span>client<span class="op">(</span><span class="st">&quot;</span><span class="st">s3</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Upload a file</span>
s3<span class="op">.</span>upload_file<span class="op">(</span><span class="st">&quot;</span><span class="st">local_data.csv</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">my-bucket</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">data/2024/sales.csv</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Download a file</span>
s3<span class="op">.</span>download_file<span class="op">(</span><span class="st">&quot;</span><span class="st">my-bucket</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">data/2024/sales.csv</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">downloaded.csv</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># List objects in a bucket</span>
response <span class="op">=</span> s3<span class="op">.</span>list_objects_v2<span class="op">(</span>Bucket<span class="op">=</span><span class="st">&quot;</span><span class="st">my-bucket</span><span class="st">&quot;</span><span class="op">,</span> Prefix<span class="op">=</span><span class="st">&quot;</span><span class="st">data/2024/</span><span class="st">&quot;</span><span class="op">)</span>
<span class="kw">for</span> obj <span class="kw">in</span> response<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">Contents</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">[</span><span class="op">]</span><span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>obj<span class="op">[</span><span class="st">&#x27;</span><span class="st">Key</span><span class="st">&#x27;</span><span class="op">]</span><span class="st">}</span><span class="st">: </span><span class="st">{</span>obj<span class="op">[</span><span class="st">&#x27;</span><span class="st">Size</span><span class="st">&#x27;</span><span class="op">]</span><span class="st">}</span><span class="st"> bytes</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Read file directly into pandas (without downloading)</span>
<span class="kw">import</span> io
obj <span class="op">=</span> s3<span class="op">.</span>get_object<span class="op">(</span>Bucket<span class="op">=</span><span class="st">&quot;</span><span class="st">my-bucket</span><span class="st">&quot;</span><span class="op">,</span> Key<span class="op">=</span><span class="st">&quot;</span><span class="st">data/sales.csv</span><span class="st">&quot;</span><span class="op">)</span>
df <span class="op">=</span> pd<span class="op">.</span>read_csv<span class="op">(</span>io<span class="op">.</span>BytesIO<span class="op">(</span>obj<span class="op">[</span><span class="st">&quot;</span><span class="st">Body</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>read<span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
</code></pre>
<h3 id="164-simple-etl-pipeline">16.4 Simple ETL Pipeline</h3>
<pre><code><span class="kw">import</span> pandas <span class="kw">as</span> pd
<span class="kw">import</span> logging
<span class="kw">from</span> datetime <span class="kw">import</span> datetime

logging<span class="op">.</span>basicConfig<span class="op">(</span>level<span class="op">=</span>logging<span class="op">.</span>INFO<span class="op">)</span>
logger <span class="op">=</span> logging<span class="op">.</span>getLogger<span class="op">(</span>__name__<span class="op">)</span>

<span class="kw">def</span> <span class="fn">extract</span><span class="op">(</span>source_path<span class="op">:</span> <span class="nb">str</span><span class="op">)</span> <span class="op">-</span><span class="op">&gt;</span> pd<span class="op">.</span>DataFrame<span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Extract: read raw data from source.&quot;&quot;&quot;</span>
    logger<span class="op">.</span>info<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Extracting from </span><span class="st">{</span>source_path<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    df <span class="op">=</span> pd<span class="op">.</span>read_csv<span class="op">(</span>source_path<span class="op">)</span>
    logger<span class="op">.</span>info<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Extracted </span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>df<span class="op">)</span><span class="st">}</span><span class="st"> rows</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> df

<span class="kw">def</span> <span class="fn">transform</span><span class="op">(</span>df<span class="op">:</span> pd<span class="op">.</span>DataFrame<span class="op">)</span> <span class="op">-</span><span class="op">&gt;</span> pd<span class="op">.</span>DataFrame<span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Transform: clean and reshape data.&quot;&quot;&quot;</span>
    logger<span class="op">.</span>info<span class="op">(</span><span class="st">&quot;</span><span class="st">Transforming data...</span><span class="st">&quot;</span><span class="op">)</span>

    <span class="cm"># Drop duplicates</span>
    before <span class="op">=</span> <span class="nb">len</span><span class="op">(</span>df<span class="op">)</span>
    df <span class="op">=</span> df<span class="op">.</span>drop_duplicates<span class="op">(</span><span class="op">)</span>
    logger<span class="op">.</span>info<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Removed </span><span class="st">{</span>before <span class="op">-</span> <span class="nb">len</span><span class="op">(</span>df<span class="op">)</span><span class="st">}</span><span class="st"> duplicates</span><span class="st">&quot;</span><span class="op">)</span>

    <span class="cm"># Clean column names</span>
    df<span class="op">.</span>columns <span class="op">=</span> <span class="op">[</span>c<span class="op">.</span>strip<span class="op">(</span><span class="op">)</span><span class="op">.</span>lower<span class="op">(</span><span class="op">)</span><span class="op">.</span>replace<span class="op">(</span><span class="st">&quot;</span><span class="st"> </span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">_</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">for</span> c <span class="kw">in</span> df<span class="op">.</span>columns<span class="op">]</span>

    <span class="cm"># Handle missing values</span>
    df<span class="op">[</span><span class="st">&quot;</span><span class="st">amount</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> df<span class="op">[</span><span class="st">&quot;</span><span class="st">amount</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>fillna<span class="op">(</span><span class="num">0</span><span class="op">)</span>
    df<span class="op">[</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> pd<span class="op">.</span>to_datetime<span class="op">(</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span> errors<span class="op">=</span><span class="st">&quot;</span><span class="st">coerce</span><span class="st">&quot;</span><span class="op">)</span>
    df <span class="op">=</span> df<span class="op">.</span>dropna<span class="op">(</span>subset<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>

    <span class="cm"># Add derived columns</span>
    df<span class="op">[</span><span class="st">&quot;</span><span class="st">year_month</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> df<span class="op">[</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>dt<span class="op">.</span>to_period<span class="op">(</span><span class="st">&quot;</span><span class="st">M</span><span class="st">&quot;</span><span class="op">)</span>
    df<span class="op">[</span><span class="st">&quot;</span><span class="st">amount_category</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> pd<span class="op">.</span>cut<span class="op">(</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">amount</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span> bins<span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">500</span><span class="op">,</span> <span class="nb">float</span><span class="op">(</span><span class="st">&quot;</span><span class="st">inf</span><span class="st">&quot;</span><span class="op">)</span><span class="op">]</span><span class="op">,</span>
                                     labels<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">small</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">medium</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">large</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
    logger<span class="op">.</span>info<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Transformed: </span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>df<span class="op">)</span><span class="st">}</span><span class="st"> rows</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> df

<span class="kw">def</span> <span class="fn">load</span><span class="op">(</span>df<span class="op">:</span> pd<span class="op">.</span>DataFrame<span class="op">,</span> dest_path<span class="op">:</span> <span class="nb">str</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Load: write processed data to destination.&quot;&quot;&quot;</span>
    logger<span class="op">.</span>info<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Loading </span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>df<span class="op">)</span><span class="st">}</span><span class="st"> rows to </span><span class="st">{</span>dest_path<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    df<span class="op">.</span>to_parquet<span class="op">(</span>dest_path<span class="op">,</span> index<span class="op">=</span><span class="kw">False</span><span class="op">)</span>
    logger<span class="op">.</span>info<span class="op">(</span><span class="st">&quot;</span><span class="st">Load complete</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Run the ETL pipeline</span>
<span class="kw">if</span> __name__ <span class="op">==</span> <span class="st">&quot;</span><span class="st">__main__</span><span class="st">&quot;</span><span class="op">:</span>
    raw <span class="op">=</span> extract<span class="op">(</span><span class="st">&quot;</span><span class="st">raw_sales.csv</span><span class="st">&quot;</span><span class="op">)</span>
    clean <span class="op">=</span> transform<span class="op">(</span>raw<span class="op">)</span>
    load<span class="op">(</span>clean<span class="op">,</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">processed/sales_</span><span class="st">{</span>datetime<span class="op">.</span>now<span class="op">(</span><span class="op">)</span><span class="st">:</span><span class="st">%Y%m%d</span><span class="st">}</span><span class="st">.parquet</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="exercise-161-build-a-data-pipeline">Exercise 16.1: Build a Data Pipeline</h3>
<p>Write a pipeline that:</p>
<ol><li>Reads a CSV file with columns: <code class="inline">date, product, quantity, price</code></li>
<li>Removes rows where quantity <= 0</li>
<li>Adds a <code class="inline">revenue</code> column (quantity * price)</li>
<li>Groups by product and month, summing revenue</li>
<li>Saves the result to a new CSV</li></ol>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">import</span> pandas <span class="kw">as</span> pd

<span class="cm"># Extract</span>
df <span class="op">=</span> pd<span class="op">.</span>read_csv<span class="op">(</span><span class="st">&quot;</span><span class="st">sales_raw.csv</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Transform</span>
df <span class="op">=</span> df<span class="op">[</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">quantity</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">&gt;</span> <span class="num">0</span><span class="op">]</span>
df<span class="op">[</span><span class="st">&quot;</span><span class="st">revenue</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> df<span class="op">[</span><span class="st">&quot;</span><span class="st">quantity</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">*</span> df<span class="op">[</span><span class="st">&quot;</span><span class="st">price</span><span class="st">&quot;</span><span class="op">]</span>
df<span class="op">[</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> pd<span class="op">.</span>to_datetime<span class="op">(</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>
df<span class="op">[</span><span class="st">&quot;</span><span class="st">month</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> df<span class="op">[</span><span class="st">&quot;</span><span class="st">date</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>dt<span class="op">.</span>to_period<span class="op">(</span><span class="st">&quot;</span><span class="st">M</span><span class="st">&quot;</span><span class="op">)</span>

monthly <span class="op">=</span> df<span class="op">.</span>groupby<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">month</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">product</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="st">&quot;</span><span class="st">revenue</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span><span class="op">.</span>reset_index<span class="op">(</span><span class="op">)</span>
monthly <span class="op">=</span> monthly<span class="op">.</span>sort_values<span class="op">(</span><span class="op">[</span><span class="st">&quot;</span><span class="st">month</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">revenue</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span> ascending<span class="op">=</span><span class="op">[</span><span class="kw">True</span><span class="op">,</span> <span class="kw">False</span><span class="op">]</span><span class="op">)</span>

<span class="cm"># Load</span>
monthly<span class="op">.</span>to_csv<span class="op">(</span><span class="st">&quot;</span><span class="st">monthly_revenue.csv</span><span class="st">&quot;</span><span class="op">,</span> index<span class="op">=</span><span class="kw">False</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Saved </span><span class="st">{</span><span class="nb">len</span><span class="op">(</span>monthly<span class="op">)</span><span class="st">}</span><span class="st"> rows</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>monthly<span class="op">.</span>head<span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">)</span>
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-17-testing-code-quality"><h2>Chapter 17: Testing & Code Quality</h2><div class="line"></div><span class="badge" style="background:var(--pink-dim);color:var(--pink)">Chapter 17</span></div>
<p>Testing isn't optional - it's what separates professional code from scripts that break. Python's testing ecosystem is excellent, with <strong>pytest</strong> as the de facto standard.</p>
<h3 id="171-pytest---the-testing-framework">17.1 pytest - The Testing Framework</h3>
<p><strong>Installation and basic setup:</strong></p>
<pre><code>pip install pytest
</code></pre>
<p><strong>Your first tests:</strong></p>
<pre><code><span class="cm"># calculator.py</span>
<span class="kw">def</span> <span class="fn">add</span><span class="op">(</span>a<span class="op">,</span> b<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> a <span class="op">+</span> b

<span class="kw">def</span> <span class="fn">divide</span><span class="op">(</span>a<span class="op">,</span> b<span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> b <span class="op">==</span> <span class="num">0</span><span class="op">:</span>
        <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Cannot divide by zero</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">return</span> a <span class="op">/</span> b
</code></pre>
<pre><code><span class="cm"># test_calculator.py</span>
<span class="kw">import</span> pytest
<span class="kw">from</span> calculator <span class="kw">import</span> add<span class="op">,</span> divide

<span class="cm"># Basic tests - function names must start with test_</span>
<span class="kw">def</span> <span class="fn">test_add_positive</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">assert</span> add<span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">)</span> <span class="op">==</span> <span class="num">5</span>

<span class="kw">def</span> <span class="fn">test_add_negative</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">assert</span> add<span class="op">(</span><span class="op">-</span><span class="num">1</span><span class="op">,</span> <span class="op">-</span><span class="num">1</span><span class="op">)</span> <span class="op">==</span> <span class="op">-</span><span class="num">2</span>

<span class="kw">def</span> <span class="fn">test_add_zero</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">assert</span> add<span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span> <span class="op">==</span> <span class="num">0</span>

<span class="cm"># Testing exceptions</span>
<span class="kw">def</span> <span class="fn">test_divide_by_zero</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">with</span> pytest<span class="op">.</span>raises<span class="op">(</span><span class="nb">ValueError</span><span class="op">,</span> match<span class="op">=</span><span class="st">&quot;</span><span class="st">Cannot divide by zero</span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>
        divide<span class="op">(</span><span class="num">10</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">test_divide_normal</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">assert</span> divide<span class="op">(</span><span class="num">10</span><span class="op">,</span> <span class="num">2</span><span class="op">)</span> <span class="op">==</span> <span class="num">5.0</span>
    <span class="kw">assert</span> divide<span class="op">(</span><span class="num">7</span><span class="op">,</span> <span class="num">2</span><span class="op">)</span> <span class="op">==</span> <span class="num">3.5</span>
</code></pre>
<pre><code><span class="cm"># Run tests</span>
pytest                          <span class="cm"># Run all tests</span>
pytest test_calculator.py       <span class="cm"># Run specific file</span>
pytest -v                       <span class="cm"># Verbose output (shows each test name)</span>
pytest -v -k <span class="st">&quot;test_add&quot;</span>         <span class="cm"># Run only tests matching pattern</span>
pytest --tb<span class="op">=</span>short               <span class="cm"># Shorter traceback on failure</span>
pytest -x                       <span class="cm"># Stop on first failure</span>
</code></pre>
<p><strong>Parametrize - test many inputs without writing many functions:</strong></p>
<pre><code><span class="dc">@pytest</span><span class="op">.</span>mark<span class="op">.</span>parametrize<span class="op">(</span><span class="st">&quot;</span><span class="st">a, b, expected</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">[</span>
    <span class="op">(</span><span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">5</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="op">-</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="num">100</span><span class="op">,</span> <span class="op">-</span><span class="num">50</span><span class="op">,</span> <span class="num">50</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.2</span><span class="op">,</span> pytest<span class="op">.</span>approx<span class="op">(</span><span class="num">0.3</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>  <span class="cm"># Floating point comparison!</span>
<span class="op">]</span><span class="op">)</span>
<span class="kw">def</span> <span class="fn">test_add_parametrized</span><span class="op">(</span>a<span class="op">,</span> b<span class="op">,</span> expected<span class="op">)</span><span class="op">:</span>
    <span class="kw">assert</span> add<span class="op">(</span>a<span class="op">,</span> b<span class="op">)</span> <span class="op">==</span> expected
</code></pre>
<p><strong>Fixtures - reusable test setup:</strong></p>
<pre><code><span class="kw">import</span> pytest
<span class="kw">import</span> sqlite3

<span class="dc">@pytest</span><span class="op">.</span>fixture
<span class="kw">def</span> <span class="fn">db_connection</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Create a test database, yield it, then clean up.&quot;&quot;&quot;</span>
    conn <span class="op">=</span> sqlite3<span class="op">.</span>connect<span class="op">(</span><span class="st">&quot;</span><span class="st">:memory:</span><span class="st">&quot;</span><span class="op">)</span>
    conn<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;</span><span class="st">CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT, age INTEGER)</span><span class="st">&quot;</span><span class="op">)</span>
    conn<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;</span><span class="st">INSERT INTO users VALUES (1, </span><span class="st">&#x27;</span><span class="st">Alice</span><span class="st">&#x27;</span><span class="st">, 30)</span><span class="st">&quot;</span><span class="op">)</span>
    conn<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;</span><span class="st">INSERT INTO users VALUES (2, </span><span class="st">&#x27;</span><span class="st">Bob</span><span class="st">&#x27;</span><span class="st">, 25)</span><span class="st">&quot;</span><span class="op">)</span>
    conn<span class="op">.</span>commit<span class="op">(</span><span class="op">)</span>
    <span class="kw">yield</span> conn  <span class="cm"># Test runs here</span>
    conn<span class="op">.</span>close<span class="op">(</span><span class="op">)</span>  <span class="cm"># Cleanup after test</span>

<span class="kw">def</span> <span class="fn">test_query_users</span><span class="op">(</span>db_connection<span class="op">)</span><span class="op">:</span>
    cursor <span class="op">=</span> db_connection<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;</span><span class="st">SELECT * FROM users</span><span class="st">&quot;</span><span class="op">)</span>
    users <span class="op">=</span> cursor<span class="op">.</span>fetchall<span class="op">(</span><span class="op">)</span>
    <span class="kw">assert</span> <span class="nb">len</span><span class="op">(</span>users<span class="op">)</span> <span class="op">==</span> <span class="num">2</span>

<span class="kw">def</span> <span class="fn">test_query_by_age</span><span class="op">(</span>db_connection<span class="op">)</span><span class="op">:</span>
    cursor <span class="op">=</span> db_connection<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;</span><span class="st">SELECT name FROM users WHERE age &gt; 27</span><span class="st">&quot;</span><span class="op">)</span>
    names <span class="op">=</span> <span class="op">[</span>row<span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="kw">for</span> row <span class="kw">in</span> cursor<span class="op">.</span>fetchall<span class="op">(</span><span class="op">)</span><span class="op">]</span>
    <span class="kw">assert</span> names <span class="op">==</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">]</span>

<span class="dc">@pytest</span><span class="op">.</span>fixture
<span class="kw">def</span> <span class="fn">sample_data</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Reusable test data.&quot;&quot;&quot;</span>
    <span class="kw">return</span> <span class="op">{</span>
        <span class="st">&quot;</span><span class="st">users</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span>
            <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">30</span><span class="op">}</span><span class="op">,</span>
            <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">25</span><span class="op">}</span><span class="op">,</span>
        <span class="op">]</span>
    <span class="op">}</span>

<span class="kw">def</span> <span class="fn">test_user_count</span><span class="op">(</span>sample_data<span class="op">)</span><span class="op">:</span>
    <span class="kw">assert</span> <span class="nb">len</span><span class="op">(</span>sample_data<span class="op">[</span><span class="st">&quot;</span><span class="st">users</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span> <span class="op">==</span> <span class="num">2</span>
</code></pre>
<h3 id="172-mocking---testing-without-external-dependencies">17.2 Mocking - Testing Without External Dependencies</h3>
<p>Mocking replaces real objects with fake ones. Use it to test code that calls APIs, databases, or other external services.</p>
<pre><code><span class="kw">from</span> unittest.mock <span class="kw">import</span> Mock<span class="op">,</span> patch<span class="op">,</span> MagicMock

<span class="cm"># Mock a function</span>
<span class="dc">@patch</span><span class="op">(</span><span class="st">&quot;</span><span class="st">requests.get</span><span class="st">&quot;</span><span class="op">)</span>
<span class="kw">def</span> <span class="fn">test_fetch_user</span><span class="op">(</span>mock_get<span class="op">)</span><span class="op">:</span>
    <span class="cm"># Configure the mock to return a specific response</span>
    mock_response <span class="op">=</span> Mock<span class="op">(</span><span class="op">)</span>
    mock_response<span class="op">.</span>status_code <span class="op">=</span> <span class="num">200</span>
    mock_response<span class="op">.</span>json<span class="op">.</span>return_value <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">30</span><span class="op">}</span>
    mock_get<span class="op">.</span>return_value <span class="op">=</span> mock_response

    <span class="cm"># Now test YOUR code that calls requests.get</span>
    <span class="kw">import</span> requests
    response <span class="op">=</span> requests<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">https://api.example.com/users/1</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="kw">assert</span> response<span class="op">.</span>status_code <span class="op">==</span> <span class="num">200</span>
    <span class="kw">assert</span> response<span class="op">.</span>json<span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">==</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span>

    <span class="cm"># Verify the mock was called correctly</span>
    mock_get<span class="op">.</span>assert_called_once_with<span class="op">(</span><span class="st">&quot;</span><span class="st">https://api.example.com/users/1</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<pre><code><span class="cm"># Mock for testing email sending</span>
<span class="kw">class</span> <span class="fn">NotificationService</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> email_client<span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>email_client <span class="op">=</span> email_client

    <span class="kw">def</span> <span class="fn">notify_user</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> user_email<span class="op">,</span> message<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> <span class="kw">not</span> user_email<span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Email required</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="nb">self</span><span class="op">.</span>email_client<span class="op">.</span>send<span class="op">(</span>to<span class="op">=</span>user_email<span class="op">,</span> body<span class="op">=</span>message<span class="op">)</span>
        <span class="kw">return</span> <span class="kw">True</span>

<span class="kw">def</span> <span class="fn">test_notify_user</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="cm"># Create a mock email client (no real emails sent!)</span>
    mock_client <span class="op">=</span> Mock<span class="op">(</span><span class="op">)</span>
    service <span class="op">=</span> NotificationService<span class="op">(</span>mock_client<span class="op">)</span>

    result <span class="op">=</span> service<span class="op">.</span>notify_user<span class="op">(</span><span class="st">&quot;</span><span class="st">alice@test.com</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Hello!</span><span class="st">&quot;</span><span class="op">)</span>

    <span class="kw">assert</span> result <span class="kw">is</span> <span class="kw">True</span>
    mock_client<span class="op">.</span>send<span class="op">.</span>assert_called_once_with<span class="op">(</span>to<span class="op">=</span><span class="st">&quot;</span><span class="st">alice@test.com</span><span class="st">&quot;</span><span class="op">,</span> body<span class="op">=</span><span class="st">&quot;</span><span class="st">Hello!</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">def</span> <span class="fn">test_notify_no_email</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    mock_client <span class="op">=</span> Mock<span class="op">(</span><span class="op">)</span>
    service <span class="op">=</span> NotificationService<span class="op">(</span>mock_client<span class="op">)</span>

    <span class="kw">with</span> pytest<span class="op">.</span>raises<span class="op">(</span><span class="nb">ValueError</span><span class="op">)</span><span class="op">:</span>
        service<span class="op">.</span>notify_user<span class="op">(</span><span class="st">&quot;</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Hello!</span><span class="st">&quot;</span><span class="op">)</span>

    mock_client<span class="op">.</span>send<span class="op">.</span>assert_not_called<span class="op">(</span><span class="op">)</span>  <span class="cm"># Email should NOT be sent</span>
</code></pre>
<h3 id="173-test-organization-best-practices">17.3 Test Organization Best Practices</h3>
<pre><code>my_project<span class="op">/</span>
    src<span class="op">/</span>
        <span class="fn">__init__</span><span class="op">.</span>py
        calculator<span class="op">.</span>py
        user_service<span class="op">.</span>py
    tests<span class="op">/</span>
        <span class="fn">__init__</span><span class="op">.</span>py
        test_calculator<span class="op">.</span>py
        test_user_service<span class="op">.</span>py
        conftest<span class="op">.</span>py          <span class="cm"># Shared fixtures go here</span>
</code></pre>
<pre><code><span class="cm"># conftest.py - shared fixtures available to ALL test files</span>
<span class="kw">import</span> pytest

<span class="dc">@pytest</span><span class="op">.</span>fixture
<span class="kw">def</span> <span class="fn">api_url</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> <span class="st">&quot;</span><span class="st">https://api.example.com</span><span class="st">&quot;</span>

<span class="dc">@pytest</span><span class="op">.</span>fixture<span class="op">(</span>autouse<span class="op">=</span><span class="kw">True</span><span class="op">)</span>
<span class="kw">def</span> <span class="fn">reset_env</span><span class="op">(</span>monkeypatch<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Automatically reset environment for every test.&quot;&quot;&quot;</span>
    monkeypatch<span class="op">.</span>setenv<span class="op">(</span><span class="st">&quot;</span><span class="st">ENV</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">test</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="174-code-quality-tools">17.4 Code Quality Tools</h3>
<pre><code><span class="cm"># Formatting</span>
black src/               <span class="cm"># Auto-format code (opinionated, consistent)</span>
black --check src/       <span class="cm"># Check without changing (for CI)</span>

<span class="cm"># Linting</span>
ruff check src/          <span class="cm"># Fast linter (replaces flake8, isort, etc.)</span>
ruff check --fix src/    <span class="cm"># Auto-fix what it can</span>
pylint src/              <span class="cm"># More thorough (but slower) linting</span>

<span class="cm"># Type checking</span>
mypy src/                <span class="cm"># Static type checker</span>
mypy src/ --strict       <span class="cm"># Strict mode (catches more issues)</span>

<span class="cm"># Security</span>
bandit -r src/           <span class="cm"># Find security issues</span>
pip-audit                <span class="cm"># Check dependencies for vulnerabilities</span>

<span class="cm"># Import sorting</span>
isort src/               <span class="cm"># Sort imports consistently</span>

<span class="cm"># All at once in CI:</span>
<span class="cm"># black --check src/ &amp;&amp; ruff check src/ &amp;&amp; mypy src/ &amp;&amp; pytest tests/ -v</span>
</code></pre>
<h3 id="exercise-171-write-tests">Exercise 17.1: Write Tests</h3>
<p>Given this function, write at least 5 tests:</p>
<pre><code><span class="kw">def</span> <span class="fn">validate_password</span><span class="op">(</span>password<span class="op">:</span> <span class="nb">str</span><span class="op">)</span> <span class="op">-</span><span class="op">&gt;</span> <span class="nb">tuple</span><span class="op">[</span><span class="nb">bool</span><span class="op">,</span> <span class="nb">str</span><span class="op">]</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Validate password. Returns (is_valid, message).&quot;&quot;&quot;</span>
    <span class="kw">if</span> <span class="nb">len</span><span class="op">(</span>password<span class="op">)</span> <span class="op">&lt;</span> <span class="num">8</span><span class="op">:</span>
        <span class="kw">return</span> <span class="kw">False</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Must be at least 8 characters</span><span class="st">&quot;</span>
    <span class="kw">if</span> <span class="kw">not</span> <span class="nb">any</span><span class="op">(</span>c<span class="op">.</span>isupper<span class="op">(</span><span class="op">)</span> <span class="kw">for</span> c <span class="kw">in</span> password<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="kw">False</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Must contain uppercase letter</span><span class="st">&quot;</span>
    <span class="kw">if</span> <span class="kw">not</span> <span class="nb">any</span><span class="op">(</span>c<span class="op">.</span>isdigit<span class="op">(</span><span class="op">)</span> <span class="kw">for</span> c <span class="kw">in</span> password<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="kw">False</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Must contain a digit</span><span class="st">&quot;</span>
    <span class="kw">return</span> <span class="kw">True</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Valid</span><span class="st">&quot;</span>
</code></pre>
<details>
<summary>Solution</summary>

<pre><code><span class="kw">import</span> pytest

<span class="dc">@pytest</span><span class="op">.</span>mark<span class="op">.</span>parametrize<span class="op">(</span><span class="st">&quot;</span><span class="st">password, expected_valid, expected_msg</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">[</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">Ab1defgh</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">True</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Valid</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">short1A</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">False</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Must be at least 8 characters</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">alllowercase1</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">False</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Must contain uppercase letter</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">ALLUPPERcase</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">False</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Must contain a digit</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">False</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Must be at least 8 characters</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">A1bcdefg</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">True</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Valid</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
    <span class="op">(</span><span class="st">&quot;</span><span class="st">12345678A</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">True</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Valid</span><span class="st">&quot;</span><span class="op">)</span><span class="op">,</span>
<span class="op">]</span><span class="op">)</span>
<span class="kw">def</span> <span class="fn">test_validate_password</span><span class="op">(</span>password<span class="op">,</span> expected_valid<span class="op">,</span> expected_msg<span class="op">)</span><span class="op">:</span>
    is_valid<span class="op">,</span> msg <span class="op">=</span> validate_password<span class="op">(</span>password<span class="op">)</span>
    <span class="kw">assert</span> is_valid <span class="op">==</span> expected_valid
    <span class="kw">assert</span> msg <span class="op">==</span> expected_msg
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-18-data-structures-algorithms"><h2>Chapter 18: Data Structures & Algorithms</h2><div class="line"></div><span class="badge" style="background:var(--purple-dim);color:var(--purple)">Chapter 18</span></div>
<p>Understanding DSA helps you write efficient code and is essential for technical interviews. Python's built-in data structures are highly optimized, but knowing <em>when</em> to use each one matters.</p>
<h3 id="181-big-o-notation">18.1 Big-O Notation</h3>
<p>Big-O describes how an algorithm's runtime grows as input size grows. It's about the <strong>worst case</strong> scaling pattern, not the exact time.</p>
<table><thead><tr><th>Notation</th><th>Name</th><th>Example</th><th>For n=1000</th></tr></thead><tbody><tr><td>O(1)</td><td>Constant</td><td>Dict lookup, array index</td><td>1 operation</td></tr>
<tr><td>O(log n)</td><td>Logarithmic</td><td>Binary search</td><td>~10 operations</td></tr>
<tr><td>O(n)</td><td>Linear</td><td>List scan, linear search</td><td>1,000 operations</td></tr>
<tr><td>O(n log n)</td><td>Linearithmic</td><td>Merge sort, Python's <code class="inline">sorted()</code></td><td>~10,000 operations</td></tr>
<tr><td>O(n^2)</td><td>Quadratic</td><td>Nested loops, bubble sort</td><td>1,000,000 operations</td></tr>
<tr><td>O(2^n)</td><td>Exponential</td><td>Recursive fibonacci (naive)</td><td>10^301 operations!</td></tr></tbody></table>
<p><strong>Python built-in data structure complexity:</strong></p>
<table><thead><tr><th>Operation</th><th>list</th><th>dict</th><th>set</th></tr></thead><tbody><tr><td>Access by index</td><td>O(1)</td><td>N/A</td><td>N/A</td></tr>
<tr><td>Search (in)</td><td>O(n)</td><td><strong>O(1)</strong></td><td><strong>O(1)</strong></td></tr>
<tr><td>Insert/append</td><td>O(1)*</td><td>O(1)</td><td>O(1)</td></tr>
<tr><td>Delete</td><td>O(n)</td><td>O(1)</td><td>O(1)</td></tr>
<tr><td>Sort</td><td>O(n log n)</td><td>N/A</td><td>N/A</td></tr></tbody></table>
<p>*O(1) amortized for list.append()</p>
<p><strong>Key takeaway:</strong> If you're doing lots of membership checks (<code class="inline">if x in collection</code>), use a <code class="inline">set</code> or <code class="inline">dict</code>, not a <code class="inline">list</code>!</p>
<pre><code><span class="cm"># Bad: O(n) per lookup * O(n) items = O(n^2)</span>
large_list <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">range</span><span class="op">(</span><span class="num">100_000</span><span class="op">)</span><span class="op">)</span>
<span class="kw">for</span> item <span class="kw">in</span> items_to_check<span class="op">:</span>
    <span class="kw">if</span> item <span class="kw">in</span> large_list<span class="op">:</span>  <span class="cm"># O(n) each time!</span>
        process<span class="op">(</span>item<span class="op">)</span>

<span class="cm"># Good: O(1) per lookup * O(n) items = O(n)</span>
large_set <span class="op">=</span> <span class="nb">set</span><span class="op">(</span><span class="nb">range</span><span class="op">(</span><span class="num">100_000</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># One-time O(n) conversion</span>
<span class="kw">for</span> item <span class="kw">in</span> items_to_check<span class="op">:</span>
    <span class="kw">if</span> item <span class="kw">in</span> large_set<span class="op">:</span>  <span class="cm"># O(1) each time!</span>
        process<span class="op">(</span>item<span class="op">)</span>
</code></pre>
<h3 id="182-binary-search">18.2 Binary Search</h3>
<p>Binary search finds an element in a <strong>sorted</strong> array in O(log n) time by repeatedly halving the search space.</p>
<pre><code><span class="kw">def</span> <span class="fn">binary_search</span><span class="op">(</span>arr<span class="op">,</span> target<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;</span>
<span class="st">    Find target in sorted array. Returns index or -1.</span>

<span class="st">    How it works:</span>
<span class="st">    - Look at the middle element</span>
<span class="st">    - If it&#x27;s the target, we&#x27;re done</span>
<span class="st">    - If target is smaller, search the left half</span>
<span class="st">    - If target is larger, search the right half</span>
<span class="st">    - Repeat until found or search space is empty</span>
<span class="st">    &quot;&quot;&quot;</span>
    low<span class="op">,</span> high <span class="op">=</span> <span class="num">0</span><span class="op">,</span> <span class="nb">len</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">-</span> <span class="num">1</span>

    <span class="kw">while</span> low <span class="op">&lt;</span><span class="op">=</span> high<span class="op">:</span>
        mid <span class="op">=</span> <span class="op">(</span>low <span class="op">+</span> high<span class="op">)</span> <span class="op">/</span><span class="op">/</span> <span class="num">2</span>
        <span class="kw">if</span> arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">:</span>
            <span class="kw">return</span> mid
        <span class="kw">elif</span> arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">:</span>
            low <span class="op">=</span> mid <span class="op">+</span> <span class="num">1</span>    <span class="cm"># Target is in right half</span>
        <span class="kw">else</span><span class="op">:</span>
            high <span class="op">=</span> mid <span class="op">-</span> <span class="num">1</span>   <span class="cm"># Target is in left half</span>

    <span class="kw">return</span> <span class="op">-</span><span class="num">1</span>  <span class="cm"># Not found</span>

<span class="cm"># Example</span>
arr <span class="op">=</span> <span class="op">[</span><span class="num">2</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">8</span><span class="op">,</span> <span class="num">12</span><span class="op">,</span> <span class="num">16</span><span class="op">,</span> <span class="num">23</span><span class="op">,</span> <span class="num">38</span><span class="op">,</span> <span class="num">56</span><span class="op">,</span> <span class="num">72</span><span class="op">,</span> <span class="num">91</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span>binary_search<span class="op">(</span>arr<span class="op">,</span> <span class="num">23</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># 5 (index of 23)</span>
<span class="nb">print</span><span class="op">(</span>binary_search<span class="op">(</span>arr<span class="op">,</span> <span class="num">50</span><span class="op">)</span><span class="op">)</span>   <span class="cm"># -1 (not found)</span>

<span class="cm"># Python&#x27;s built-in: bisect module</span>
<span class="kw">import</span> bisect
arr <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">7</span><span class="op">,</span> <span class="num">9</span><span class="op">,</span> <span class="num">11</span><span class="op">]</span>
idx <span class="op">=</span> bisect<span class="op">.</span>bisect_left<span class="op">(</span>arr<span class="op">,</span> <span class="num">5</span><span class="op">)</span>     <span class="cm"># 2 (insertion point for 5)</span>
bisect<span class="op">.</span>insort<span class="op">(</span>arr<span class="op">,</span> <span class="num">6</span><span class="op">)</span>                <span class="cm"># Insert 6 in sorted position</span>
<span class="nb">print</span><span class="op">(</span>arr<span class="op">)</span>                           <span class="cm"># [1, 3, 5, 6, 7, 9, 11]</span>
</code></pre>
<h3 id="183-common-algorithm-patterns">18.3 Common Algorithm Patterns</h3>
<p><strong>Two Pointers - efficient for sorted arrays:</strong></p>
<pre><code><span class="kw">def</span> <span class="fn">two_sum_sorted</span><span class="op">(</span>nums<span class="op">,</span> target<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Find two numbers in SORTED array that sum to target. O(n).&quot;&quot;&quot;</span>
    left<span class="op">,</span> right <span class="op">=</span> <span class="num">0</span><span class="op">,</span> <span class="nb">len</span><span class="op">(</span>nums<span class="op">)</span> <span class="op">-</span> <span class="num">1</span>
    <span class="kw">while</span> left <span class="op">&lt;</span> right<span class="op">:</span>
        current_sum <span class="op">=</span> nums<span class="op">[</span>left<span class="op">]</span> <span class="op">+</span> nums<span class="op">[</span>right<span class="op">]</span>
        <span class="kw">if</span> current_sum <span class="op">==</span> target<span class="op">:</span>
            <span class="kw">return</span> <span class="op">[</span>left<span class="op">,</span> right<span class="op">]</span>
        <span class="kw">elif</span> current_sum <span class="op">&lt;</span> target<span class="op">:</span>
            left <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
        <span class="kw">else</span><span class="op">:</span>
            right <span class="op">-</span><span class="op">=</span> <span class="num">1</span>
    <span class="kw">return</span> <span class="op">[</span><span class="op">]</span>

<span class="nb">print</span><span class="op">(</span>two_sum_sorted<span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">7</span><span class="op">,</span> <span class="num">11</span><span class="op">]</span><span class="op">,</span> <span class="num">12</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [1, 4] (3 + 11 = 14? No, 1+11=12)</span>
<span class="cm"># Actually: [0, 4] -&gt; 1 + 11 = 12</span>
</code></pre>
<p><strong>Hash Map pattern - O(1) lookups:</strong></p>
<pre><code><span class="kw">def</span> <span class="fn">two_sum</span><span class="op">(</span>nums<span class="op">,</span> target<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Find two numbers that add up to target. Return their indices. O(n).&quot;&quot;&quot;</span>
    seen <span class="op">=</span> <span class="op">{</span><span class="op">}</span>  <span class="cm"># value -&gt; index</span>
    <span class="kw">for</span> i<span class="op">,</span> num <span class="kw">in</span> <span class="nb">enumerate</span><span class="op">(</span>nums<span class="op">)</span><span class="op">:</span>
        complement <span class="op">=</span> target <span class="op">-</span> num
        <span class="kw">if</span> complement <span class="kw">in</span> seen<span class="op">:</span>
            <span class="kw">return</span> <span class="op">[</span>seen<span class="op">[</span>complement<span class="op">]</span><span class="op">,</span> i<span class="op">]</span>
        seen<span class="op">[</span>num<span class="op">]</span> <span class="op">=</span> i
    <span class="kw">return</span> <span class="op">[</span><span class="op">]</span>

<span class="nb">print</span><span class="op">(</span>two_sum<span class="op">(</span><span class="op">[</span><span class="num">2</span><span class="op">,</span> <span class="num">7</span><span class="op">,</span> <span class="num">11</span><span class="op">,</span> <span class="num">15</span><span class="op">]</span><span class="op">,</span> <span class="num">9</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [0, 1] (2 + 7 = 9)</span>
</code></pre>
<p><strong>Sliding Window - subarray problems:</strong></p>
<pre><code><span class="kw">def</span> <span class="fn">max_subarray_sum</span><span class="op">(</span>arr<span class="op">,</span> k<span class="op">)</span><span class="op">:</span>
    <span class="st">&quot;&quot;&quot;Find maximum sum of subarray of size k. O(n).&quot;&quot;&quot;</span>
    <span class="kw">if</span> <span class="nb">len</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">&lt;</span> k<span class="op">:</span>
        <span class="kw">return</span> <span class="kw">None</span>

    <span class="cm"># Calculate sum of first window</span>
    window_sum <span class="op">=</span> <span class="nb">sum</span><span class="op">(</span>arr<span class="op">[</span><span class="op">:</span>k<span class="op">]</span><span class="op">)</span>
    max_sum <span class="op">=</span> window_sum

    <span class="cm"># Slide the window: add new element, remove old element</span>
    <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span>k<span class="op">,</span> <span class="nb">len</span><span class="op">(</span>arr<span class="op">)</span><span class="op">)</span><span class="op">:</span>
        window_sum <span class="op">+</span><span class="op">=</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">-</span> arr<span class="op">[</span>i <span class="op">-</span> k<span class="op">]</span>
        max_sum <span class="op">=</span> <span class="nb">max</span><span class="op">(</span>max_sum<span class="op">,</span> window_sum<span class="op">)</span>

    <span class="kw">return</span> max_sum

<span class="nb">print</span><span class="op">(</span>max_subarray_sum<span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">23</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">20</span><span class="op">]</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># 39 (2+10+23+3... no, 10+23+3+1=37? Let me check: [2,10,23,3]=38)</span>
</code></pre>
<p><strong>Memoization / Dynamic Programming:</strong></p>
<pre><code><span class="kw">from</span> functools <span class="kw">import</span> lru_cache

<span class="cm"># Fibonacci - naive recursive: O(2^n), with memoization: O(n)</span>
<span class="dc">@lru_cache</span><span class="op">(</span>maxsize<span class="op">=</span><span class="kw">None</span><span class="op">)</span>
<span class="kw">def</span> <span class="fn">fibonacci</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> n <span class="op">&lt;</span> <span class="num">2</span><span class="op">:</span>
        <span class="kw">return</span> n
    <span class="kw">return</span> fibonacci<span class="op">(</span>n <span class="op">-</span> <span class="num">1</span><span class="op">)</span> <span class="op">+</span> fibonacci<span class="op">(</span>n <span class="op">-</span> <span class="num">2</span><span class="op">)</span>

<span class="nb">print</span><span class="op">(</span><span class="op">[</span>fibonacci<span class="op">(</span>i<span class="op">)</span> <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">10</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
<span class="cm"># [0, 1, 1, 2, 3, 5, 8, 13, 21, 34]</span>

<span class="cm"># Climbing stairs: how many ways to reach step n (1 or 2 steps at a time)?</span>
<span class="dc">@lru_cache</span><span class="op">(</span>maxsize<span class="op">=</span><span class="kw">None</span><span class="op">)</span>
<span class="kw">def</span> <span class="fn">climb_stairs</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> n <span class="op">&lt;</span><span class="op">=</span> <span class="num">2</span><span class="op">:</span>
        <span class="kw">return</span> n
    <span class="kw">return</span> climb_stairs<span class="op">(</span>n <span class="op">-</span> <span class="num">1</span><span class="op">)</span> <span class="op">+</span> climb_stairs<span class="op">(</span>n <span class="op">-</span> <span class="num">2</span><span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>climb_stairs<span class="op">(</span><span class="num">5</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># 8 ways</span>
</code></pre>
<p><strong>Sorting - Python's built-in is excellent:</strong></p>
<pre><code><span class="cm"># sorted() returns a NEW list, .sort() modifies in place</span>
nums <span class="op">=</span> <span class="op">[</span><span class="num">3</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">9</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">sorted</span><span class="op">(</span>nums<span class="op">)</span><span class="op">)</span>              <span class="cm"># [1, 1, 2, 3, 4, 5, 6, 9]</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">sorted</span><span class="op">(</span>nums<span class="op">,</span> reverse<span class="op">=</span><span class="kw">True</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [9, 6, 5, 4, 3, 2, 1, 1]</span>

<span class="cm"># Sort by custom key</span>
words <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">pie</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Washington</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">a</span><span class="st">&quot;</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">sorted</span><span class="op">(</span>words<span class="op">,</span> key<span class="op">=</span><span class="nb">len</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># [&#x27;a&#x27;, &#x27;pie&#x27;, &#x27;banana&#x27;, &#x27;Washington&#x27;]</span>

<span class="cm"># Sort objects by attribute</span>
<span class="kw">from</span> dataclasses <span class="kw">import</span> dataclass

<span class="dc">@dataclass</span>
<span class="kw">class</span> <span class="fn">Student</span><span class="op">:</span>
    name<span class="op">:</span> <span class="nb">str</span>
    grade<span class="op">:</span> <span class="nb">float</span>

students <span class="op">=</span> <span class="op">[</span>Student<span class="op">(</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">92</span><span class="op">)</span><span class="op">,</span> Student<span class="op">(</span><span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">88</span><span class="op">)</span><span class="op">,</span> Student<span class="op">(</span><span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">95</span><span class="op">)</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">sorted</span><span class="op">(</span>students<span class="op">,</span> key<span class="op">=</span><span class="kw">lambda</span> s<span class="op">:</span> s<span class="op">.</span>grade<span class="op">,</span> reverse<span class="op">=</span><span class="kw">True</span><span class="op">)</span><span class="op">)</span>
<span class="cm"># [Student(name=&#x27;Charlie&#x27;, grade=95), Student(name=&#x27;Alice&#x27;, grade=92), ...]</span>

<span class="cm"># Sort dict by value</span>
scores <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">92</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">88</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">95</span><span class="op">}</span>
sorted_scores <span class="op">=</span> <span class="nb">dict</span><span class="op">(</span><span class="nb">sorted</span><span class="op">(</span>scores<span class="op">.</span>items<span class="op">(</span><span class="op">)</span><span class="op">,</span> key<span class="op">=</span><span class="kw">lambda</span> x<span class="op">:</span> x<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> reverse<span class="op">=</span><span class="kw">True</span><span class="op">)</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>sorted_scores<span class="op">)</span>  <span class="cm"># {&#x27;Charlie&#x27;: 95, &#x27;Alice&#x27;: 92, &#x27;Bob&#x27;: 88}</span>
</code></pre>
<h3 id="184-python-collections-module">18.4 Python collections Module</h3>
<pre><code><span class="kw">from</span> collections <span class="kw">import</span> Counter<span class="op">,</span> defaultdict<span class="op">,</span> deque<span class="op">,</span> OrderedDict

<span class="cm"># Counter - count things</span>
words <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">cherry</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">banana</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">apple</span><span class="st">&quot;</span><span class="op">]</span>
freq <span class="op">=</span> Counter<span class="op">(</span>words<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>freq<span class="op">)</span>                    <span class="cm"># Counter({&#x27;apple&#x27;: 3, &#x27;banana&#x27;: 2, &#x27;cherry&#x27;: 1})</span>
<span class="nb">print</span><span class="op">(</span>freq<span class="op">.</span>most_common<span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># [(&#x27;apple&#x27;, 3), (&#x27;banana&#x27;, 2)]</span>

<span class="cm"># defaultdict - dict with default values (no KeyError!)</span>
graph <span class="op">=</span> defaultdict<span class="op">(</span><span class="nb">list</span><span class="op">)</span>
graph<span class="op">[</span><span class="st">&quot;</span><span class="st">A</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>append<span class="op">(</span><span class="st">&quot;</span><span class="st">B</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># No need to check if &quot;A&quot; exists</span>
graph<span class="op">[</span><span class="st">&quot;</span><span class="st">A</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>append<span class="op">(</span><span class="st">&quot;</span><span class="st">C</span><span class="st">&quot;</span><span class="op">)</span>
graph<span class="op">[</span><span class="st">&quot;</span><span class="st">B</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>append<span class="op">(</span><span class="st">&quot;</span><span class="st">C</span><span class="st">&quot;</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">dict</span><span class="op">(</span>graph<span class="op">)</span><span class="op">)</span>  <span class="cm"># {&#x27;A&#x27;: [&#x27;B&#x27;, &#x27;C&#x27;], &#x27;B&#x27;: [&#x27;C&#x27;]}</span>

word_count <span class="op">=</span> defaultdict<span class="op">(</span><span class="nb">int</span><span class="op">)</span>
<span class="kw">for</span> word <span class="kw">in</span> <span class="st">&quot;</span><span class="st">the cat sat on the mat</span><span class="st">&quot;</span><span class="op">.</span>split<span class="op">(</span><span class="op">)</span><span class="op">:</span>
    word_count<span class="op">[</span>word<span class="op">]</span> <span class="op">+</span><span class="op">=</span> <span class="num">1</span>  <span class="cm"># No need for .get() or if-check</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">dict</span><span class="op">(</span>word_count<span class="op">)</span><span class="op">)</span>

<span class="cm"># deque - double-ended queue (O(1) append/pop from both ends)</span>
<span class="kw">from</span> collections <span class="kw">import</span> deque
dq <span class="op">=</span> deque<span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span><span class="op">)</span>
dq<span class="op">.</span>appendleft<span class="op">(</span><span class="num">0</span><span class="op">)</span>    <span class="cm"># [0, 1, 2, 3]</span>
dq<span class="op">.</span>append<span class="op">(</span><span class="num">4</span><span class="op">)</span>        <span class="cm"># [0, 1, 2, 3, 4]</span>
dq<span class="op">.</span>popleft<span class="op">(</span><span class="op">)</span>        <span class="cm"># 0  (O(1) vs list.pop(0) which is O(n)!)</span>
dq<span class="op">.</span>rotate<span class="op">(</span><span class="num">1</span><span class="op">)</span>        <span class="cm"># [4, 1, 2, 3]</span>

<span class="cm"># Use deque as a fixed-size buffer</span>
recent <span class="op">=</span> deque<span class="op">(</span>maxlen<span class="op">=</span><span class="num">3</span><span class="op">)</span>
<span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">5</span><span class="op">)</span><span class="op">:</span>
    recent<span class="op">.</span>append<span class="op">(</span>i<span class="op">)</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">list</span><span class="op">(</span>recent<span class="op">)</span><span class="op">)</span>  <span class="cm"># [2, 3, 4] - oldest items dropped automatically</span>
</code></pre>
<h3 id="exercise-181-algorithm-challenges">Exercise 18.1: Algorithm Challenges</h3>
<ol><li><strong>Valid Anagram</strong>: Write a function to check if two strings are anagrams (same letters, different order).</li>
<li><strong>Find Duplicates</strong>: Given a list with duplicates, return all duplicate values.</li>
<li><strong>Merge Sorted Lists</strong>: Merge two sorted lists into one sorted list.</li></ol>
<details>
<summary>Solutions</summary>

<pre><code><span class="cm"># 1. Valid Anagram - O(n)</span>
<span class="kw">def</span> <span class="fn">is_anagram</span><span class="op">(</span>s1<span class="op">,</span> s2<span class="op">)</span><span class="op">:</span>
    <span class="kw">from</span> collections <span class="kw">import</span> Counter
    <span class="kw">return</span> Counter<span class="op">(</span>s1<span class="op">.</span>lower<span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">==</span> Counter<span class="op">(</span>s2<span class="op">.</span>lower<span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="nb">print</span><span class="op">(</span>is_anagram<span class="op">(</span><span class="st">&quot;</span><span class="st">listen</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">silent</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># True</span>
<span class="nb">print</span><span class="op">(</span>is_anagram<span class="op">(</span><span class="st">&quot;</span><span class="st">hello</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">world</span><span class="st">&quot;</span><span class="op">)</span><span class="op">)</span>    <span class="cm"># False</span>

<span class="cm"># 2. Find Duplicates - O(n)</span>
<span class="kw">def</span> <span class="fn">find_duplicates</span><span class="op">(</span>lst<span class="op">)</span><span class="op">:</span>
    <span class="kw">from</span> collections <span class="kw">import</span> Counter
    <span class="kw">return</span> <span class="op">[</span>item <span class="kw">for</span> item<span class="op">,</span> count <span class="kw">in</span> Counter<span class="op">(</span>lst<span class="op">)</span><span class="op">.</span>items<span class="op">(</span><span class="op">)</span> <span class="kw">if</span> count <span class="op">&gt;</span> <span class="num">1</span><span class="op">]</span>

<span class="nb">print</span><span class="op">(</span>find_duplicates<span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [2, 3]</span>

<span class="cm"># 3. Merge Sorted Lists - O(n+m)</span>
<span class="kw">def</span> <span class="fn">merge_sorted</span><span class="op">(</span>a<span class="op">,</span> b<span class="op">)</span><span class="op">:</span>
    result <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
    i <span class="op">=</span> j <span class="op">=</span> <span class="num">0</span>
    <span class="kw">while</span> i <span class="op">&lt;</span> <span class="nb">len</span><span class="op">(</span>a<span class="op">)</span> <span class="kw">and</span> j <span class="op">&lt;</span> <span class="nb">len</span><span class="op">(</span>b<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span><span class="op">=</span> b<span class="op">[</span>j<span class="op">]</span><span class="op">:</span>
            result<span class="op">.</span>append<span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span><span class="op">)</span>
            i <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
        <span class="kw">else</span><span class="op">:</span>
            result<span class="op">.</span>append<span class="op">(</span>b<span class="op">[</span>j<span class="op">]</span><span class="op">)</span>
            j <span class="op">+</span><span class="op">=</span> <span class="num">1</span>
    result<span class="op">.</span>extend<span class="op">(</span>a<span class="op">[</span>i<span class="op">:</span><span class="op">]</span><span class="op">)</span>
    result<span class="op">.</span>extend<span class="op">(</span>b<span class="op">[</span>j<span class="op">:</span><span class="op">]</span><span class="op">)</span>
    <span class="kw">return</span> result

<span class="nb">print</span><span class="op">(</span>merge_sorted<span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> <span class="num">5</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="num">2</span><span class="op">,</span> <span class="num">4</span><span class="op">,</span> <span class="num">6</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [1, 2, 3, 4, 5, 6]</span>
</code></pre>
</details>
<hr>
<div class="section-divider" id="chapter-19-interview-questions-answers"><h2>Chapter 19: Interview Questions & Answers</h2><div class="line"></div><span class="badge" style="background:var(--amber-dim);color:var(--amber)">Chapter 19</span></div>
<p>These are commonly asked Python interview questions with detailed answers and code examples. Understanding <em>why</em> is more important than memorizing answers.</p>
<h3 id="q1-whats-the-difference-between-list-tuple-and-set">Q1: What's the difference between list, tuple, and set?</h3>
<table><thead><tr><th>Feature</th><th>List</th><th>Tuple</th><th>Set</th></tr></thead><tbody><tr><td>Syntax</td><td><code class="inline">[1, 2, 3]</code></td><td><code class="inline">(1, 2, 3)</code></td><td><code class="inline">{1, 2, 3}</code></td></tr>
<tr><td>Mutable?</td><td>Yes</td><td>No</td><td>Yes</td></tr>
<tr><td>Ordered?</td><td>Yes</td><td>Yes</td><td>No</td></tr>
<tr><td>Duplicates?</td><td>Yes</td><td>Yes</td><td>No</td></tr>
<tr><td>Hashable?</td><td>No</td><td>Yes</td><td>No</td></tr>
<tr><td>Lookup speed</td><td>O(n)</td><td>O(n)</td><td>O(1)</td></tr></tbody></table>
<pre><code><span class="cm"># Use list when you need to modify the collection</span>
shopping <span class="op">=</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">milk</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">bread</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">eggs</span><span class="st">&quot;</span><span class="op">]</span>
shopping<span class="op">.</span>append<span class="op">(</span><span class="st">&quot;</span><span class="st">butter</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Use tuple for fixed data (coordinates, DB rows, dict keys)</span>
point <span class="op">=</span> <span class="op">(</span><span class="num">3</span><span class="op">,</span> <span class="num">4</span><span class="op">)</span>
config <span class="op">=</span> <span class="op">(</span><span class="st">&quot;</span><span class="st">localhost</span><span class="st">&quot;</span><span class="op">,</span> <span class="num">5432</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">mydb</span><span class="st">&quot;</span><span class="op">)</span>  <span class="cm"># Won&#x27;t accidentally change</span>

<span class="cm"># Use set for unique items and fast membership testing</span>
seen_ids <span class="op">=</span> <span class="op">{</span><span class="num">101</span><span class="op">,</span> <span class="num">102</span><span class="op">,</span> <span class="num">103</span><span class="op">}</span>
<span class="nb">print</span><span class="op">(</span><span class="num">104</span> <span class="kw">in</span> seen_ids<span class="op">)</span>  <span class="cm"># O(1) lookup - much faster than list for large data</span>
</code></pre>
<h3 id="q2-explain-deep-copy-vs-shallow-copy-with-an-example">Q2: Explain deep copy vs shallow copy with an example.</h3>
<pre><code><span class="kw">import</span> copy

original <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">scores</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">90</span><span class="op">,</span> <span class="num">85</span><span class="op">,</span> <span class="num">95</span><span class="op">]</span><span class="op">}</span>

<span class="cm"># Assignment: NO copy - same object</span>
ref <span class="op">=</span> original
ref<span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span>
<span class="nb">print</span><span class="op">(</span>original<span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>  <span class="cm"># &quot;Bob&quot; - original changed!</span>

<span class="cm"># Shallow copy: new outer dict, but inner list is shared</span>
shallow <span class="op">=</span> copy<span class="op">.</span>copy<span class="op">(</span>original<span class="op">)</span>
shallow<span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;</span><span class="st">Charlie</span><span class="st">&quot;</span>      <span class="cm"># Doesn&#x27;t affect original</span>
shallow<span class="op">[</span><span class="st">&quot;</span><span class="st">scores</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>append<span class="op">(</span><span class="num">100</span><span class="op">)</span>    <span class="cm"># DOES affect original!</span>
<span class="nb">print</span><span class="op">(</span>original<span class="op">[</span><span class="st">&quot;</span><span class="st">scores</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>        <span class="cm"># [90, 85, 95, 100]</span>

<span class="cm"># Deep copy: completely independent copy</span>
deep <span class="op">=</span> copy<span class="op">.</span>deepcopy<span class="op">(</span>original<span class="op">)</span>
deep<span class="op">[</span><span class="st">&quot;</span><span class="st">scores</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>append<span class="op">(</span><span class="num">200</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>original<span class="op">[</span><span class="st">&quot;</span><span class="st">scores</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>        <span class="cm"># [90, 85, 95, 100] - NOT affected</span>
</code></pre>
<h3 id="q3-what-is-the-gil-and-how-does-it-affect-your-code">Q3: What is the GIL and how does it affect your code?</h3>
<p>The <strong>Global Interpreter Lock (GIL)</strong> is a mutex in CPython that allows only one thread to execute Python bytecode at a time, even on multi-core machines.</p>
<p><strong>Impact:</strong></p>
<ul><li><strong>CPU-bound tasks</strong>: Threading gives NO speedup. Use <code class="inline">multiprocessing</code> instead.</li>
<li><strong>I/O-bound tasks</strong>: Threading works fine because the GIL is released during I/O (file reads, network calls, database queries).</li></ul>
<pre><code><span class="cm"># CPU-bound: use multiprocessing</span>
<span class="kw">from</span> multiprocessing <span class="kw">import</span> Pool
<span class="kw">with</span> Pool<span class="op">(</span><span class="num">4</span><span class="op">)</span> <span class="kw">as</span> p<span class="op">:</span>
    results <span class="op">=</span> p<span class="op">.</span>map<span class="op">(</span>heavy_computation<span class="op">,</span> data<span class="op">)</span>

<span class="cm"># I/O-bound: use threading or asyncio</span>
<span class="kw">from</span> concurrent.futures <span class="kw">import</span> ThreadPoolExecutor
<span class="kw">with</span> ThreadPoolExecutor<span class="op">(</span>max_workers<span class="op">=</span><span class="num">10</span><span class="op">)</span> <span class="kw">as</span> executor<span class="op">:</span>
    results <span class="op">=</span> <span class="nb">list</span><span class="op">(</span>executor<span class="op">.</span>map<span class="op">(</span>fetch_url<span class="op">,</span> urls<span class="op">)</span><span class="op">)</span>
</code></pre>
<h3 id="q4-how-do-decorators-work-write-one">Q4: How do decorators work? Write one.</h3>
<p>A decorator is a function that wraps another function to extend its behavior. When you write <code class="inline">@decorator</code>, Python does <code class="inline">func = decorator(func)</code>.</p>
<pre><code><span class="kw">from</span> functools <span class="kw">import</span> wraps
<span class="kw">import</span> time

<span class="kw">def</span> <span class="fn">timer</span><span class="op">(</span>func<span class="op">)</span><span class="op">:</span>
    <span class="dc">@wraps</span><span class="op">(</span>func<span class="op">)</span>  <span class="cm"># Preserves func.__name__ and func.__doc__</span>
    <span class="kw">def</span> <span class="fn">wrapper</span><span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
        start <span class="op">=</span> time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span>
        result <span class="op">=</span> func<span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>func<span class="op">.</span>__name__<span class="st">}</span><span class="st"> took </span><span class="st">{</span>time<span class="op">.</span>perf_counter<span class="op">(</span><span class="op">)</span> <span class="op">-</span> start<span class="st">:</span><span class="st">.4f</span><span class="st">}</span><span class="st">s</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> result
    <span class="kw">return</span> wrapper

<span class="dc">@timer</span>
<span class="kw">def</span> <span class="fn">slow_func</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    time<span class="op">.</span>sleep<span class="op">(</span><span class="num">1</span><span class="op">)</span>

slow_func<span class="op">(</span><span class="op">)</span>  <span class="cm"># &quot;slow_func took 1.0012s&quot;</span>
</code></pre>
<h3 id="q5-explain-args-and-kwargs-with-examples">Q5: Explain <code class="inline">*args</code> and <code class="inline">**kwargs</code> with examples.</h3>
<pre><code><span class="kw">def</span> <span class="fn">example</span><span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">args (tuple): </span><span class="st">{</span>args<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">kwargs (dict): </span><span class="st">{</span>kwargs<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>

example<span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">,</span> name<span class="op">=</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> age<span class="op">=</span><span class="num">30</span><span class="op">)</span>
<span class="cm"># args (tuple): (1, 2, 3)</span>
<span class="cm"># kwargs (dict): {&#x27;name&#x27;: &#x27;Alice&#x27;, &#x27;age&#x27;: 30}</span>

<span class="cm"># Real-world use: flexible wrapper functions</span>
<span class="kw">def</span> <span class="fn">log_call</span><span class="op">(</span>func<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">wrapper</span><span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span><span class="op">:</span>  <span class="cm"># Accept ANY arguments</span>
        <span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Calling </span><span class="st">{</span>func<span class="op">.</span>__name__<span class="st">}</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> func<span class="op">(</span><span class="op">*</span>args<span class="op">,</span> <span class="op">*</span><span class="op">*</span>kwargs<span class="op">)</span>  <span class="cm"># Pass them through</span>
    <span class="kw">return</span> wrapper
</code></pre>
<h3 id="q6-what-is-a-generator-and-when-would-you-use-one">Q6: What is a generator and when would you use one?</h3>
<p>Generators produce values <strong>lazily</strong> - one at a time, on demand. They use <code class="inline">yield</code> instead of <code class="inline">return</code> and are memory-efficient for large datasets.</p>
<pre><code><span class="cm"># List: creates ALL items in memory immediately</span>
<span class="kw">def</span> <span class="fn">get_squares_list</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> <span class="op">[</span>x<span class="op">*</span><span class="op">*</span><span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span>n<span class="op">)</span><span class="op">]</span>  <span class="cm"># 10M items = ~85MB RAM</span>

<span class="cm"># Generator: produces ONE item at a time</span>
<span class="kw">def</span> <span class="fn">get_squares_gen</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
    <span class="kw">for</span> x <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span>n<span class="op">)</span><span class="op">:</span>
        <span class="kw">yield</span> x<span class="op">*</span><span class="op">*</span><span class="num">2</span>  <span class="cm"># ~200 bytes regardless of n!</span>

<span class="cm"># Use generator for large/infinite sequences</span>
<span class="kw">for</span> square <span class="kw">in</span> get_squares_gen<span class="op">(</span><span class="num">10_000_000</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> square <span class="op">&gt;</span> <span class="num">1000</span><span class="op">:</span>
        <span class="kw">break</span>  <span class="cm"># Only computed ~32 values, not 10M!</span>
</code></pre>
<h3 id="q7-whats-the-mutable-default-argument-trap">Q7: What's the mutable default argument trap?</h3>
<pre><code><span class="cm"># BUG: The default list is shared across ALL calls!</span>
<span class="kw">def</span> <span class="fn">bad_append</span><span class="op">(</span>item<span class="op">,</span> lst<span class="op">=</span><span class="op">[</span><span class="op">]</span><span class="op">)</span><span class="op">:</span>
    lst<span class="op">.</span>append<span class="op">(</span>item<span class="op">)</span>
    <span class="kw">return</span> lst

<span class="nb">print</span><span class="op">(</span>bad_append<span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [1]</span>
<span class="nb">print</span><span class="op">(</span>bad_append<span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [1, 2]  Expected [2]!</span>
<span class="nb">print</span><span class="op">(</span>bad_append<span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [1, 2, 3]  Expected [3]!</span>

<span class="cm"># FIX: Use None as default, create new list inside</span>
<span class="kw">def</span> <span class="fn">good_append</span><span class="op">(</span>item<span class="op">,</span> lst<span class="op">=</span><span class="kw">None</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">if</span> lst <span class="kw">is</span> <span class="kw">None</span><span class="op">:</span>
        lst <span class="op">=</span> <span class="op">[</span><span class="op">]</span>
    lst<span class="op">.</span>append<span class="op">(</span>item<span class="op">)</span>
    <span class="kw">return</span> lst

<span class="nb">print</span><span class="op">(</span>good_append<span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [1]</span>
<span class="nb">print</span><span class="op">(</span>good_append<span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">)</span>  <span class="cm"># [2] </span>
</code></pre>
<h3 id="q8-whats-the-difference-between-and-is">Q8: What's the difference between <code class="inline">==</code> and <code class="inline">is</code>?</h3>
<pre><code>a <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
b <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
c <span class="op">=</span> a

<span class="nb">print</span><span class="op">(</span>a <span class="op">==</span> b<span class="op">)</span>   <span class="cm"># True  (same VALUE)</span>
<span class="nb">print</span><span class="op">(</span>a <span class="kw">is</span> b<span class="op">)</span>   <span class="cm"># False (different OBJECTS in memory)</span>
<span class="nb">print</span><span class="op">(</span>a <span class="kw">is</span> c<span class="op">)</span>   <span class="cm"># True  (same OBJECT - c points to a)</span>

<span class="cm"># Rule: use &#x27;is&#x27; ONLY for None, True, False</span>
<span class="kw">if</span> result <span class="kw">is</span> <span class="kw">None</span><span class="op">:</span>     <span class="cm"># Correct</span>
    <span class="kw">pass</span>
<span class="kw">if</span> result <span class="op">==</span> <span class="kw">None</span><span class="op">:</span>     <span class="cm"># Works but not Pythonic</span>
    <span class="kw">pass</span>
</code></pre>
<h3 id="q9-explain-if-__name__-__main__">Q9: Explain <code class="inline">if __name__ == &quot;__main__&quot;</code>.</h3>
<pre><code><span class="cm"># utils.py</span>
<span class="kw">def</span> <span class="fn">helper</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> <span class="st">&quot;</span><span class="st">I</span><span class="st">&#x27;</span><span class="st">m a helper</span><span class="st">&quot;</span>

<span class="kw">if</span> __name__ <span class="op">==</span> <span class="st">&quot;</span><span class="st">__main__</span><span class="st">&quot;</span><span class="op">:</span>
    <span class="cm"># This block runs ONLY when you execute: python utils.py</span>
    <span class="cm"># It does NOT run when someone does: import utils</span>
    <span class="nb">print</span><span class="op">(</span>helper<span class="op">(</span><span class="op">)</span><span class="op">)</span>
    <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Running as main script</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<p><strong>Why it matters:</strong> Without this guard, any code at the module level runs on import, which can cause unexpected side effects (tests running, servers starting, etc.).</p>
<h3 id="q10-how-do-you-handle-missing-data-in-pandas">Q10: How do you handle missing data in Pandas?</h3>
<pre><code><span class="kw">import</span> pandas <span class="kw">as</span> pd
<span class="kw">import</span> numpy <span class="kw">as</span> np

df <span class="op">=</span> pd<span class="op">.</span>DataFrame<span class="op">(</span><span class="op">{</span>
    <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Bob</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">None</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">Diana</span><span class="st">&quot;</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">30</span><span class="op">,</span> <span class="kw">None</span><span class="op">,</span> <span class="num">35</span><span class="op">,</span> <span class="num">28</span><span class="op">]</span><span class="op">,</span>
    <span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">:</span> <span class="op">[</span><span class="num">95000</span><span class="op">,</span> <span class="num">72000</span><span class="op">,</span> <span class="kw">None</span><span class="op">,</span> <span class="num">78000</span><span class="op">]</span>
<span class="op">}</span><span class="op">)</span>

<span class="cm"># Detect</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>isnull<span class="op">(</span><span class="op">)</span><span class="op">.</span>sum<span class="op">(</span><span class="op">)</span><span class="op">)</span>       <span class="cm"># Count missing per column</span>
<span class="nb">print</span><span class="op">(</span>df<span class="op">.</span>isnull<span class="op">(</span><span class="op">)</span><span class="op">.</span>any<span class="op">(</span><span class="op">)</span><span class="op">)</span>       <span class="cm"># Which columns have missing?</span>

<span class="cm"># Strategy 1: Remove rows</span>
df<span class="op">.</span>dropna<span class="op">(</span><span class="op">)</span>                     <span class="cm"># Remove rows with ANY NaN</span>
df<span class="op">.</span>dropna<span class="op">(</span>subset<span class="op">=</span><span class="op">[</span><span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">]</span><span class="op">)</span>      <span class="cm"># Remove only if name is NaN</span>

<span class="cm"># Strategy 2: Fill with values</span>
df<span class="op">.</span>fillna<span class="op">(</span><span class="num">0</span><span class="op">)</span>                    <span class="cm"># Fill all with 0</span>
df<span class="op">[</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>fillna<span class="op">(</span>df<span class="op">[</span><span class="st">&quot;</span><span class="st">age</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>median<span class="op">(</span><span class="op">)</span><span class="op">,</span> inplace<span class="op">=</span><span class="kw">True</span><span class="op">)</span>  <span class="cm"># Fill with median</span>

<span class="cm"># Strategy 3: Interpolate (for time series)</span>
df<span class="op">[</span><span class="st">&quot;</span><span class="st">salary</span><span class="st">&quot;</span><span class="op">]</span><span class="op">.</span>interpolate<span class="op">(</span><span class="op">)</span>

<span class="cm"># Strategy 4: Forward/backward fill</span>
df<span class="op">.</span>fillna<span class="op">(</span>method<span class="op">=</span><span class="st">&quot;</span><span class="st">ffill</span><span class="st">&quot;</span><span class="op">)</span>       <span class="cm"># Use previous row&#x27;s value</span>
df<span class="op">.</span>fillna<span class="op">(</span>method<span class="op">=</span><span class="st">&quot;</span><span class="st">bfill</span><span class="st">&quot;</span><span class="op">)</span>       <span class="cm"># Use next row&#x27;s value</span>
</code></pre>
<h3 id="q11-what-is-mro-method-resolution-order">Q11: What is MRO (Method Resolution Order)?</h3>
<p>MRO determines the order Python searches for methods in a class hierarchy with multiple inheritance. Python uses <strong>C3 linearization</strong>.</p>
<pre><code><span class="kw">class</span> <span class="fn">A</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">greet</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span> <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">A</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">class</span> <span class="fn">B</span><span class="op">(</span>A<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">greet</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span> <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">B</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">class</span> <span class="fn">C</span><span class="op">(</span>A<span class="op">)</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">greet</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span> <span class="nb">print</span><span class="op">(</span><span class="st">&quot;</span><span class="st">C</span><span class="st">&quot;</span><span class="op">)</span>

<span class="kw">class</span> <span class="fn">D</span><span class="op">(</span>B<span class="op">,</span> C<span class="op">)</span><span class="op">:</span>
    <span class="kw">pass</span>

d <span class="op">=</span> D<span class="op">(</span><span class="op">)</span>
d<span class="op">.</span>greet<span class="op">(</span><span class="op">)</span>  <span class="cm"># &quot;B&quot; - follows MRO: D -&gt; B -&gt; C -&gt; A</span>
<span class="nb">print</span><span class="op">(</span>D<span class="op">.</span>__mro__<span class="op">)</span>
<span class="cm"># (D, B, C, A, object)</span>
</code></pre>
<h3 id="q12-what-are-context-managers-and-why-use-them">Q12: What are context managers and why use them?</h3>
<p>Context managers ensure <strong>cleanup happens even if exceptions occur</strong>. They implement <code class="inline">__enter__</code> and <code class="inline">__exit__</code> (or use <code class="inline">@contextmanager</code>).</p>
<pre><code><span class="cm"># Without context manager (bug if exception before close):</span>
f <span class="op">=</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">file.txt</span><span class="st">&quot;</span><span class="op">)</span>
data <span class="op">=</span> f<span class="op">.</span>read<span class="op">(</span><span class="op">)</span>       <span class="cm"># What if this raises an exception?</span>
f<span class="op">.</span>close<span class="op">(</span><span class="op">)</span>             <span class="cm"># This line might never execute!</span>

<span class="cm"># With context manager (always cleaned up):</span>
<span class="kw">with</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">file.txt</span><span class="st">&quot;</span><span class="op">)</span> <span class="kw">as</span> f<span class="op">:</span>
    data <span class="op">=</span> f<span class="op">.</span>read<span class="op">(</span><span class="op">)</span>   <span class="cm"># Even if this fails, file is closed</span>

<span class="cm"># Common uses: files, database connections, locks, temporary changes</span>
</code></pre>
<h3 id="q13-explain-the-bias-variance-tradeoff">Q13: Explain the bias-variance tradeoff.</h3>
<p><strong>Bias</strong> = error from wrong assumptions (underfitting). Model is too simple, misses patterns. <strong>Variance</strong> = error from sensitivity to training data (overfitting). Model memorizes noise.</p>
<pre><code><span class="cm"># High bias (underfitting): linear model for non-linear data</span>
<span class="kw">from</span> sklearn.linear_model <span class="kw">import</span> LinearRegression
<span class="cm"># Fits a straight line through curved data - too simple</span>

<span class="cm"># High variance (overfitting): very deep decision tree</span>
<span class="kw">from</span> sklearn.tree <span class="kw">import</span> DecisionTreeClassifier
<span class="cm"># model = DecisionTreeClassifier(max_depth=None)  # Memorizes training data</span>

<span class="cm"># Sweet spot: tune complexity</span>
<span class="cm"># model = DecisionTreeClassifier(max_depth=5)  # Regularized</span>
<span class="cm"># Use cross-validation to find optimal complexity</span>
<span class="kw">from</span> sklearn.model_selection <span class="kw">import</span> cross_val_score
scores <span class="op">=</span> cross_val_score<span class="op">(</span>model<span class="op">,</span> X<span class="op">,</span> y<span class="op">,</span> cv<span class="op">=</span><span class="num">5</span><span class="op">)</span>  <span class="cm"># 5-fold CV</span>
<span class="nb">print</span><span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">Mean accuracy: </span><span class="st">{</span>scores<span class="op">.</span>mean<span class="op">(</span><span class="op">)</span><span class="st">:</span><span class="st">.3f</span><span class="st">}</span><span class="st"> (+/- </span><span class="st">{</span>scores<span class="op">.</span>std<span class="op">(</span><span class="op">)</span><span class="st">:</span><span class="st">.3f</span><span class="st">}</span><span class="st">)</span><span class="st">&quot;</span><span class="op">)</span>
</code></pre>
<h3 id="q14-how-does-python-memory-management-work">Q14: How does Python memory management work?</h3>
<p>Python uses <strong>reference counting</strong> + <strong>garbage collection</strong> (cycle detector).</p>
<pre><code><span class="kw">import</span> sys

a <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">,</span> <span class="num">2</span><span class="op">,</span> <span class="num">3</span><span class="op">]</span>
<span class="nb">print</span><span class="op">(</span>sys<span class="op">.</span>getrefcount<span class="op">(</span>a<span class="op">)</span><span class="op">)</span>  <span class="cm"># 2 (a + getrefcount&#x27;s own reference)</span>

b <span class="op">=</span> a          <span class="cm"># refcount = 3</span>
<span class="kw">del</span> b          <span class="cm"># refcount = 2</span>
<span class="cm"># When refcount reaches 0, memory is freed immediately</span>

<span class="cm"># Circular references: garbage collector handles these</span>
<span class="kw">class</span> <span class="fn">Node</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>ref <span class="op">=</span> <span class="kw">None</span>

a <span class="op">=</span> Node<span class="op">(</span><span class="op">)</span>
b <span class="op">=</span> Node<span class="op">(</span><span class="op">)</span>
a<span class="op">.</span>ref <span class="op">=</span> b
b<span class="op">.</span>ref <span class="op">=</span> a  <span class="cm"># Circular reference!</span>
<span class="kw">del</span> a<span class="op">,</span> b   <span class="cm"># Refcount never reaches 0, but GC detects and collects the cycle</span>

<span class="kw">import</span> gc
gc<span class="op">.</span>collect<span class="op">(</span><span class="op">)</span>  <span class="cm"># Force garbage collection</span>
</code></pre>
<h3 id="q15-what-are-pythons-magicdunder-methods">Q15: What are Python's magic/dunder methods?</h3>
<p>Dunder (double underscore) methods let you customize how your objects behave with built-in operations:</p>
<pre><code><span class="kw">class</span> <span class="fn">Money</span><span class="op">:</span>
    <span class="kw">def</span> <span class="fn">__init__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> amount<span class="op">,</span> currency<span class="op">=</span><span class="st">&quot;</span><span class="st">USD</span><span class="st">&quot;</span><span class="op">)</span><span class="op">:</span>
        <span class="nb">self</span><span class="op">.</span>amount <span class="op">=</span> amount
        <span class="nb">self</span><span class="op">.</span>currency <span class="op">=</span> currency

    <span class="kw">def</span> <span class="fn">__repr__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">Money(</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>amount<span class="st">}</span><span class="st">, </span><span class="st">&#x27;</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>currency<span class="st">}</span><span class="st">&#x27;</span><span class="st">)</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">__str__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="st">f</span><span class="st">&quot;</span><span class="st">$</span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>amount<span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st"> </span><span class="st">{</span><span class="nb">self</span><span class="op">.</span>currency<span class="st">}</span><span class="st">&quot;</span>

    <span class="kw">def</span> <span class="fn">__add__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="kw">if</span> <span class="nb">self</span><span class="op">.</span>currency <span class="op">!=</span> other<span class="op">.</span>currency<span class="op">:</span>
            <span class="kw">raise</span> <span class="nb">ValueError</span><span class="op">(</span><span class="st">&quot;</span><span class="st">Cannot add different currencies</span><span class="st">&quot;</span><span class="op">)</span>
        <span class="kw">return</span> Money<span class="op">(</span><span class="nb">self</span><span class="op">.</span>amount <span class="op">+</span> other<span class="op">.</span>amount<span class="op">,</span> <span class="nb">self</span><span class="op">.</span>currency<span class="op">)</span>

    <span class="kw">def</span> <span class="fn">__eq__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>amount <span class="op">==</span> other<span class="op">.</span>amount <span class="kw">and</span> <span class="nb">self</span><span class="op">.</span>currency <span class="op">==</span> other<span class="op">.</span>currency

    <span class="kw">def</span> <span class="fn">__lt__</span><span class="op">(</span><span class="nb">self</span><span class="op">,</span> other<span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="nb">self</span><span class="op">.</span>amount <span class="op">&lt;</span> other<span class="op">.</span>amount

    <span class="kw">def</span> <span class="fn">__len__</span><span class="op">(</span><span class="nb">self</span><span class="op">)</span><span class="op">:</span>
        <span class="kw">return</span> <span class="nb">int</span><span class="op">(</span><span class="nb">self</span><span class="op">.</span>amount <span class="op">*</span> <span class="num">100</span><span class="op">)</span>  <span class="cm"># cents</span>

m1 <span class="op">=</span> Money<span class="op">(</span><span class="num">10.50</span><span class="op">)</span>
m2 <span class="op">=</span> Money<span class="op">(</span><span class="num">5.25</span><span class="op">)</span>
<span class="nb">print</span><span class="op">(</span>m1 <span class="op">+</span> m2<span class="op">)</span>       <span class="cm"># $15.75 USD  (uses __add__)</span>
<span class="nb">print</span><span class="op">(</span>m1 <span class="op">==</span> m2<span class="op">)</span>       <span class="cm"># False       (uses __eq__)</span>
<span class="nb">print</span><span class="op">(</span>m1 <span class="op">&gt;</span> m2<span class="op">)</span>        <span class="cm"># True        (uses __lt__ via @total_ordering)</span>
<span class="nb">print</span><span class="op">(</span><span class="nb">repr</span><span class="op">(</span>m1<span class="op">)</span><span class="op">)</span>       <span class="cm"># Money(10.5, &#x27;USD&#x27;)</span>
</code></pre>
<hr>
<div class="section-divider" id="appendix-a-quick-reference"><h2>Appendix A: Quick Reference</h2><div class="line"></div><span class="badge" style="background:var(--cyan-dim);color:var(--cyan)">Appendix A</span></div>
<h3 id="common-one-liners">Common One-Liners</h3>
<pre><code><span class="cm"># Flatten nested list</span>
flat <span class="op">=</span> <span class="op">[</span>x <span class="kw">for</span> sub <span class="kw">in</span> nested <span class="kw">for</span> x <span class="kw">in</span> sub<span class="op">]</span>

<span class="cm"># Remove duplicates, preserve order</span>
unique <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">dict</span><span class="op">.</span>fromkeys<span class="op">(</span>items<span class="op">)</span><span class="op">)</span>

<span class="cm"># Merge dicts (3.9+)</span>
merged <span class="op">=</span> d1 <span class="op">|</span> d2

<span class="cm"># Safe nested dict access</span>
val <span class="op">=</span> d<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">a</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">b</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">.</span>get<span class="op">(</span><span class="st">&quot;</span><span class="st">c</span><span class="st">&quot;</span><span class="op">)</span>

<span class="cm"># Transpose matrix</span>
transposed <span class="op">=</span> <span class="nb">list</span><span class="op">(</span><span class="nb">zip</span><span class="op">(</span><span class="op">*</span>matrix<span class="op">)</span><span class="op">)</span>

<span class="cm"># Frequency count</span>
<span class="kw">from</span> collections <span class="kw">import</span> Counter
freq <span class="op">=</span> Counter<span class="op">(</span>items<span class="op">)</span>

<span class="cm"># Invert a dictionary</span>
inverted <span class="op">=</span> <span class="op">{</span>v<span class="op">:</span> k <span class="kw">for</span> k<span class="op">,</span> v <span class="kw">in</span> d<span class="op">.</span>items<span class="op">(</span><span class="op">)</span><span class="op">}</span>

<span class="cm"># Chunk a list into groups of n</span>
<span class="kw">def</span> <span class="fn">chunk</span><span class="op">(</span>lst<span class="op">,</span> n<span class="op">)</span><span class="op">:</span>
    <span class="kw">return</span> <span class="op">[</span>lst<span class="op">[</span>i<span class="op">:</span>i<span class="op">+</span>n<span class="op">]</span> <span class="kw">for</span> i <span class="kw">in</span> <span class="nb">range</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="nb">len</span><span class="op">(</span>lst<span class="op">)</span><span class="op">,</span> n<span class="op">)</span><span class="op">]</span>

<span class="cm"># Read entire file as string</span>
content <span class="op">=</span> <span class="nb">open</span><span class="op">(</span><span class="st">&quot;</span><span class="st">file.txt</span><span class="st">&quot;</span><span class="op">)</span><span class="op">.</span>read<span class="op">(</span><span class="op">)</span>

<span class="cm"># Flatten dict to query string</span>
params <span class="op">=</span> <span class="op">{</span><span class="st">&quot;</span><span class="st">page</span><span class="st">&quot;</span><span class="op">:</span> <span class="num">1</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">sort</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">name</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;</span><span class="st">order</span><span class="st">&quot;</span><span class="op">:</span> <span class="st">&quot;</span><span class="st">asc</span><span class="st">&quot;</span><span class="op">}</span>
query <span class="op">=</span> <span class="st">&quot;</span><span class="st">&amp;</span><span class="st">&quot;</span><span class="op">.</span>join<span class="op">(</span><span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>k<span class="st">}</span><span class="st">=</span><span class="st">{</span>v<span class="st">}</span><span class="st">&quot;</span> <span class="kw">for</span> k<span class="op">,</span> v <span class="kw">in</span> params<span class="op">.</span>items<span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="cm"># &quot;page=1&amp;sort=name&amp;order=asc&quot;</span>
</code></pre>
<h3 id="built-in-functions-you-should-know">Built-in Functions You Should Know</h3>
<table><thead><tr><th>Category</th><th>Functions</th><th>Example</th></tr></thead><tbody><tr><td>Iteration</td><td><code class="inline">enumerate, zip, reversed, sorted, range</code></td><td><code class="inline">for i, x in enumerate(lst)</code></td></tr>
<tr><td>Aggregation</td><td><code class="inline">len, sum, min, max, any, all</code></td><td><code class="inline">any(x &gt; 0 for x in lst)</code></td></tr>
<tr><td>Types</td><td><code class="inline">int, float, str, bool, list, tuple, set, dict</code></td><td><code class="inline">int(&quot;42&quot;)</code></td></tr>
<tr><td>Functional</td><td><code class="inline">map, filter, isinstance, getattr, hasattr</code></td><td><code class="inline">list(map(str, [1,2,3]))</code></td></tr>
<tr><td>I/O</td><td><code class="inline">print, input, open</code></td><td><code class="inline">open(&quot;f.txt&quot;)</code></td></tr>
<tr><td>Introspection</td><td><code class="inline">type, dir, help, vars, id</code></td><td><code class="inline">dir(object)</code></td></tr>
<tr><td>Math</td><td><code class="inline">abs, round, divmod, pow</code></td><td><code class="inline">divmod(17, 5)</code> -> <code class="inline">(3, 2)</code></td></tr></tbody></table>
<h3 id="string-format-cheatsheet">String Format Cheatsheet</h3>
<pre><code>name <span class="op">=</span> <span class="st">&quot;</span><span class="st">Alice</span><span class="st">&quot;</span>
pi <span class="op">=</span> <span class="num">3.14159</span>
big <span class="op">=</span> <span class="num">1000000</span>

<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>name<span class="st">:</span><span class="st">&gt;20</span><span class="st">}</span><span class="st">&quot;</span>       <span class="cm"># Right-align in 20 chars</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>name<span class="st">:</span><span class="st">&lt;20</span><span class="st">}</span><span class="st">&quot;</span>       <span class="cm"># Left-align</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>name<span class="st">:</span><span class="st">^20</span><span class="st">}</span><span class="st">&quot;</span>       <span class="cm"># Center</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>pi<span class="st">:</span><span class="st">.2f</span><span class="st">}</span><span class="st">&quot;</span>          <span class="cm"># &quot;3.14&quot;</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>pi<span class="st">:</span><span class="st">.5f</span><span class="st">}</span><span class="st">&quot;</span>          <span class="cm"># &quot;3.14159&quot;</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>big<span class="st">:</span><span class="st">,</span><span class="st">}</span><span class="st">&quot;</span>           <span class="cm"># &quot;1,000,000&quot;</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span>big<span class="st">:</span><span class="st">_</span><span class="st">}</span><span class="st">&quot;</span>           <span class="cm"># &quot;1_000_000&quot;</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="num">0.856</span><span class="st">:</span><span class="st">.1%</span><span class="st">}</span><span class="st">&quot;</span>       <span class="cm"># &quot;85.6%&quot;</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="num">42</span><span class="st">:</span><span class="st">08d</span><span class="st">}</span><span class="st">&quot;</span>          <span class="cm"># &quot;00000042&quot;</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="num">255</span><span class="st">:</span><span class="st">#x</span><span class="st">}</span><span class="st">&quot;</span>          <span class="cm"># &quot;0xff&quot;</span>
<span class="st">f</span><span class="st">&quot;</span><span class="st">{</span><span class="num">255</span><span class="st">:</span><span class="st">#b</span><span class="st">}</span><span class="st">&quot;</span>          <span class="cm"># &quot;0b11111111&quot;</span>
</code></pre>
<hr>
<div class="section-divider" id="appendix-b-resources-references"><h2>Appendix B: Resources & References</h2><div class="line"></div><span class="badge" style="background:var(--cyan-dim);color:var(--cyan)">Appendix B</span></div>
<p><strong>Official:</strong></p>
<ul><li><a href="https://docs.python.org/3/">Python Documentation</a></li>
<li><a href="https://peps.python.org/pep-0008/">PEP 8 Style Guide</a></li>
<li><a href="https://docs.python.org/3/tutorial/">Python Tutorial</a></li></ul>
<p><strong>Learning:</strong></p>
<ul><li><a href="https://developers.google.com/edu/python">Google's Python Class</a></li>
<li><a href="https://realpython.com/">Real Python</a> - In-depth tutorials</li>
<li><a href="https://www.oreilly.com/library/view/python-cookbook-3rd/9781449357337/">Python Cookbook (O'Reilly)</a></li></ul>
<p><strong>Practice:</strong></p>
<ul><li><a href="https://leetcode.com/">LeetCode</a> - Algorithm problems with Python solutions</li>
<li><a href="https://projecteuler.net/">Project Euler</a> - Math + programming challenges</li>
<li><a href="https://www.hackerrank.com/domains/python">HackerRank Python Track</a></li></ul>
<p><strong>Data Science:</strong></p>
<ul><li><a href="https://www.kaggle.com/learn">Kaggle Learn</a> - Free micro-courses</li>
<li><a href="https://pypi.org/project/dtale/">D-Tale</a> - Interactive DataFrame exploration</li>
<li><a href="https://pandas.pydata.org/docs/">Pandas Documentation</a></li></ul>
<p><strong>Tools:</strong></p>
<ul><li><a href="https://pypi.org/">PyPI</a> - Python Package Index</li>
<li><a href="https://github.com/vinta/awesome-python">Awesome Python</a> - Curated list of libraries</li></ul>
<hr>
<p><em>Generated from the <a href="https://github.com/paramraghavan/beginners-py-learn">beginners-py-learn</a> repository.</em></p>
</div>

<button id="back-top" title="Back to top" onclick="window.scrollTo({top:0,behavior:'smooth'})">&#8593;</button>

<script>
// Progress bar
window.addEventListener('scroll',function(){
  var h=document.documentElement;
  var pct=h.scrollTop/(h.scrollHeight-h.clientHeight)*100;
  document.getElementById('progress').style.width=pct+'%';
  var btn=document.getElementById('back-top');
  btn.style.display=h.scrollTop>400?'flex':'none';
});

// Search
(function(){
  var input=document.getElementById('search');
  var content=document.getElementById('content');
  var originalHTML=content.innerHTML;
  var debounce;
  input.addEventListener('input',function(){
    clearTimeout(debounce);
    debounce=setTimeout(function(){
      var q=input.value.trim().toLowerCase();
      if(!q){content.innerHTML=originalHTML;return;}
      content.innerHTML=originalHTML;
      // Find all text nodes and highlight
      var walker=document.createTreeWalker(content,NodeFilter.SHOW_TEXT,null,false);
      var nodes=[];
      while(walker.nextNode()) nodes.push(walker.currentNode);
      var re=new RegExp('('+q.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')+')','gi');
      nodes.forEach(function(n){
        if(n.parentNode.tagName==='SCRIPT'||n.parentNode.tagName==='STYLE') return;
        if(re.test(n.nodeValue)){
          var span=document.createElement('span');
          span.innerHTML=n.nodeValue.replace(re,'<mark>$1</mark>');
          n.parentNode.replaceChild(span,n);
        }
      });
    },200);
  });
})();

// Active nav on scroll
(function(){
  var links=document.querySelectorAll('.nav a');
  var sections=[];
  links.forEach(function(a){
    var id=a.getAttribute('href').slice(1);
    var el=document.getElementById(id);
    if(el) sections.push({el:el,a:a});
  });
  window.addEventListener('scroll',function(){
    var top=window.scrollY+80;
    var active=null;
    sections.forEach(function(s){
      if(s.el.offsetTop<=top) active=s;
    });
    links.forEach(function(a){a.classList.remove('active')});
    if(active) active.a.classList.add('active');
  });
})();
</script>
</body>
</html>